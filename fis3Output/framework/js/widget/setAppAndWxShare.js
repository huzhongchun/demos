define(function(e){function i(e){var i={};i.title=e.wechatTimeline&&e.wechatTimeline.title?e.wechatTimeline.title:e.title,i.link=e.wechatTimeline&&e.wechatTimeline.link?e.wechatTimeline.link:e.link,i.image=e.wechatTimeline&&e.wechatTimeline.image?e.wechatTimeline.image:e.image;new l({shareAppMessageTitle:e.title,shareAppMessageDesc:e.text,shareAppMessageLink:e.link,shareAppMessageImgUrl:e.image,shareAppMessageSuccessCallback:function(){e.shareAppMessageSuccessCallback&&e.shareAppMessageSuccessCallback.call(this)},shareAppMessageCancelCallback:function(){},shareTimelineTitle:i.title,shareTimelineLink:i.link,shareTimelineImgUrl:i.image,shareTimelineSuccessCallback:function(){e.shareTimelineSuccessCallback&&e.shareTimelineSuccessCallback.call(this)},shareTimelineCancelCallback:function(){}})}function a(e){var i=(location.href,""),a={};e.appShareSuccessCallback&&(i=e.appShareSuccessCallback);var l=e.link,n=e.title,c=e.text,s=e.image;a.title=e.wechatTimeline&&e.wechatTimeline.title?e.wechatTimeline.title:e.title,a.link=e.wechatTimeline&&e.wechatTimeline.link?e.wechatTimeline.link:e.link,a.image=e.wechatTimeline&&e.wechatTimeline.image?e.wechatTimeline.image:e.image;var m={facebook:{link:l,image:s,text:c},twitter:{link:l,image:s,text:c},wechat_session:{link:l,image:s,title:n,text:c},wechat_timeline:{link:a.link,image:a.image,title:a.title},weibo:{link:l,image:s,text:n+l},copy_link:{link:l},callback:i};t.toolbar.setShareContent(encodeURIComponent(JSON.stringify(m)))}var l=e("./wxShare"),t=e("./jsbridge"),n=function(e){e&&(i(e),a(e))};return n});