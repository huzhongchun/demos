!function(t){!function(t){String.prototype.trim===t&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.prototype.reduce===t&&(Array.prototype.reduce=function(e){if(void 0===this||null===this)throw new TypeError;var n,i=Object(this),o=i.length>>>0,a=0;if("function"!=typeof e)throw new TypeError;if(0==o&&1==arguments.length)throw new TypeError;if(arguments.length>=2)n=arguments[1];else for(;;){if(a in i){n=i[a++];break}if(++a>=o)throw new TypeError}for(;o>a;)a in i&&(n=e.call(t,n,i[a],a,i)),a++;return n}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var n,i;if(null==this)throw new TypeError("this is null or not defined");var o=Object(this),a=o.length>>>0;if("[object Function]"!=={}.toString.call(t))throw new TypeError(t+" is not a function");for(e&&(n=e),i=0;a>i;){var r;Object.prototype.hasOwnProperty.call(o,i)&&(r=o[i],t.call(n,r,i,o)),i++}}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t){var e=this.length>>>0,n=Number(arguments[1])||0;for(n=0>n?Math.ceil(n):Math.floor(n),0>n&&(n+=e);e>n;n++)if(n in this&&this[n]===t)return n;return-1})}();var e=function(){function t(t){return null==t?String(t):X[G.call(t)]||"object"}function e(e){return"function"==t(e)}function n(t){return null!=t&&t==t.window}function i(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function o(e){return"object"==t(e)}function a(t){if(!t||"[object Object]"!==t.toString()||t.nodeType||t.setInterval)return!1;if(t.constructor&&!t.hasOwnProperty("constructor")&&!t.constructor.prototype.hasOwnProperty("isPrototypeOf"))return!1;var e;for(e in t);return e===x||t.hasOwnProperty(e)}function r(t){return t instanceof Array}function s(t){return"number"==typeof t.length}function l(t){return D.call(t,function(t){return null!=t})}function d(t){return t.length>0?I.fn.concat.apply([],t):t}function c(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function p(t){return t in F?F[t]:F[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function u(t,e){return"number"!=typeof e||E[c(t)]?e:e+"px"}function f(t){var e,n;return V[t]||(e=q.createElement(t),q.body.appendChild(e),n=A(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==n&&(n="block"),V[t]=n),V[t]}function h(t){return"children"in t?P.call(t.children):I.map(t.childNodes,function(t){return 1==t.nodeType?t:void 0})}function v(t,e,n){for($ in e)n&&(a(e[$])||r(e[$]))?(a(e[$])&&!a(t[$])&&(t[$]={}),r(e[$])&&!r(t[$])&&(t[$]=[]),v(t[$],e[$],n)):e[$]!==x&&(t[$]=e[$])}function g(t,e){return e===x?I(t):I(t).filter(e)}function m(t,n,i,o){return e(n)?n.call(t,i,o):n}function y(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function w(t,e){var n=t.className,i=n&&n.baseVal!==x;return e===x?i?n.baseVal:n:void(i?n.baseVal=e:t.className=e)}function _(t){var e;try{return t?"true"==t||("false"==t?!1:"null"==t?null:isNaN(e=Number(t))?/^[\[\{]/.test(t)?I.parseJSON(t):t:e):t}catch(n){return t}}function b(t,e){e(t);for(var n in t.childNodes)b(t.childNodes[n],e)}var x,$,I,T,S,C,k=[],P=k.slice,D=k.filter,q=window.document,V={},F={},A=q.defaultView?q.defaultView.getComputedStyle:q.documentElement.currentStyle,E={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},j=/^\s*<(\w+|!)[^>]*>/,L=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,U=/^(?:body|html)$/i,B=["val","css","html","text","data","width","height","offset"],O=["after","prepend","before","append"],H=q.createElement("table"),M=q.createElement("tr"),R={tr:q.createElement("tbody"),tbody:H,thead:H,tfoot:H,td:M,th:M,"*":q.createElement("div")},N=/complete|loaded|interactive/,Q=/^\.([\w-]+)$/,z=/^#([\w-]*)$/,W=/^[\w-]+$/,X={},G=X.toString,J={},K=q.createElement("div");return J.matches=function(t,e){if(!t||1!==t.nodeType)return!1;var n=t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(n)return n.call(t,e);var i,o=t.parentNode,a=!o;return a&&(o=K).appendChild(t),i=~J.qsa(o,e).indexOf(t),a&&K.removeChild(t),i},S=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},C=function(t){return D.call(t,function(e,n){return t.indexOf(e)==n})},J.fragment=function(t,e,n){t.replace&&(t=t.replace(L,"<$1></$2>")),e===x&&(e=j.test(t)&&RegExp.$1),e in R||(e="*");var i,o,r=R[e];return r.innerHTML=""+t,o=I.each(P.call(r.childNodes),function(){r.removeChild(this)}),a(n)&&(i=I(o),I.each(n,function(t,e){B.indexOf(t)>-1?i[t](e):i.attr(t,e)})),o},J.Z=function(t,e){return t=t||[],t.__proto__=I.fn,t.selector=e||"",t},J.isZ=function(t){return t instanceof J.Z},J.init=function(t,n){if(t){if(e(t))return I(q).ready(t);if(J.isZ(t))return t;var i;if(r(t))i=l(t);else if(o(t))i=[a(t)?I.extend({},t):t],t=null;else if(j.test(t))i=J.fragment(t.trim(),RegExp.$1,n),t=null;else{if(n!==x)return I(n).find(t);i=J.qsa(q,t)}return J.Z(i,t)}return J.Z()},I=function(t,e){return J.init(t,e)},I._tvp=!0,I.extend=function(t){var e,n=P.call(arguments,1);return"boolean"==typeof t&&(e=t,t=n.shift()),n.forEach(function(n){v(t,n,e)}),t},J.qsa=function(t,e){var n;return i(t)&&z.test(e)?(n=t.getElementById(RegExp.$1))?[n]:[]:1!==t.nodeType&&9!==t.nodeType?[]:P.call(Q.test(e)?t.getElementsByClassName(RegExp.$1):W.test(e)?t.getElementsByTagName(e):t.querySelectorAll(e))},I.contains=function(t,e){return t!==e&&t.contains(e)},I.type=t,I.isFunction=e,I.isWindow=n,I.isArray=r,I.isPlainObject=a,I.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},I.inArray=function(t,e,n){return k.indexOf.call(e,t,n)},I.camelCase=S,I.trim=function(t){return t.trim()},I.uuid=0,I.support={},I.expr={},I.map=function(t,e){var n,i,o,a=[];if(s(t))for(i=0;i<t.length;i++)n=e(t[i],i),null!=n&&a.push(n);else for(o in t)n=e(t[o],o),null!=n&&a.push(n);return d(a)},I.each=function(t,e){var n,i;if(s(t)){for(n=0;n<t.length;n++)if(e.call(t[n],n,t[n])===!1)return t}else for(i in t)if(e.call(t[i],i,t[i])===!1)return t;return t},I.grep=function(t,e){return D.call(t,e)},window.JSON&&(I.parseJSON=JSON.parse),I.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){X["[object "+e+"]"]=e.toLowerCase()}),I.fn={forEach:k.forEach,reduce:k.reduce,push:k.push,sort:k.sort,indexOf:k.indexOf,concat:k.concat,map:function(t){return I(I.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return I(P.apply(this,arguments))},ready:function(t){return N.test(q.readyState)?t(I):q.addEventListener("DOMContentLoaded",function(){t(I)},!1),this},get:function(t){return t===x?P.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(t){return k.every.call(this,function(e,n){return t.call(e,n,e)!==!1}),this},filter:function(t){return e(t)?this.not(this.not(t)):I(D.call(this,function(e){return J.matches(e,t)}))},add:function(t,e){return I(C(this.concat(I(t,e))))},is:function(t){return this.length>0&&J.matches(this[0],t)},not:function(t){var n=[];if(e(t)&&t.call!==x)this.each(function(e){t.call(this,e)||n.push(this)});else{var i="string"==typeof t?this.filter(t):s(t)&&e(t.item)?P.call(t):I(t);this.forEach(function(t){i.indexOf(t)<0&&n.push(t)})}return I(n)},has:function(t){return this.filter(function(){return o(t)?I.contains(this,t):I(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!o(t)?t:I(t)},last:function(){var t=this[this.length-1];return t&&!o(t)?t:I(t)},find:function(t){var e,n=this;return e="object"==typeof t?I(t).filter(function(){var t=this;return k.some.call(n,function(e){return I.contains(e,t)})}):1==this.length?I(J.qsa(this[0],t)):this.map(function(){return J.qsa(this,t)})},closest:function(t,e){var n=this[0],o=!1;for("object"==typeof t&&(o=I(t));n&&!(o?o.indexOf(n)>=0:J.matches(n,t));)n=n!==e&&!i(n)&&n.parentNode;return I(n)},parents:function(t){for(var e=[],n=this;n.length>0;)n=I.map(n,function(t){return(t=t.parentNode)&&!i(t)&&e.indexOf(t)<0?(e.push(t),t):void 0});return g(e,t)},parent:function(t){return g(C(this.pluck("parentNode")),t)},children:function(t){return g(this.map(function(){return h(this)}),t)},contents:function(){return this.map(function(){return P.call(this.childNodes)})},siblings:function(t){return g(this.map(function(t,e){return D.call(h(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return I.map(this,function(e){return e[t]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=null),"none"==A(this,"").getPropertyValue("display")&&(this.style.display=f(this.nodeName))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var n=e(t);if(this[0]&&!n)var i=I(t).get(0),o=i.parentNode||this.length>1;return this.each(function(e){I(this).wrapAll(n?t.call(this,e):o?i.cloneNode(!0):i)})},wrapAll:function(t){if(this[0]){I(this[0]).before(t=I(t));for(var e;(e=t.children()).length;)t=e.first();I(t).append(this)}return this},wrapInner:function(t){var n=e(t);return this.each(function(e){var i=I(this),o=i.contents(),a=n?t.call(this,e):t;o.length?o.wrapAll(a):i.append(a)})},unwrap:function(){return this.parent().each(function(){I(this).replaceWith(I(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var e=I(this);(t===x?"none"==e.css("display"):t)?e.show():e.hide()})},prev:function(t){return I(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return I(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return t===x?this.length>0?this[0].innerHTML:null:this.each(function(e){var n=this.innerHTML;I(this).empty().append(m(this,t,e,n))})},text:function(t){return t===x?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=t})},attr:function(t,e){var n;return"string"==typeof t&&e===x?0==this.length||1!==this[0].nodeType?x:"value"==t&&"INPUT"==this[0].nodeName?this.val():!(n=this[0].getAttribute(t))&&t in this[0]?this[0][t]:n:this.each(function(n){if(1===this.nodeType)if(o(t))for($ in t)y(this,$,t[$]);else y(this,t,m(this,e,n,this.getAttribute(t)))})},removeAttr:function(t){return this.each(function(){1===this.nodeType&&y(this,t)})},prop:function(t,e){return e===x?this[0]&&this[0][t]:this.each(function(n){this[t]=m(this,e,n,this[t])})},data:function(t,e){var n=this.attr("data-"+c(t),e);return null!==n?_(n):x},val:function(t){return t===x?this[0]&&(this[0].multiple?I(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(e){this.value=m(this,t,e,this.value)})},offset:function(t){if(t)return this.each(function(e){var n=I(this),i=m(this,t,e,n.offset()),o=n.offsetParent().offset(),a={top:i.top-o.top,left:i.left-o.left};"static"==n.css("position")&&(a.position="relative"),n.css(a)});if(0==this.length)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(e,n){if(arguments.length<2&&"string"==typeof e)return this[0]&&(this[0].style[S(e)]||A(this[0],"").getPropertyValue(e));var i="";if("string"==t(e))n||0===n?i=c(e)+":"+u(e,n):this.each(function(){this.style.removeProperty(c(e))});else for($ in e)e[$]||0===e[$]?i+=c($)+":"+u($,e[$])+";":this.each(function(){this.style.removeProperty(c($))});return this.each(function(){this.style.cssText+=";"+i})},index:function(t){return t?this.indexOf(I(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return k.some.call(this,function(t){return this.test(w(t))},p(t))},addClass:function(t){return this.each(function(e){T=[];var n=w(this),i=m(this,t,e,n);i.split(/\s+/g).forEach(function(t){I(this).hasClass(t)||T.push(t)},this),T.length&&w(this,n+(n?" ":"")+T.join(" "))})},removeClass:function(t){return this.each(function(e){return t===x?w(this,""):(T=w(this),m(this,t,e,T).split(/\s+/g).forEach(function(t){T=T.replace(p(t)," ")}),void w(this,T.trim()))})},toggleClass:function(t,e){return this.each(function(n){var i=I(this),o=m(this,t,n,w(this));o.split(/\s+/g).forEach(function(t){(e===x?!i.hasClass(t):e)?i.addClass(t):i.removeClass(t)})})},scrollTop:function(){return this.length?"scrollTop"in this[0]?this[0].scrollTop:this[0].scrollY:void 0},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),n=this.offset(),i=U.test(e[0].nodeName)?{top:0,left:0}:e.offset();return n.top-=parseFloat(I(t).css("margin-top"))||0,n.left-=parseFloat(I(t).css("margin-left"))||0,i.top+=parseFloat(I(e[0]).css("border-top-width"))||0,i.left+=parseFloat(I(e[0]).css("border-left-width"))||0,{top:n.top-i.top,left:n.left-i.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||q.body;t&&!U.test(t.nodeName)&&"static"==I(t).css("position");)t=t.offsetParent;return t})}},I.fn.detach=I.fn.remove,["width","height"].forEach(function(t){I.fn[t]=function(e){var o,a=this[0],r=t.replace(/./,function(t){return t[0].toUpperCase()});return e===x?n(a)?a["inner"+r]:i(a)?a.documentElement["offset"+r]:(o=this.offset())&&o[t]:this.each(function(n){a=I(this),a.css(t,m(this,e,n,a[t]()))})}}),O.forEach(function(e,n){var i=n%2;I.fn[e]=function(){var e,o,a=I.map(arguments,function(n){return e=t(n),"object"==e||"array"==e||null==n?n:J.fragment(n)}),r=this.length>1;return a.length<1?this:this.each(function(t,e){o=i?e:e.parentNode,e=0==n?e.nextSibling:1==n?e.firstChild:2==n?e:null,a.forEach(function(t){if(r)t=t.cloneNode(!0);else if(!o)return I(t).remove();b(o.insertBefore(t,e),function(t){null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src||window.eval.call(window,t.innerHTML)})})})},I.fn[i?e+"To":"insert"+(n?"Before":"After")]=function(t){return I(t)[e](this),this}}),J.Z.prototype=I.fn,J.uniq=C,J.deserializeValue=_,I.zepto=J,I}();if("undefined"==typeof t&&(window.Zepto=e),function(t){function e(t){var e=this.os={},n=this.browser={},i=t.match(/WebKit\/([\d.]+)/),o=t.match(/(Android)(\s+|\/)([\d.]+)/),a=t.match(/(iPad).*OS\s([\d_]+)/),r=!a&&t.match(/(iPhone\sOS)\s([\d_]+)/),s=t.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),l=s&&t.match(/TouchPad/),d=t.match(/Kindle\/([\d.]+)/),c=t.match(/Silk\/([\d._]+)/),p=t.match(/(BlackBerry).*Version\/([\d.]+)/),u=t.match(/(BB10).*Version\/([\d.]+)/),f=t.match(/(RIM\sTablet\sOS)\s([\d.]+)/),h=t.match(/PlayBook/),v=t.match(/Chrome\/([\d.]+)/)||t.match(/CriOS\/([\d.]+)/),g=t.match(/Firefox\/([\d.]+)/);(n.webkit=!!i)&&(n.version=i[1]),o&&(e.android=!0,e.version=o[3]),r&&(e.ios=e.iphone=!0,e.version=r[2].replace(/_/g,".")),a&&(e.ios=e.ipad=!0,e.version=a[2].replace(/_/g,".")),s&&(e.webos=!0,e.version=s[2]),l&&(e.touchpad=!0),p&&(e.blackberry=!0,e.version=p[2]),u&&(e.bb10=!0,e.version=u[2]),f&&(e.rimtabletos=!0,e.version=f[2]),h&&(n.playbook=!0),d&&(e.kindle=!0,e.version=d[1]),c&&(n.silk=!0,n.version=c[1]),!c&&e.android&&t.match(/Kindle Fire/)&&(n.silk=!0),v&&(n.chrome=!0,n.version=v[1]),g&&(n.firefox=!0,n.version=g[1]),e.tablet=!!(a||h||o&&!t.match(/Mobile/)||g&&t.match(/Tablet/)),e.phone=!(e.tablet||!(o||r||s||p||u||v&&t.match(/Android/)||v&&t.match(/CriOS\/([\d.]+)/)||g&&t.match(/Mobile/)))}e.call(t,navigator.userAgent),t.__detect=e}(e),function(t){function e(t){return t._zid||(t._zid=f++)}function n(t,n,a,r){if(n=i(n),n.ns)var s=o(n.ns);return(u[e(t)]||[]).filter(function(t){return!(!t||n.e&&t.e!=n.e||n.ns&&!s.test(t.ns)||a&&e(t.fn)!==e(a)||r&&t.sel!=r)})}function i(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function o(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function a(e,n,i){"string"!=t.type(e)?t.each(e,i):e.split(/\s/).forEach(function(t){i(t,n)})}function r(t,e){return t.del&&("focus"==t.e||"blur"==t.e)||!!e}function s(t){return v[t]||t}function l(n,o,l,d,c,p){var f=e(n),h=u[f]||(u[f]=[]);a(o,l,function(e,o){var a=i(e);a.fn=o,a.sel=d,a.e in v&&(o=function(e){var n=e.relatedTarget;return!n||n!==this&&!t.contains(this,n)?a.fn.apply(this,arguments):void 0}),a.del=c&&c(o,e);var l=a.del||o;a.proxy=function(t){var e=l.apply(n,[t].concat(t.data));return e===!1&&(t.preventDefault(),t.stopPropagation()),e},a.i=h.length,h.push(a),n.addEventListener?n.addEventListener(s(a.e),a.proxy,r(a,p)):n.attachEvent("on"+s(a.e),a.proxy,r(a,p))})}function d(t,i,o,l,d){var c=e(t);a(i||"",o,function(e,i){n(t,e,i,l).forEach(function(e){delete u[c][e.i],t.removeEventListener?t.removeEventListener(s(e.e),e.proxy,r(e,d)):t.detachEvent("on"+s(e.e),e.proxy,r(e,d))})})}function c(e){var n,i={originalEvent:e};for(n in e)y.test(n)||void 0===e[n]||(i[n]=e[n]);return t.each(w,function(t,n){i[t]=function(){return this[n]=g,e[t].apply(e,arguments)},i[n]=m}),i}function p(t){if(!("defaultPrevented"in t)){t.defaultPrevented=!1;var e=t.preventDefault;t.preventDefault=function(){this.defaultPrevented=!0,e.call(this)}}}var u=(t.zepto.qsa,{}),f=1,h={},v={mouseenter:"mouseover",mouseleave:"mouseout"};h.click=h.mousedown=h.mouseup=h.mousemove="MouseEvents",t.event={add:l,remove:d},t.proxy=function(n,i){if(t.isFunction(n)){var o=function(){return n.apply(i,arguments)};return o._zid=e(n),o}if("string"==typeof i)return t.proxy(n[i],n);throw new TypeError("expected function")},t.fn.bind=function(t,e){return this.each(function(){l(this,t,e)})},t.fn.unbind=function(t,e){return this.each(function(){d(this,t,e)})},t.fn.one=function(t,e){return this.each(function(n,i){l(this,t,e,null,function(t,e){return function(){var n=t.apply(i,arguments);return d(i,e,t),n}})})};var g=function(){return!0},m=function(){return!1},y=/^([A-Z]|layer[XY]$)/,w={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};t.fn.delegate=function(e,n,i){return this.each(function(o,a){l(a,n,i,e,function(n){return function(i){var o,r=t(i.target).closest(e,a).get(0);return r?(o=t.extend(c(i),{currentTarget:r,liveFired:a}),n.apply(r,[o].concat([].slice.call(arguments,1)))):void 0}})})},t.fn.undelegate=function(t,e,n){return this.each(function(){d(this,e,n,t)})},t.fn.live=function(e,n){return t(document.body).delegate(this.selector,e,n),this},t.fn.die=function(e,n){return t(document.body).undelegate(this.selector,e,n),this},t.fn.on=function(e,n,i){return!n||t.isFunction(n)?this.bind(e,n||i):this.delegate(n,e,i)},t.fn.off=function(e,n,i){return!n||t.isFunction(n)?this.unbind(e,n||i):this.undelegate(n,e,i)},t.fn.trigger=function(e,n){return("string"==typeof e||t.isPlainObject(e))&&(e=t.Event(e)),p(e),e.data=n,this.each(function(){"dispatchEvent"in this&&this.dispatchEvent(e)})},t.fn.triggerHandler=function(e,i){var o,a;return this.each(function(r,s){o=c("string"==typeof e?t.Event(e):e),o.data=i,o.target=s,t.each(n(s,e.type||e),function(t,e){return a=e.proxy(o),o.isImmediatePropagationStopped()?!1:void 0})}),a},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){t.fn[e]=function(t){return t?this.bind(e,t):this.trigger(e)}}),["focus","blur"].forEach(function(e){t.fn[e]=function(t){return t?this.bind(e,t):this.each(function(){try{this[e]()}catch(t){}}),this}}),t.Event=function(t,e){"string"!=typeof t&&(e=t,t=e.type);var n=document.createEvent(h[t]||"Events"),i=!0;if(e)for(var o in e)"bubbles"==o?i=!!e[o]:n[o]=e[o];return n.initEvent(t,i,!0,null,null,null,null,null,null,null,null,null,null,null,null),n.isDefaultPrevented=function(){return this.defaultPrevented},n}}(e),function(t){var e,n,i,o,a,r,s;n=function(t,e){e.parentNode.removeChild(e),window[t]=void 0;try{delete window[t]}catch(n){}},i=function(t,e){var n,i,o="";for(n in t)t.hasOwnProperty(n)&&(n=e?encodeURIComponent(n):n,i=e?encodeURIComponent(t[n]):t[n],o+=n+"="+i+"&");return o.replace(/&$/,"")},o=function(){return"cb_"+tvp.$.createGUID(16)},a=function(t,e){"undefined"!=typeof t&&t(e)},r=function(t,e){"undefined"!=typeof t&&t(e)},s=function(t){"undefined"!=typeof t&&t()},e={},e.init=function(t){var n;for(n in t)t.hasOwnProperty(n)&&(e.options[n]=t[n]);return!0},e.get=function(t){t=t||{};var e=t.url,l=t.callbackParameter||"callback",d=t.data||{},c=document.createElement("script"),p=t.jsonpCallback||o(),u="?";e&&(d[l]=p,e.indexOf("?")>=0&&(u="&"),e+=u+i(d,!0),e=e.replace(/=\?/,"="+p),window[p]=function(e){"undefined"==typeof e?a(t.error,"Invalid JSON data returned"):r(t.success,e),n(p,c),s(t.complete)},c.setAttribute("src",e),document.getElementsByTagName("head")[0].appendChild(c),c.onerror=function(){n(p,c),s(t.complete),a(t.error,"Error while trying to access the URL")})},t.ajax=e.get}(e),function(t){if("__proto__"in{}||t.extend(t.zepto,{Z:function(e,n){return e=e||[],t.extend(e,t.fn),e.selector=n||"",e.__Z=!0,e},isZ:function(e){return"array"===t.type(e)&&"__Z"in e}}),"function"==typeof window.getComputedStyle)try{getComputedStyle(void 0)}catch(e){var n=window.getComputedStyle;window.getComputedStyle=function(){try{return n.apply(window,arguments)}catch(t){return null}}}}(e),function(t){function e(e,n,i){var o=t.Event(n);return t(e).trigger(o,i),!o.isDefaultPrevented()}function n(t,n,i,o){return t.global?e(n||y,i,o):void 0}function i(e){e.global&&0===t.active++&&n(e,null,"ajaxStart")}function o(e){e.global&&!--t.active&&n(e,null,"ajaxStop")}function a(t,e){var i=e.context;return e.beforeSend.call(i,t,e)===!1||n(e,i,"ajaxBeforeSend",t,e)===!1?!1:void n(e,i,"ajaxSend",t,e)}function r(t,e,i,o){var a=i.context,r="success";i.success.call(a,t,r,e),o&&o.resolveWith(a,t,r,e),n(i,a,"ajaxSuccess",e,i,t),l(r,e,i)}function s(t,e,i,o,a){var r=o.context;o.error.call(r,i,e,t),a&&a.rejectWith(r,i,e,t),n(o,r,"ajaxError",i,o,t||e),l(e,i,o)}function l(t,e,i){var a=i.context;i.complete.call(a,e,t),n(i,a,"ajaxComplete",e,i),o(i)}function d(){}function c(t){return t&&(t=t.split(";",2)[0]),t&&(t==$?"html":t==x?"json":_.test(t)?"script":b.test(t)&&"xml")||"text"}function p(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function u(e){e.processData&&e.data&&"string"!=t.type(e.data)&&(e.data=t.param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()||(e.url=p(e.url,e.data),e.data=void 0)}function f(e,n,i,o){return t.isFunction(n)&&(o=i,i=n,n=void 0),t.isFunction(i)||(o=i,i=void 0),{url:e,data:n,success:i,dataType:o}}function h(e,n,i,o){var a,r=t.isArray(n),s=t.isPlainObject(n);t.each(n,function(n,l){a=t.type(l),o&&(n=i?o:o+"["+(s||"object"==a||"array"==a?n:"")+"]"),!o&&r?e.add(l.name,l.value):"array"==a||!i&&"object"==a?h(e,l,i,n):e.add(n,l)})}if(!(t.ajaxJSONP&&t.getJSON&&t.get&&t.post)){var v,g,m=0,y=window.document,w=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,_=/^(?:text|application)\/javascript/i,b=/^(?:text|application)\/xml/i,x="application/json",$="text/html",I=/^\s*$/,T=y.createElement("a");T.href=window.location.href,t.active=0,t.ajaxJSONP=function(e,n){if(!("type"in e))return t.Ajax(e);var i,o,l=e.jsonpCallback,d=(t.isFunction(l)?l():l)||"jsonp"+ ++m,c=y.createElement("script"),p=window[d],u=function(e){t(c).triggerHandler("error",e||"abort")},f={abort:u};return n&&n.promise(f),t(c).on("load error",function(a,l){clearTimeout(o),t(c).off().remove(),"error"!=a.type&&i?r(i[0],f,e,n):s(null,l||"error",f,e,n),window[d]=p,i&&t.isFunction(p)&&p(i[0]),p=i=void 0}),a(f,e)===!1?(u("abort"),f):(window[d]=function(){i=arguments},c.src=e.url.replace(/\?(.+)=\?/,"?$1="+d),y.head.appendChild(c),e.timeout>0&&(o=setTimeout(function(){u("timeout")},e.timeout)),f)},t.ajaxSettings={type:"GET",beforeSend:d,success:d,error:d,complete:d,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:x,xml:"application/xml, text/xml",html:$,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},t.Ajax=function(e){var n,o,l=t.extend({},e||{}),f=t.Deferred&&t.Deferred();for(v in t.ajaxSettings)void 0===l[v]&&(l[v]=t.ajaxSettings[v]);i(l),l.crossDomain||(n=y.createElement("a"),n.href=l.url,n.href=n.href,l.crossDomain=T.protocol+"//"+T.host!=n.protocol+"//"+n.host),l.url||(l.url=window.location.toString()),(o=l.url.indexOf("#"))>-1&&(l.url=l.url.slice(0,o)),u(l);var h=l.dataType,m=/\?.+=\?/.test(l.url);if(m&&(h="jsonp"),l.cache!==!1&&(e&&e.cache===!0||"script"!=h&&"jsonp"!=h)||(l.url=p(l.url,"_="+Date.now())),"jsonp"==h)return m||(l.url=p(l.url,l.jsonp?l.jsonp+"=?":l.jsonp===!1?"":"callback=?")),t.ajaxJSONP(l,f);var w,_=l.accepts[h],b={},x=function(t,e){b[t.toLowerCase()]=[t,e]},$=/^([\w-]+:)\/\//.test(l.url)?RegExp.$1:window.location.protocol,S=l.xhr(),C=S.setRequestHeader;if(f&&f.promise(S),l.crossDomain||x("X-Requested-With","XMLHttpRequest"),x("Accept",_||"*/*"),(_=l.mimeType||_)&&(_.indexOf(",")>-1&&(_=_.split(",",2)[0]),S.overrideMimeType&&S.overrideMimeType(_)),(l.contentType||l.contentType!==!1&&l.data&&"GET"!=l.type.toUpperCase())&&x("Content-Type",l.contentType||"application/x-www-form-urlencoded"),l.headers)for(g in l.headers)x(g,l.headers[g]);if(S.setRequestHeader=x,S.onreadystatechange=function(){if(4==S.readyState){S.onreadystatechange=d,clearTimeout(w);var e,n=!1;if(S.status>=200&&S.status<300||304==S.status||0==S.status&&"file:"==$){h=h||c(l.mimeType||S.getResponseHeader("content-type")),e=S.responseText;try{"script"==h?(1,eval)(e):"xml"==h?e=S.responseXML:"json"==h&&(e=I.test(e)?null:t.parseJSON(e))}catch(i){n=i}n?s(n,"parsererror",S,l,f):r(e,S,l,f)}else s(S.statusText||null,S.status?"error":"abort",S,l,f)}},a(S,l)===!1)return S.abort(),s(null,"abort",S,l,f),S;if(l.xhrFields)for(g in l.xhrFields)S[g]=l.xhrFields[g];var k="async"in l?l.async:!0;S.open(l.type,l.url,k,l.username,l.password);for(g in b)C.apply(S,b[g]);return l.timeout>0&&(w=setTimeout(function(){S.onreadystatechange=d,S.abort(),s(null,"timeout",S,l,f)},l.timeout)),S.send(l.data?l.data:null),S},t.get=function(){return t.Ajax(f.apply(null,arguments))},t.post=function(){var e=f.apply(null,arguments);return e.type="POST",t.Ajax(e)},t.getJSON=function(){var e=f.apply(null,arguments);return e.dataType="json",t.Ajax(e)},t.fn.load=function(e,n,i){if(!this.length)return this;var o,a=this,r=e.split(/\s/),s=f(e,n,i),l=s.success;return r.length>1&&(s.url=r[0],o=r[1]),s.success=function(e){a.html(o?t("<div>").html(e.replace(w,"")).find(o):e),l&&l.apply(a,arguments)},t.Ajax(s),this};var S=encodeURIComponent;t.param=function(e,n){var i=[];return i.add=function(e,n){t.isFunction(n)&&(n=n()),null==n&&(n=""),this.push(S(e)+"="+S(n))},h(i,e,n),i.join("&").replace(/%20/g,"+")}}}(e),tvp={},tvp.lastModify="2016-07-01 10:17:30",tvp.ts=tvp.lastModify.replace(/\D/g,""),tvp.ver="$V2.0Build7962$",tvp.dataset={openLazy:!0},tvp.name="腾讯视频统一播放器","undefined"==typeof window.DEBUG&&(window.DEBUG=1),window.FILEPATH="//imgcache.qq.com/tencentvideo_v1/tvp/js/",top!=window)try{tvp.topurl=top.location.href}catch(n){}tvp.log=function(t){if(window.DEBUG&&null!=document.getElementById("tvp_debug_console")){var e=document.getElementById("tvp_debug_console");e.innerHTML+=t+" | "}else window.console&&window.console.log("["+tvp.log.debugid++ +"] "+t)},tvp.debug=function(t){window.DEBUG||-1!==tvp.log.isDebug||(tvp.log.isDebug="true"==tvp.$.getUrlParam("debug")?1:0),(window.DEBUG||tvp.log.isDebug)&&tvp.log(t)},tvp.log.isDebug=-1,tvp.log.debugid=1,tvp.DEVICE={aphone:1,iphone:2,ipad:3,other:0},tvp.PLATFORM={wechat:1,mqq:2,qqbrowser:3,other:0},tvp.APPID={wechatPublic:1e4,news:10001,qqmusic:10007},tvp.ACTION={onVodH5Init:"tvp:vodhtml5:beforeInit",onFlashPlayerInited:"tvp:flash:inited"},function(){function t(t){return t instanceof Array}if("object"!=typeof tvp||!tvp.$||!tvp.$.Deferred){var n,i,o,a,r,s,l,d,c,p,u,f,h,v=[].slice;r="1.3.2",i="pending",a="resolved",o="rejected",c=function(t,e){return null!=t?t.hasOwnProperty(e):void 0},u=function(t){return c(t,"length")&&c(t,"callee")},d=function(e){return u(e)?d(Array.prototype.slice.call(e)):t(e)?e.reduce(function(e,n){return t(n)?e.concat(d(n)):(e.push(n),e)},[]):[e]},s=function(t,e){return 0>=t?e():function(){return--t<1?e.apply(this,arguments):void 0}},f=function(t,e){return function(){var n;return n=[t].concat(Array.prototype.slice.call(arguments,0)),e.apply(this,n)}},l=function(t,e,n){var i,o,a,r,s;for(r=d(t),s=[],o=0,a=r.length;a>o;o++)i=r[o],s.push(i.call.apply(i,[n].concat(v.call(e))));return s},n=function(){var t,e,r,s,c,p;return p=i,s=[],c=[],t=[],r={},this.promise=function(e){var u,f;return e=e||{},e.state=function(){return p},f=function(t,n){return function(){return p===i&&n.push.apply(n,d(arguments)),t()&&l(arguments,r),e}},e.done=f(function(){return p===a},s),e.fail=f(function(){return p===o},c),e.always=f(function(){return p!==i},t),u=function(t,i){var o,a;return o=new n,a=function(t,e,n){return t(n?function(){return e(n.apply(null,d(arguments)))}:function(){return e.apply(null,d(arguments))})},a(e.done,o.resolve,t),a(e.fail,o.reject,i),o},e.pipe=u,e.then=u,e},this.promise(this),e=function(e,n,o){return function(){return p===i&&(p=e,r=arguments,l([n,t],r,o)),this}},this.resolve=e(a,s),this.reject=e(o,c),this.resolveWith=function(){var t,n;return n=arguments[0],t=2<=arguments.length?v.call(arguments,1):[],e(a,s,n).apply(null,t)},this.rejectWith=function(){var t,n;return n=arguments[0],t=2<=arguments.length?v.call(arguments,1):[],e(o,c,n).apply(null,t)},this},h=function(){var t,e,i,o,a,r,l,c;for(o=new n,e=d(arguments),i=s(e.length,o.resolve),a=0,l=e.length;l>a;a++)t=e[a],t.done(i);for(r=0,c=e.length;c>r;r++)t=e[r],t.fail(function(t,e){return o.reject(t,e)});return o.promise()},p=function(t){return t.Deferred=function(){return new n},t.ajax=f(t.ajax,function(t,e){var i,o;return null==e&&(e={}),o=new n,i=function(t,e){return f(t,function(){var t,n;return n=arguments[0],t=2<=arguments.length?v.call(arguments,1):[],n&&n.apply(null,t),e.apply(null,t)})},e.success=i(e.success,o.resolve),e.error=i(e.error,o.reject),t(e),o.promise()}),t.when=h},"undefined"!=typeof exports?(exports.Deferred=function(){return new n},exports.when=h,exports.installInto=p):(this.Deferred=function(){return new n},this.Deferred.when=h,this.Deferred.installInto=p,this.DeferedClass=n),tvp.Deferred.installInto("undefined"!=typeof e?e:jq)}}.call(tvp),function(t){t.param=function(e,n){var i=[];for(var o in e)if(!t.isFunction(e[o])){var a=n?n+"["+o+"]":o,r=e[o];i.push(t.isPlainObject(r)?t.param(r,a):a+"="+encodeURIComponent(r))}return i.join("&")}}(e);var i=!1;"undefined"!=typeof e&&e._tvp?(tvp.$=e,i=!0):(tvp.$={},i=!1),function(){return i?void 0:"function"==typeof window.Zepto?void(tvp.$=window.Zepto):"function"==typeof window.jQuery&&"function"==typeof window.jQuery.Deferred?(tvp.$=window.jQuery,void(!tvp.$.os&&"undefined"!=typeof e&&e.__detect&&e.__detect.call(tvp.$,navigator.userAgent))):void("function"==typeof window.jq&&(tvp.$=window.jq,!tvp.$.os&&"undefined"!=typeof e&&e.__detect&&e.__detect.call(tvp.$,navigator.userAgent)))}(),function(){"undefined"==typeof document.DOCUMENT_NODE&&(document.DOCUMENT_NODE=9)}(),function(t){function e(t){var e=this.os={},n=this.browser={},i=t.match(/WebKit\/([\d.]+)/),o=t.match(/(Android)(\s+|\/)([\d.]+)/),a=t.match(/(Android)(\s+)N/),r=t.match(/(iPad).*OS\s([\d_]+)/),s=!r&&t.match(/(iPhone\sOS)\s([\d_]+)/),l=t.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),d=l&&t.match(/TouchPad/),c=t.match(/Kindle\/([\d.]+)/),p=t.match(/Silk\/([\d._]+)/),u=t.match(/(BlackBerry).*Version\/([\d.]+)/),f=t.match(/(BB10).*Version\/([\d.]+)/),h=t.match(/(RIM\sTablet\sOS)\s([\d.]+)/),v=t.match(/PlayBook/),g=t.match(/Chrome\/([\d.]+)/)||t.match(/CriOS\/([\d.]+)/),m=t.match(/Firefox\/([\d.]+)/);(n.webkit=!!i)&&(n.version=i[1]),o&&(e.android=!0,e.version=o[3]),a&&(e.android=!0,e.version="N"),s&&(e.ios=e.iphone=!0,e.version=s[2].replace(/_/g,".")),r&&(e.ios=e.ipad=!0,e.version=r[2].replace(/_/g,".")),l&&(e.webos=!0,e.version=l[2]),d&&(e.touchpad=!0),u&&(e.blackberry=!0,e.version=u[2]),f&&(e.bb10=!0,e.version=f[2]),h&&(e.rimtabletos=!0,e.version=h[2]),v&&(n.playbook=!0),c&&(e.kindle=!0,e.version=c[1]),p&&(n.silk=!0,n.version=p[1]),!p&&e.android&&t.match(/Kindle Fire/)&&(n.silk=!0),g&&(n.chrome=!0,n.version=g[1]),m&&(n.firefox=!0,n.version=m[1]),e.tablet=!!(r||v||o&&!t.match(/Mobile/)||m&&t.match(/Tablet/)),e.phone=!(e.tablet||!(o||s||l||u||f||g&&t.match(/Android/)||g&&t.match(/CriOS\/([\d.]+)/)||m&&t.match(/Mobile/)))
}e.call(t,navigator.userAgent)}(tvp.$),function(t){function e(e){var n=e.match(/MQQBrowser\/(\d+\.\d+)/i),i=e.match(/QQ\/(\d+\.(\d+)\.(\d+)\.(\d+))/i)||e.match(/V1_AND_SQ_([\d\.]+)/),o=e.match(/MicroMessenger\/((\d+)\.(\d+))\.(\d+)/)||e.match(/MicroMessenger\/((\d+)\.(\d+))/),a=e.match(/Mac\sOS\sX\s(\d+\_\d+)/),r=e.match(/Windows(\s+\w+)?\s+?(\d+\.\d+)/),s=e.match(/MiuiBrowser\/(\d+\.\d+)/i),l=e.match(/MI-ONE/),d=e.match(/MI PAD/),c=e.match(/UCBrowser\/(\d+\.\d+(\.\d+\.\d+)?)/)||e.match(/\sUC\s/),p=e.match(/IEMobile(\/|\s+)(\d+\.\d+)/)||e.match(/WPDesktop/),u=e.match(/(ipod).*\s([\d_]+)/i),f=e.match(/(ipad).*\s([\d_]+)/i),h=e.match(/(iphone)\sos\s([\d_]+)/i),v=e.match(/Chrome\/(\d+\.\d+)/),g=e.match(/qqnews\/(\d+\.\d+\.\d+)/i),m=e.match(/qnreading\/(\d+\.\d+\.\d+)/i),y=e.match(/LieBaoFast\/(\d+\.\d+\.\d+)/i),w=e.match(/com\.douban\.frodo\/(\d+\.\d+\.\d+)/i),_=e.match(/QQLiveBrowser\/(\d+\.\d+\.\d+)/i),b=e.match(/MIDP-([\d\.]+)/i),x=e.match(/Mozilla.*Linux.*Android.*AppleWebKit.*Mobile Safari/),$=e.match(/(android)\s([\d\.]+)/i);if(t.browser=t.browser||{},t.os=t.os||{},window.ActiveXObject){var I=6;(window.XMLHttpRequest||e.indexOf("MSIE 7.0")>-1)&&(I=7),(window.XDomainRequest||e.indexOf("Trident/4.0")>-1)&&(I=8),e.indexOf("Trident/5.0")>-1&&(I=9),e.indexOf("Trident/6.0")>-1&&(I=10),t.browser.ie=!0,t.browser.version=I}else e.indexOf("Trident/7.0")>-1&&(t.browser.ie=!0,t.browser.version=11);$&&(this.os.android=!0,this.os.version=$[2]),b&&(this.os.android=!0),u&&(this.os.ios=this.os.ipod=!0,this.os.version=u[2].replace(/_/g,".")),f&&(this.os.ios=this.os.ipad=!0,this.os.version=f[2].replace(/_/g,".")),h&&(this.os.iphone=this.os.ios=!0,this.os.version=h[2].replace(/_/g,".")),r&&(this.os.windows=!0,this.os.version=r[2]),a&&(this.os.Mac=!0,this.os.version=a[1]),e.indexOf("lepad_hls")>0&&(this.os.LePad=!0),d&&(this.os.MIPAD=!0),n&&(this.browser.MQQ=!0,this.browser.version=n[1]),i&&(this.browser.MQQClient=!0,this.browser.version=i[1]),o&&(this.browser.WeChat=!0,this.browser.version=o[1]),s&&(this.browser.MIUI=!0,this.browser.version=s[1]),c&&(this.browser.UC=!0,this.browser.version=c[1]||0/0),p&&(this.browser.IEMobile=!0,this.browser.version=p[2]),x&&(this.browser.AndriodBrowser=!0),l&&(this.browser.M1=!0),v&&(this.browser.Chrome=!0,this.browser.version=v[1]),g&&(this.browser.qqnews=!0,this.browser.version=g[1]),m&&(this.browser.kuaibao=!0,this.browser.version=m[1]),y&&(this.browser.liebao=!0,this.browser.version=y[1]),w&&(this.browser.douban=!0,this.browser.version=w[1]),_&&(this.browser.qqlive=!0,this.browser.version=_[1]),this.os.windows&&(this.os.win64="undefined"!=typeof navigator.platform&&"win64"==navigator.platform.toLowerCase()?!0:!1);var T={iPad7:"iPad; CPU OS 7",LePad:"lepad_hls",XiaoMi:"MI-ONE",SonyDTV:"SonyDTV",SamSung:"SAMSUNG",HTC:"HTC",VIVO:"vivo"};for(var S in T)this.os[S]=-1!==e.indexOf(T[S]);t.os.phone=t.os.phone||/windows phone/i.test(e),this.os.getNumVersion=function(){return parseFloat(t.os.version,"10")},this.os.hasTouch="ontouchstart"in window,this.os.hasTouch&&this.os.ios&&this.os.getNumVersion()<6&&(this.os.hasTouch=!1),t.browser.WeChat&&t.browser.version<5&&(this.os.hasTouch=!1),t.extend(t.browser,{getNumVersion:function(){return parseFloat(t.browser.version,"10")},isFFCanOcx:function(){return t.browser.firefox&&t.browser.getNumVersion()>=3?!0:!1},isCanOcx:function(){return!(!t.os.windows||!t.browser.ie&&!t.browser.isFFCanOcx()&&!t.browser.webkit)},isNotIESupport:function(){return!!t.os.windows&&(!!t.browser.webkit||t.browser.isFFCanOcx())}}),t.userAgent={},t.extend(t.userAgent,t.os),t.extend(t.userAgent,t.browser),t.userAgent.browserVersion=t.browser.version,t.userAgent.osVersion=t.os.version,delete t.userAgent.version}e.call(t,navigator.userAgent)}(tvp.$),function(t){var e={getByID:function(t){return document.getElementById(t)},noop:function(){},isString:function(e){return"string"===t.type(e)},isUndefined:function(e){return"undefined"===t.type(e)},now:function(){return(new Date).getTime()},getISOTimeFormat:function(){var t=new Date,e=t.getFullYear(),n=t.getMonth()+1,i=t.getDate(),o=t.getHours(),a=t.getMinutes(),r=t.getSeconds();return[[e,10>n?"0"+n:n,10>i?"0"+i:i].join("-"),[10>o?"0"+o:o,10>a?"0"+a:a,10>r?"0"+r:r].join(":")].join(" ")},formatSeconds:function(t){t=parseInt(t);var e=parseInt(t/60),n=e>=60?parseInt(e/60):0,i=t%60,o="";return e>=60&&(e%=60),n>0&&(o+=10>n?"0"+n:n,o+=":"),o+=10>e?"0"+e:e,o+=":",o+=10>i?"0"+i:i},formatSecondsWithText:function(t){var e=this.formatSeconds(t),n=e.split(":"),i="";switch(n.length){case 1:i=n[0]+"秒";break;case 2:i=n[0]+"分"+n[1]+"秒";break;case 3:i=n[0]+"小时"+n[1]+"分"+n[2]+"秒";break;default:i=e}return i},formatFileSize:function(t){return t=parseInt(t,10),t=t/1024/1024,t=t.toFixed(1),t+"M"},getHost:function(){var t=window.location.hostname||window.location.host,e=location.host.split(".");return e.length>1&&(t=e.slice(e.length-2).join(".")),t},getUrlParam:function(t,e){e=e||document.location.toString();var n=new RegExp("(^|&|\\\\?)"+t+"=([^&]*)(&|$|#)"),i=null;return i=e.match(n),i?i[2]:""},setUrlParam:function(t,e,n){n=n||location.href;var i,o,a=new RegExp("[\\?&#]"+t+"=([^&#]+)","gi"),r=n.match(a),s="{key"+(new Date).getTime()+"}";if(i=r&&r.length>0?r[r.length-1]:"",o=t+"="+e,i){var l=i.charAt(0);n=n.replace(i,s),n=n.replace(s,e?l+o:"")}else e&&(n+=n.indexOf("?")>-1?"&"+o:"?"+o);return n},filterXSS:function(e){return t.isString(e)?e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&apos;"):e},createGUID:function(t){t=t||32;for(var e="",n=1;t>=n;n++){var i=Math.floor(16*Math.random()).toString(16);e+=i}return e},newGuid:function(){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return[t(),t(),t(),t(),t(),t(),t(),t()].join("")},formatSize:function(t){var e=""+t;return e.indexOf("%")>0?e:e.indexOf("px")>0?e:/^\d+$/.test(e)?e+"px":e},compareVersion:function(t,e){t=String(t).split("."),e=String(e).split(".");try{for(var n=0,i=Math.max(t.length,e.length);i>n;n++){var o=isFinite(t[n])&&Number(t[n])||0,a=isFinite(e[n])&&Number(e[n])||0;if(a>o)return-1;if(o>a)return 1}}catch(r){return-1}return 0},isTrue:function(t){return!!tvp.$.filterXSS(t)},loadPluginCss:function(e){var n="",i=tvp.defaultConfig.pluginCssUrl;return e in i&&(n=tvp.defaultConfig.cssPath+i[e]),t.loadCss(n)},getData:function(t){var e;if(window.localStorage)try{e=window.localStorage[t]}catch(n){}return e},setData:function(t,e){if(window.localStorage){try{window.localStorage[t]=e}catch(n){}return!0}},delData:function(t){if(window.localStorage){try{window.localStorage.removeItem(t)}catch(e){}return!0}},formatTpl:function(e,n){if(e&&"object"===t.type(n)){for(var i in n)for(var o="${"+i+"}";e.indexOf(o)>-1;)e=e.replace(o,n[i]);return e}},loadCss:function(e){var n=t.Deferred(),i=!1;if(e){for(;e.indexOf("../")>=0;)e=e.replace("../","");e=t.filterXSS(e);var o=document,a=o.getElementsByTagName("head")[0]||o.documentElement,r=a.getElementsByTagName("base")[0],s=o.createElement("link");s.rel="stylesheet",s.href=e,s.onload=s.onerror=function(){s.onload=s.onerror=null,i=!0,n.resolve()},setTimeout(function(){i||n.resolve()},2500),r?a.insertBefore(s,r):a.appendChild(s)}else n.reject();return n}};t.extend(t,e)}(tvp.$),function(t){t.cookie={set:function(t,e,n,i,o){if(o){var a=new Date,r=new Date;r.setTime(a.getTime()+36e5*o)}return document.cookie=t+"="+e+"; "+(o?"expires="+r.toGMTString()+"; ":"")+(i?"path="+i+"; ":"path=/; ")+(n?"domain="+n+";":"domain="+window.location.host+";"),!0},get:function(t){var e=new RegExp("(?:^|;+|\\s+)"+t+"=([^;]*)"),n=document.cookie.match(e);return n?n[1]:""},del:function(t,e,n){var i=new Date;i.setTime(i.getTime()-1),document.cookie=t+"=; expires="+i.toGMTString()+";"+(n?"path="+n+"; ":"path=/; ")+(e?"domain="+e+";":"domain="+window.location.host+";")}}}(tvp.$),tvp=tvp||{},tvp.common={isUseHtml5:function(){var t=navigator.userAgent,e=null;if(/ipad|ipod|iphone|lepad_hls|IEMobile|WPDesktop/gi.test(t))return!0;if(tvp.$.os.android){if(tvp.common.isSupportMP4())return!0;if(tvp.$.browser.MQQ&&tvp.$.browser.getNumVersion()>=4.2)return!0;if(-1!=t.indexOf("MI2"))return!0;if(tvp.$.os.version>="4"&&(e=t.match(/MicroMessenger\/((\d+)\.(\d+))\.(\d+)/))&&e[1]>=4.2)return!0;if(tvp.$.os.version>="4.1")return!0}return!1},isInUseH5:function(){var t=navigator.userAgent,e=null;if(tvp.$.os.android){if(tvp.$.browser.MQQ&&tvp.$.browser.getNumVersion()>=4.2)return!0;if(-1!=t.indexOf("MI2"))return!0;if(tvp.$.os.version>="4"&&(e=t.match(/MicroMessenger\/((\d+)\.(\d+))\.(\d+)/))&&e[1]>=4.2)return!0;if(tvp.$.os.version>="4.1")return!0}},isUseHLS:function(){return tvp.$.os.ios?!0:void 0},isMac:function(){var t=/Macintosh/gi.test(navigator.userAgent);return t},isLiveUseHTML5:function(){return tvp.$.os.ios?!0:tvp.$.os.ipad?!0:tvp.$.os.android&&tvp.common.isSupportM3u8()?!0:!1},isSupportM3u8:function(){var t=document.createElement("video"),e=["application/x-mpegURL","audio/mpegurl","vnd.apple.mpegURL","application/vnd.apple.mpegURL"],n=!1;return"function"==typeof t.canPlayType&&tvp.$.each(e,function(e,i){return t.canPlayType(i)?void(n=!0):void 0}),t=null,tvp.$.os.android&&(tvp.$.os.version>="4"&&tvp.$.browser.Chrome&&(n=!0),tvp.$.browser.M1&&(n=!1),/V8 Build/.test(navigator.userAgent)&&(n=!1),tvp.$.browser.MQQ&&tvp.$.browser.getNumVersion()>=4.2&&(n=!0)),n},isSupportMP4:function(){var t=document.createElement("video");if("function"==typeof t.canPlayType){if("probably"==t.canPlayType('video/mp4; codecs="mp4v.20.8"'))return!0;if("probably"==t.canPlayType('video/mp4; codecs="avc1.42E01E"')||"probably"==t.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"'))return!0}return!1},isSupportSVG:function(){return document.implementation&&tvp.$.isFunction(document.implementation.hasFeature)?document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"):!1},isEnforceMP4:function(){if(tvp.$.os.android){if(tvp.$.browser.firefox)return!0;if(tvp.$.browser.chrome)return!1;if(tvp.$.os.version>="4.0"&&tvp.$.browser.MQQ&&tvp.$.browser.version<"4.0")return!0}return!1},getUin:function(t){var e=tvp.$.cookie.get("skey"),n=tvp.$.cookie.get("lskey"),i="",o=0,a=!1;return"undefined"==typeof isLeak&&"undefined"!=typeof t&&(isLeak=t),isLeak="undefined"==typeof isLeak?!1:!0,a=!!isLeak&&""!=n,a||""!=e?(i=tvp.$.cookie.get("uin"),""==i&&a&&(i=tvp.$.cookie.get("luin")),o=parseInt(i.replace(/^o0*/g,""),10),isNaN(o)||1e4>=o?0:o):0},getSKey:function(t){var e=tvp.$.cookie.get("skey"),n=tvp.$.cookie.get("lskey"),i="";return i=t?""!=e&&""!=n?e:e||n:e},getToken:function(t){var e=this.getSKey(t),n=this.time33(e);return n},time33:function(t){for(var e=0,n=t.length,i=5381;n>e;++e)i+=(i<<5)+t.charAt(e).charCodeAt();return 2147483647&i},openLogin:function(){},getVideoSnap:function(t,e){var n,i,o=1e8;if(t.indexOf("_")>0){var a=t.split("_");t=a[0],e=parseInt(a[1])}for(var r=4294967296,s=0,l=0;l<t.length;l++){var d=t.charCodeAt(l);s=32*s+s+d,s>=r&&(s%=r)}return i=s%o,void 0==e&&(e=0),n=0==e?["http://vpic.video.qq.com/",i,"/",t,"_160_90_3.jpg"].join(""):["http://vpic.video.qq.com/",i,"/",t,"_","160_90_",e,"_1.jpg"].join("")},getVideoSnapMobile:function(t,e){e=e||0;var n=["496_280"],i="http://shp.qpic.cn/qqvideo_ori/0/{vid}_{index}/0";return i.replace("{vid}",t).replace("{index}",n[e])},picerr:function(){},getDeviceId:function(){var t=tvp.DEVICE.other;return tvp.$.os.iphone?t=tvp.DEVICE.iphone:tvp.$.os.ipad?t=tvp.DEVICE.ipad:tvp.$.os.android&&tvp.$.os.phone&&(t=tvp.DEVICE.aphone),t},getPlatformId:function(){var t=tvp.PLATFORM.other;return tvp.$.browser.WeChat?t=tvp.PLATFORM.wechat:tvp.$.browser.MQQClient?t=tvp.PLATFORM.mqq:tvp.$.browser.MQQ&&(t=tvp.PLATFORM.qqbrowser),t},getParams:function(t){for(var e,n,i=t.indexOf("?"),o=t.substring(i+1),a=/\w+=[^&]+/g,r={};null!==(e=a.exec(o));)n=e[0].split("="),n.length>=2&&(r[n.shift()]=n.join("="));return r},recomdTextById:function(t){if(t){if(this.recomdText||(this.recomdText={}),this.recomdText[t]&&"string"==typeof this.recomdText[t])return this.recomdText[t];var e,n=tvp.$.Deferred(),i=this,o=50;return o=0,o&&100*Math.random()>o?(n.resolve(),n):(e=tvp.common.get_request_url("like")+"?callback=?",tvp.$.ajax({url:e,dataType:"jsonp",jsonpCallback:"tvp_request_like_callback_"+parseInt(1e6*Math.random()),data:{id:t,uin:0,playright:7,msgtype:103,otype:"json",tablist:9}}).done(function(e){e&&e.rmdword?(i.recomdText[t]=e,n.resolve()):n.resolve()}).fail(function(){n.resolve()}),setTimeout(function(){n.resolve()},5e3),n)}},get_hostname_fromUrl:function(t){if(t){var e=document.createElement("a");return e.href=t,e.hostname}},get_css_path:function(){return"//imgcache.qq.com/tencentvideo_v1/vstyle/mobile/v2/style/"},get_js_path:function(){return"//imgcache.qq.com/tencentvideo_v1/tvp/"},get_request_url:function(t){var e={getinfo:["http://h5vv.video.qq.com/getinfo","https://sec.video.qq.com/p/h5vv.video/getinfo"],edugetvinfo:["http://sv.video.qq.com/edugetvinfo","https://sec.video.qq.com/p/sv.video/edugetvinfo"],mvgetinfo:["http://sv.video.qq.com/mvgetinfo","https://sec.video.qq.com/p/sv.video/mvgetinfo"],getinfoInews:["http://h5wx.video.qq.com/getinfo?callback=?&","https://sec.video.qq.com/p/h5wx.video/getinfo?callback=?&"],getvinfo:["http://h5vv.video.qq.com/getvinfo","https://sec.video.qq.com/p/h5vv.video/getvinfo"],getkey:["http://h5vv.video.qq.com/getkey","https://sec.video.qq.com/p/h5vv.video/getkey"],mvgetkey:["http://sv.video.qq.com/mvgetkey","https://sec.video.qq.com/p/sv.video/mvgetkey"],getkeyInews:["http://h5wx.video.qq.com/getkey?callback=?&","https://sec.video.qq.com/p/h5wx.video/getkey?callback=?&"],limit_conf:["http://v.qq.com/iframe/limit_conf.js","https://v.qq.com/iframe/limit_conf.js"],zb:["http://info.zb.video.qq.com","https://sec.video.qq.com/p/info.zb/video/"],swf_root:["http://imgcache.qq.com/tencentvideo_v1/player/","https://imgcache.qq.com/tencentvideo_v1/player/"],rmd_mobile:["http://like.video.qq.com/fcgi-bin/rmd_mobile","https://sec.video.qq.com/p/like.video/fcgi-bin/rmd_mobile"],like:["http://like.video.qq.com/fcgi-bin/like","https://sec.video.qq.com/p/like.video/fcgi-bin/like"],dataout_ex:["http://sns.video.qq.com/fcgi-bin/dlib/dataout_ex","https://sec.video.qq.com/p/sns.video/fcgi-bin/dlib/dataout_ex"],get_dtype:["http://h5vv.video.qq.com/getdtype","https://sec.video.qq.com/p/h5vv.video/getdtype"]};return"https:"===window.location.protocol?e[t][1]:e[t][0]},get_chid:function(){var t="";return/(.*\.)3g\.qq\.com$/i.test(document.location.hostname)?t=13:tvp.$.browser.qqlive?t=0:/(.*\.)?v\.qq\.com$/i.test(document.location.hostname)?t=0:tvp.$.browser.WeChat?t=3:tvp.$.browser.MQQClient?t=10:tvp.$.browser.qqnews&&(t=2),t},get_stdfrom:function(){var t="view.inews.qq.com"===location.host,e=tvp.$;return e.os.iphone||e.os.ipod?t?"v3110":"v3010":e.os.ipad?t?"v4110":"v4010":e.os.android?e.os.tablet?"v6010":t?"v5110":"v5010":e.browser.IEMobile?"v7010":"v1010"},get_platform:function(){var t=tvp.$;return t.os.iphone?1:t.os.ipad?2:t.os.android?3:4},is_mqq_buluo:function(){return!tvp.$.browser.MQQClient||"xiaoqu.qq.com"!==window.location.hostname&&"buluo.qq.com"!==window.location.hostname?!1:!0},getPageType:function(){return tvp.app?tvp.app.pageType:tvp.$.browser.WeChat?1:tvp.$.browser.MQQClient?2:tvp.$.browser.MQQ?3:0},getPosition:function(t){for(var e=t.offsetLeft,n=t.offsetTop,i=t.offsetParent;null!==i;)e+=i.offsetLeft,n+=i.offsetTop,i=i.offsetParent;return{x:e,y:n}},afterWeChatReady:function(t){function e(){n.resolve()}var n=tvp.$.Deferred(),i=t.timeout||5e3;return tvp.$.browser.WeChat?"undefined"!=typeof WeixinJSBridge&&WeixinJSBridge.on?e():(document.addEventListener("WeixinJSBridgeReady",function(){e()}),setTimeout(function(){e()},i)):e(),n}},tvp.version=function(){function t(t){if(e(t))return t;if(/\d+/i.test(t)){var n=parseInt(t/1e4/100,10),i=parseInt(t/1e4,10)-100*n,o=parseInt(t,10)-(100*n*1e4+1e4*i),a=n+"."+i+"."+o;return a}return t}function e(t){return/^(\d+\.){2}\d+(\.\d+)?$/.test(t)}var n,i="0.0.0.0",o="0.0.0",a=new Image,r=!1,s=!1;return"film.qq.com"==document.location.host&&(s=!0),{getOcx:function(e){if(tvp.$.isUndefined(e)&&(e=!0),e&&"0.0.0.0"!=i)return i;var o;if(tvp.$.browser.ie)try{o="IE begin",n=new ActiveXObject(QQLive.config.PROGID_QQLIVE_INSTALLER),"undefined"!=typeof n.getVersion?(i=n.GetVersionByClsid(QQLive.config.OCX_CLSID),o="get actObj.GetVersionByClsid:"+i):o="no function:actObj.GetVersionByClsid"}catch(l){s&&!r&&(r=!0)&&(a.src="http://btrace.video.qq.com/collect?sIp=&iQQ="+tvp.common.getUin()+"&sBiz=IE&sOp="+encodeURIComponent(navigator.userAgent)+"&iSta=0&iTy=2432&iFlow=&sUrl="+encodeURIComponent(location.toString())+"&sRef="+encodeURIComponent(document.referrer)+"&sMsg="+encodeURIComponent(l.message)+"&sStep="+encodeURIComponent(o)+"&_="+Math.random())}else if(tvp.$.browser.isNotIESupport()){o="no IE begin";var d,c=navigator.plugins;if(tvp.$.isUndefined(c.namedItem)||(o="plugs.namedItem",d=c.namedItem("腾讯视频")),!d){o="no plugs.namedItem:tencentvideo";for(var p=0,u=c.length;u>p;p++)if(c[p]&&"腾讯视频"==c[p].name||"npQQLive.dll"==c[p].filename){d=c[p];break}}if(d)if(tvp.$.isUndefined(d.version)){o="plug.description:"+d.description;var f,h=d.description;f=h.match(/version:((\d+\.){3}(\d+)?)/),f&&(i=f[1])}else o="plug.version:"+d.version,i=d.version;else o="no plugs[i].filename:npQQLive.dll"}return parseInt(i,10)||s&&!r&&(r=!0)&&(a.src="http://btrace.video.qq.com/collect?sIp=&iQQ="+tvp.common.getUin()+"&sBiz="+(tvp.$.browser.ie?"IE":"NOIE")+"&sOp="+encodeURIComponent(navigator.userAgent)+"&iSta=0&iTy=2432&iFlow=&sUrl="+encodeURIComponent(location.toString())+"&sRef="+encodeURIComponent(document.referrer)+"&sMsg="+i+"&sStep="+encodeURIComponent(o)+"&_="+Math.random()),i=t(i)},getFlash:function(){if("0.0.0"!=o)return o;var t,e=null,n=null,i=[],l="Shockwave Flash",d=navigator,c="application/x-shockwave-flash";if(tvp.$.browser.ie)try{t="IE begin",e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),t="new ActiveXObject",e&&(n=e.GetVariable("$version"),t="swf.GetVariable",n&&(n=n.split(" ")[1].split(","),i=[parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10)]))}catch(p){s&&!r&&(r=!0)&&(a.src="http://btrace.video.qq.com/collect?sIp=&iQQ="+tvp.common.getUin()+"&sBiz=IE&sOp="+encodeURIComponent(navigator.userAgent)+"&iSta=1&iTy=2432&iFlow=&sUrl="+encodeURIComponent(location.toString())+"&sRef="+encodeURIComponent(document.referrer)+"&sMsg="+encodeURIComponent(p.message)+"&sStep="+encodeURIComponent(t)+"&_="+Math.random())}else tvp.$.isUndefined(d.plugins)||"object"!=typeof d.plugins[l]||(t="no IE begin",n=d.plugins[l].description,t="plugins[S].description",n&&(tvp.$.isUndefined(d.mimeTypes)||!d.mimeTypes[c]||d.mimeTypes[c].enabledPlugin)?(t="parse description",n=n.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),i[0]=parseInt(n.replace(/^(.*)\..*$/,"$1"),10),i[1]=parseInt(n.replace(/^.*\.(.*)\s.*$/,"$1"),10),i[2]=/[a-zA-Z]/.test(n)?parseInt(n.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0):t="no mimeTypes or disable");return o=i.join("."),parseInt(o,10)||s&&!r&&(r=!0)&&(a.src="http://btrace.video.qq.com/collect?sIp=&iQQ="+tvp.common.getUin()+"&sBiz="+(tvp.$.browser.ie?"IE":"NOIE")+"&sOp="+encodeURIComponent(navigator.userAgent)+"&iSta=1&iTy=2432&iFlow=&sUrl="+encodeURIComponent(location.toString())+"&sRef="+encodeURIComponent(document.referrer)+"&sMsg="+o+"&sStep="+encodeURIComponent(t)+"&_="+Math.random()),o},getFlashMain:function(){return parseInt(tvp.version.getFlash().split(".")[0],10)}}}(),function(t,e){var n={qqlive:{text1:"腾讯视频客户端",text2:"可观看更多视频",md5Cgi:"http://mcgi.v.qq.com/commdatav2?cmd=39&otype=json&confid=${id}",md5Cgi_https:"https://sec.video.qq.com/p/mcgi.v/commdatav2?cmd=39&otype=json&confid=${id}",payUrl:"http://film.qq.com/weixin/detail/${index}/${cid}.html",scheme:"tenvideo2://",logoClass:"",openUrl:"tenvideo2://?action=5&video_id=${vid}",liveOpenUrl:"tenvideo2://?action=8&channel_id=${lid}",ipadDownloadUrl:"https://itunes.apple.com/cn/app/teng-xun-shi-pinhd/id407925512?mt=8",iphoneDownloadUrl:"http://itunes.apple.com/cn/app/id458318329?mt=8",aphoneDownloadUrl:"http://mcgi.v.qq.com/commdatav2?cmd=4&confid=140&platform=aphone",VIA:"ANDROIDQQ.QQLIVE",appId:"100730521",downloadId:"TencentVideo",taskName:"TencentVideo",packageName:e.os.iphone?"com.tencent.live4iphone":"com.tencent.qqlive",packageUrl:"tenvideo2://can_open_me_if_install_and_regeister_this_scheme"},weishi:{text1:"微视客户端",text2:"发现更多精彩",logoClass:"tvp_download_app_solo_weishi",md5Cgi:"http://www.weishi.com/api/packdata.php?confid=${id}",scheme:e.os.iphone?" weishiiosscheme://":"weishiandroidscheme://",openUrl:e.os.iphone?" weishiiosscheme://detail?tweetid=${id}":"weishiandroidscheme://detail?tweetid=${id}",iphoneDownloadUrl:"http://www.weishi.com/download/index.php?pgv_ref=weishi.shipin.xinwenfenxiang",aphoneDownloadUrl:"http://www.weishi.com/download/index.php?pgv_ref=weishi.shipin.xinwenfenxiang",ipadDownloadUrl:"",VIA:"ANDROIDQQ.WEISHI",appId:"1101083114",downloadId:"TencentWeishi",taskName:"TencentWeishi",packageName:e.os.iphone?"com.tencent.microvision":"com.tencent.weishi",packageUrl:e.os.iphone?"weishiiosscheme://can_open_me_if_install_and_regeister_this_scheme":"weishiandroidscheme://can_open_me_if_install_and_regeister_this_scheme"},yyb:{packageName:"com.tencent.android.qqdownloader"}};t.app={config:{defaultName:"qqlive",QQApiUrl:"http://pub.idqqimg.com/qqmobile/qqapi.js",mqqApiUrl:"//res.imtt.qq.com/browser_lightapp/QQBrowserApi/getCryptext/browser_interface_getCryptext.js"},loadQQClientDefer:!1,loadDownloaderDefer:!1,loadMqqDefer:!1,getDownloadUrl:function(i,o){return o=o||t.app.config.defaultName,i=e.os.iphone?n[o].iphoneDownloadUrl:i||n[o].aphoneDownloadUrl,i=e.os.ipad?n[o].ipadDownloadUrl:i},getPayUrl:function(t){var i=e.formatTpl(n.qqlive.payUrl,{index:t.slice(0,1),cid:t});return i},getOpenUrl:function(i){var o={},a=!1;if(!i)return a;if(i.appName&&i.appName!==t.app.config.defaultName)return a=i.openId?n[i.appName].openUrl.replace("${id}",i.openId):n[i.appName].scheme;switch(i.lid?o.channel_id=i.lid:i.cid?o.cover_id=i.cid:i.tid?o.topic_id=i.tid:i.vidArray||!i.vid?o.video_id="${vid}":i.vid&&(o.video_id=i.vid),i.vid2&&(o.video_id=i.vid2),i.openType){case 6:i.cid&&(o.action=1);break;case 2:o.action=i.lid?8:7;break;case 3:o.action=i.lid?8:i.tid?6:5;break;case 4:i.cid&&(o.action=1);break;default:o.action=i.lid?8:i.cid?1:5}if(i.promotionId&&(o.from=i.promotionId+"_"+(i.contentId?i.contentId:"")),o.action=o.action||5,a=n.qqlive.scheme+"?"+decodeURIComponent(e.param(o)),(i.cid||i.h5Url)&&parseInt(i.pay)){var r=i.cid?t.app.getPayUrl(i.cid):i.h5Url;e.os.iphone?(a=r,i.openUrl=a):i.version&&parseInt(i.version)<5852&&(a=r)}return a!==r&&i.openUrl&&(a=e.filterXSS(i.openUrl),a.indexOf("from")<0&&a.indexOf("?")>-1&&i.promotionId&&(a+="&from="+i.promotionId+"_"+(i.contentId?i.contentId:""))),a},getPackageInfo:function(){return n},pageType:function(){return e.browser.WeChat?1:e.browser.MQQClient?2:e.browser.MQQ?3:0}(),isSupportApp:function(){return e.os.iphone||e.os.ipod||e.os.ipad?!0:e.os.android?!0:!1}(),unbindTryOpenAppBanner:function(t){t?t.noTryOpen=!0:""},bindTryOpenAppBanner:function(n){if(n&&!([2,3].indexOf(t.app.pageType)>-1||1===t.app.pageType&&(window!==top&&top.location.href||window===top))){var i=t.$.os.hasTouch?"touchend":"click",o=n.$btn,a=o.attr("data-url"),r=!1,s=function(){var e=navigator.userAgent;return t.$.os.android||t.$.os.ios?-1!=e.indexOf("qqnews/")?!1:t.$.os.android&&r?!1:/^http|https/g.test(a)?!1:!0:!1};if(!s())return!1;o.bind("touchend click",function(t){n.noTryOpen||t.preventDefault()});var l=!1;o.bind("touchstart",function(){l=!1}).bind("touchmove",function(){l=!0}),o.bind(i,function(i){if(i.preventDefault(),!l){var o,a=i.target;o="a"===a.tagName.toLowerCase()?e(a):e(a).parents("a"),n.noTryOpen||t.app.tryOpenAppBanner(o)}})}},tryOpenAppBanner:function(e){if(e.length){var n=e.attr("href"),i=e.attr("data-url"),o=function(){location.href=n},a=function(){if(t.$.os.ios&&t.$.compareVersion(t.$.os.version,"9.0")>-1)try{window.location.href=i}catch(e){}else{var e=document.createElement("iframe");e.style.cssText="width:1px;height:1px;position:fixed;top:0;left:0;opacity:0;",e.src=i,document.body.appendChild(e)}};a();var r=(new Date).valueOf();setTimeout(function(){var t=(new Date).valueOf();1550>t-r&&o()},1500)}},loadMqqAPI:function(){if(t.app.loadMqqDefer)return t.app.loadMqqDefer;var n=e.Deferred();if(t.app.loadMqqDefer=n,window.x5)n.resolve();else{var i=this.config.mqqApiUrl;e.getScript(i,function(){window.x5?n.resolve():n.reject()})}return setTimeout(function(){n.reject()},5e3),n},invokeQQBrowserAPI:function(n){function i(){if(window.x5&&x5.ios&&x5.ios.getMobileAppSupport){var t={scheme:n.packageInfo.packageUrl};x5.ios.getMobileAppSupport(t,function(t){o.resolve(t&&1==t.isSupportApp?1:0)},function(){o.resolve(0)})}else o.resolve(0);setTimeout(function(){o.resolve(0)},300)}if(!e.os.iphone&&window.QQApi&&QQApi.checkAppInstalled)return this.invokeQQClientAPI(n);var o=e.Deferred();if(!e.os.iphone&&window.x5mtt&&window.x5mtt.isApkInstalled){var a=window.x5mtt.isApkInstalled('{"packagename": '+n.packageInfo.packageName+"}");o.resolve(-1!=a?1:0)}else e.os.iphone&&parseInt(e.os.version)>5?t.app.loadMqqAPI().done(function(){i()}).fail(function(){o.resolve(0)}):o.resolve(0);return setTimeout(function(){o.resolve(0)},3e3),o},getQQBrowserSignKey:function(n,i){var o=t.app,a=o.pageType,r=new e.Deferred,s=this.loadMqqAPI();return 3!=a?void r.resolve(0):(s.done(function(){if(!window.x5||!t.$.os.ios)return void r.resolve(0);if(!x5.ios||!x5.ios.getBrowserSignature)return void r.resolve(0);var e={vid:n};i&&(e.timestamp=parseInt((new Date).valueOf()/1e3)),x5.ios.getBrowserSignature(e,function(t){r.resolve(t&&t.key&&t.ver&&t.platform?{key:t.key,ver:t.ver,platform:t.platform}:0)},function(){r.resolve(0)})}),s.fail(function(){r.resolve(0)}),r)},mqqBuoLuoAuth:function(t){var n,i=e.Deferred();try{window.getBrowserSignature(t,function(t){if(t&&t.data)try{var e=JSON.parse(t.data);e&&e.result&&e.result.token&&(n=e.result.token)}catch(o){}i.resolve(n)}),setTimeout(function(){i.reject()},5e3)}catch(o){i.reject()}return i},kuaiBaoAppAuth:function(t,n){var i=e.Deferred(),o="undefined"!=typeof n?n+"":parseInt(+new Date/1e3)+"",a="TVP_KUAIBAO_CB_"+o.substr(-4,4);window[a]=function(t){var e;try{e=JSON.parse(t)}catch(n){}i.resolve(e)};var r=function(){var e={method:"getCKey",types:["string","string","string"],args:[t,o,a],instanceName:"TencentNewsScriptControllerJsInterface"},n="jsbridge://get_with_json_data?json="+encodeURIComponent(JSON.stringify(e))+"&_t="+o,i=new Image;i.src=n},s=function(){var e=function(){window.getBrowserSignature(t,o,a)};"function"==typeof window.getBrowserSignature?e():document.addEventListener("TencentNewsJSInjectionComplete",function(){e()})};return e.os.ios?s():e.os.android&&r(),setTimeout(function(){i.reject()},1e4),i},loadQQClientAPI:function(){if(t.app.loadQQClientDefer)return t.app.loadQQClientDefer;var n=e.Deferred();if(t.app.loadQQClientDefer=n,window.mqq||window.QQApi)n.resolve();else{var i=this.config.QQApiUrl;e.getScript(i,function(){n.resolve()})}return setTimeout(function(){n.reject()},3e3),n},invokeQQClientAPI:function(t){function n(){!o&&window.QQApi&&QQApi.checkAppInstalled?QQApi.checkAppInstalled(a,function(t){t&&0!=t?(t=t.split("."),t=t[t.length-1],i.resolve(1,t)):i.resolve(0)}):window.mqq&&mqq.app&&mqq.app.isAppInstalled?mqq.app.isAppInstalled(a,function(t){i.resolve(t?1:0)}):i.resolve(0)}var i=e.Deferred(),o=e.os.iphone,a=o?t.packageInfo.packageUrl:t.packageInfo.packageName;return this.loadQQClientAPI().done(function(){n()}).fail(function(){i.resolve(0)}),setTimeout(function(){i.resolve(0)},5e3),i},getAppMd5:function(i,o){i=i||140,o=o||t.app.config.defaultName;var a,r=e.Deferred();a="https:"===window.location.protocol?n[o].md5Cgi_https:n[o].md5Cgi;var s=a.replace("${id}",i);return e.ajax({url:s,dataType:"jsonp",jsonpCallback:"tvp_request_getmd5_callback_"+parseInt(1e6*Math.random())}).then(function(t){r.resolve(t&&t.data?t.data:t)}),r},report:function(n,i){var o={};i=i&&i.curVideo?i:!1,i&&(o={vid:i.curVideo.getVid()||i.curVideo.getChannelId(),appId:i.config.appid||i.config.appId,contentId:i.config.contentId}),n&&(n=e.extend(n,o),t.report(n),3537===n.cmd&&t.bossReport&&t.bossReport.appReportShowClick&&t.bossReport.appReportShowClick(n,i))},invokeWeChatAPI:function(t){var n=e.Deferred(),i=this;return window!=top&&(WeixinJSBridge=top.WeixinJSBridge),WeixinJSBridge.invoke||n.resolve(0),i.getNetworkTypeInWechat().done(function(e){t&&t.t&&t.t.config&&(t.t.config.nettype=e)}),e.os.iphone?WeixinJSBridge.invoke("getInstallState",t.packageInfo,function(t){var e=t.err_msg;n.resolve(e.indexOf("get_install_state:yes")>-1?1:0)}):WeixinJSBridge.invoke("getInstallState",t.packageInfo,function(t){var e=t.err_msg;if(e.indexOf("get_install_state:yes")>-1){var i=e.split("yes_"),o=0;i.length>=2&&(o=parseInt(i[1],10)),o=isNaN(o)?0:o,n.resolve(1,o)}else n.resolve(0)}),setTimeout(function(){n.resolve(0)},6e3),n},getNetworkTypeInWechat:function(){var t=e.Deferred();return WeixinJSBridge.invoke("getNetworkType",{},function(e){var n=-1;e&&e.err_msg&&("network_type:fail"===e.err_msg&&(n=0),"network_type:wifi"===e.err_msg&&(n=1),"network_type:edge"===e.err_msg&&(n=2),"network_type:wwan"===e.err_msg&&(n=3)),t.resolve(n)}),t},check:function(i){var o=t.app,a=o.pageType,r=e.Deferred();if(i=i||{},i.appName=i.appName||t.app.config.defaultName,i.packageInfo=n[i.appName],1==a){var s=window==top?document:top.document;if(top.WeixinJSBridge)o.invokeWeChatAPI(i).then(function(t,e){r.resolve(o.buildResult(t,i,e))});else try{s.addEventListener("WeixinJSBridgeReady",function(){o.invokeWeChatAPI(i).then(function(t,e){r.resolve(o.buildResult(t,i,e))})})}catch(l){r.resolve(o.buildResult(0,i))}}else if(3==a)try{o.invokeQQBrowserAPI(i).then(function(t,e){r.resolve(o.buildResult(t,i,e))})}catch(l){r.resolve(o.buildResult(0,i))}else if(2==a)try{o.invokeQQClientAPI(i).then(function(t,e){r.resolve(o.buildResult(t,i,e))})}catch(l){r.resolve(o.buildResult(0,i))}else r.resolve(o.buildResult(0,i));return r},createDownloader:function(e){this.loadDownloaderAPI().done(function(){new t.AppDownloader(e)})},loadDownloaderAPI:function(){if(t.app.loadDownloaderDefer)return t.app.loadDownloaderDefer;var n=e.Deferred();t.app.loadDownloaderDefer=n;var i="";return 1==this.pageType&&(i=t.defaultConfig.libpath+t.defaultConfig.pluginUrl.AppDownloadClickWechat),2==this.pageType&&(i=t.defaultConfig.libpath+t.defaultConfig.pluginUrl.AppDownloadClickMqq),i||n.reject(),e.downloadClick_wechat||e.downloadClick_mqq?n.resolve():(e.getScript(i,function(){n.resolve()}),setTimeout(function(){n.reject()},3e3)),n},checkCanDownloader:function(t,n,i){function o(){e.downloadClick_wechat&&i&&e.downloadClick_wechat(i),e.downloadClick_mqq&&i&&e.downloadClick_mqq(i),a.resolve(1)}var a=e.Deferred();if(e.os.iphone||e.os.ipad||!n||1==t)return a.resolve(0),a;var r=!1,s=!1,l=/android/i.test(navigator.userAgent.toLowerCase());return!l||1==t||!n.downloader||n.downloadUrl&&!n.md5||!n.downloadUrl&&n.md5?(a.resolve(0),a):(e.isArray(n.range)&&e.each(n.range,function(t,e){1==e&&(r=!0),2==e&&(s=!0)}),n.downloaderCallback||(r=!0,s=!0),e.browser.WeChat&&r||e.browser.MQQClient&&s?this.loadDownloaderAPI().done(function(){o()}).fail(function(){a.resolve(0)}):a.resolve(0),a)},buildResult:function(n,i,o){var a="",r=this.pageType,s=e.os.iphone;i.version=o;var l=t.app.getOpenUrl(i),d=this;return s&&!i.openUrl&&(1==r&&(l+="&callback=weixin%3A%2F%2F&sender=%e5%be%ae%e4%bf%a1"),2==r&&(l+="&callback=mqqapi%3A%2F%2F&sender=%E6%89%8B%E6%9C%BAQQ"),3==r&&(l+="&callback=mqqbrowser%3A%2F%2F&sender=QQ%E6%B5%8F%E8%A7%88%E5%99%A8")),a=1==n?l:e.os.iphone&&parseInt(i.pay)&&i.cid?t.app.getPayUrl(i.cid):d.getDownloadUrl(i.downloadUrl,i.appName),{hasApp:n,pageType:r,os:s,version:o,openUrl:l,liveOpenUrl:l,url:a}}}}(tvp,tvp.$),tvp.PLAYER_DEFINE={LIVE:1,VOD:2},tvp.defaultConfig={video:null,width:600,height:450,autoplay:!1,autoplayAfterLoadingad:!0,loadingadAutoplay:!1,isSkipLoadingAd:!1,skipLoadingAdTime:5,loadingadChid:"",skipLoadingAdText:"你可在{$sec}秒后关闭广告",skipLoadingAdCloseText:"关闭广告",adForbiddenTitle:"应版权方要求，好莱坞会员无法跳过该剧广告",adForbiddenText:"为了给腾讯视频用户提供更多优质美剧，应版权方(华纳)要求，好莱坞会员在观看华纳美剧时无法跳过广告（《吸血鬼日记》《破产姐妹》《无耻之徒》等）。我们会为会员用户继续争取免广告权益，请您继续支持，谢谢!",mute:!1,html5loop:!1,disableShortVideoPause:!1,volume:50,modId:"mod_player",playerid:"",coverId:"",typeId:0,pic:"",type:tvp.PLAYER_DEFINE.VOD,playerType:"auto",loadingswf:"",oid:"",share:!0,isHtml5UseHLS:"auto",isShowDurationLimit:!0,isHtml5AutoBuffer:!1,isHtml5UseAirPlay:!0,isHtml5ControlAlwaysShow:!1,html5Preload:"none",html5VodUIFeature:["controlbar","tips","title","meta","playpause","progress","timepanel","definition","volume","fullscreen","overlay","bigben","posterlayer","shadow","promotion","loadingAd","adonend","bullet","preview","verticalbullet"],html5LiveUIFeature:["controlbar","tips","playpause","fullscreen","overlay","posterlayer","shadow","bullet","loadingAd"],html5LiveFrontShow:["liveDownloader"],html5FeatureExtJS:{adonend:"//imgcache.qq.com/tencentvideo_v1/tvp/js/plugins/adonend.js?max_age=86400"},html5ForbiddenUIFeature:[],isHtml5UseUI:!0,HTML5CSSName:"",isHtml5ShowPosterOnStart:!0,isHtml5ShowPosterOnEnd:!1,isHtml5ShowPosterOnChange:!0,isiPhoneShowPosterOnPause:!1,isiPhoneShowPlaysinline:!0,isHtml5ShowPlayBtnOnPause:!0,isHtml5UseFakeFullScreen:!tvp.$.os.ios,isIOSVideoOffset:!0,isHtml5ShowLoadingAdOnStart:!tvp.$.os.phone,isHtml5ShowLoadingAdOnChange:!tvp.$.os.phone,isHtml5ShowLoadingAdOnReplay:!0,specialVideoFileDomain:"",flashWmode:"direct",vodFlashUrl:"",vodFlashType:"TPout",vodFlashExtVars:{},vodFlashListType:2,vodFlashSkin:"",isVodFlashShowCfg:!0,isVodFlashShowEnd:!0,isVodFlashShowSearchBar:!0,isVodFlashShowNextBtn:!0,liveFlashUrl:"",liveFlashSwfType:"TencentPlayerLive",isLiveFlashShowConfigBtn:!0,isLiveflashShowFullBtn:!0,isLiveFlashShowCfg:!0,liveFlashWatermark:"",liveFlashAppType:"",liveFlashExtVars:{},flashVersionTag:"20140714",ocxControlBar:"",ocxControlHeight:60,ocxSkin:"",isOcxShowPauseBtn:!1,isOcxHideControl:!1,plugins:{AppBanner:!1,AppRecommend:!1,AppDownloadOnPause:!1,AppBannerOnPause:!1,AppFollow:!1},pluginUrl:{AppBanner:"js/plugins/appbanner.js?v="+tvp.ts,AppFollow:"js/plugins/appfollow.js?v="+tvp.ts,AppRecommend:"js/plugins/apprecommend.js?v="+tvp.ts,AppRecommendBanner:"js/plugins/apprecommendbanner.js?v="+tvp.ts,AppDownloadOnPause:"js/plugins/appdownloadonpause.js?v="+tvp.ts,AppBannerOnPause:"js/plugins/appbanneronpause.js?v="+tvp.ts,AppDownloadClickWechat:"js/plugins/appdownloadclickwechat.js?v="+tvp.ts,AppDownloadClickMqq:"js/plugins/appdownloadclickmqq.js?v="+tvp.ts},cssPath:tvp.common.get_css_path(),pluginCssUrl:{},libpath:tvp.common.get_js_path(),noLimitBtn:!1,isContinuePlay:!0,h5VodBullet:!1,h5LiveBullet:!1,caseSetting:{},limitSetting:{downloader:!0},useLimitCase1UI:!0,definition:{fhd:"蓝光1080P",shd:"超清720P",hd:"高清480P",sd:"流畅270P"},isShortVideo:!1,longVideoID:"",useHtml5VerticalBullet:!1,verticalBulletID:"",flashFakeFullscreenZindex:9999,livepid:""},function(t){tvp=tvp||{},tvp.fastclick=function(e){var n=t(e),i={},o=t.os.hasTouch;
o&&(n.attr("data-fastclick",1),n.on("touchstart",function(t){t=o?t.touches[0]:t,i.start=+new Date,i.tar=t.target,i.x1=t.pageX,i.y1=t.pageY}).on("touchend",function(e){if(e.preventDefault(),e&&e.changedTouches&&e.changedTouches.length){e=e.changedTouches[0];var n,o,a;return i.end=+new Date,i.x2=e.pageX,i.y2=e.pageY,n=Math.abs(i.x2-i.x1),o=Math.abs(i.y2-i.y1),a=i.end-i.start,30>n&&30>o&&300>a?(t(i.tar).trigger("fastclick"),!1):void 0}}))}}(tvp.$),function(t){var e=function(t,n){return function(i,o){var a=/\s/.test(i)?function(t){var e,i=[n],o=[[]];for(e in t)i.push(e),o.push(t[e]);return new Function(i,a.$).apply(t,o).join("")}:t[i]=t[i]||e(document.getElementById(i).innerHTML);return a.$=a.$||n+".push('"+i.replace(/\\/g,"\\\\").replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join(n+".push('").split("\r").join("\\'")+"');return "+n,o?a(o):a}}({},"$"+ +new Date);t.tmpl=e}(tvp.$),function(t){"undefined"==typeof t.getScript&&(t.getScript=function(t,e){var n=document.createElement("script"),i=document.getElementsByTagName("head")[0],o=/^(?:loaded|complete|undefined)$/;n.async="async",n.src=t,n.charset="utf-8",e&&(n.onload=n.onerror=n.onreadystatechange=function(){o.test(n.readyState)&&(n.onload=n.onerror=n.onreadystatechange=null,window.DEBUG||i.removeChild(n),n=null,e())}),i.appendChild(n)})}(tvp.$),tvp.report=function(){function t(){return 0==s.length?(a=!0,void(r=null)):(clearTimeout(o),n(s.splice(0,1)),void(a=!1))}function e(t){return tvp.dataset.openLazy?t&&t.toLowerCase&&t.toLowerCase().indexOf("bossid=2865")>-1?!1:!0:(l&&l.length&&(s=l.concat(s),l=[]),!1)}function n(n){clearTimeout(o),n&&"array"===tvp.$.type(n)&&n.length&&(n=n[0]),e(n)?l.push(n):(r=document.createElement("img"),r.onerror=t,r.src=n),setTimeout(t,1e3)}function i(t){return t&&/^(?:ht|f)tp(?:s)?\:\/\/(?:[\w\-\.]+)\.\w+/i.test(t)?null==r?(n(t),void(a=!1)):a?(n(t),void(a=!1)):void s.push(t):void 0}var o,a=!0,r=null,s=[],l=[];return tvp.$.browser.WeChat?tvp.$(document).off("tvp:report:continue").on("tvp:report:continue",t):(tvp.dataset.openLazy=!1,t()),function(t){if(tvp.$.isString(t))return void i(t);if("object"==tvp.$.type(t)){var e,n={deviceId:"int1",platformId:"int2",appId:"int3",speed:"int4",contentId:"str1",fileName:"str2"},o={cmd:-1,url:window!=top?document.referrer:document.location.href,ver:tvp.ver.replace(/\$/g,""),ua:navigator.userAgent,int1:tvp.common.getDeviceId(),int2:tvp.common.getPlatformId(),int3:0,int4:0,str1:"",str2:tvp.filename},a="http://rcgi.video.qq.com/web_report?";for(e in n)e in t&&(t[n[e]]=t[e],delete t[e]);t=tvp.$.extend(o,t),a+=tvp.$.param(t),i(a)}}}(),tvp.ajax=function(t){function e(t,e){t=t||{},e=String(e);var n,i=/([\d\w_]+)/g;for(i.lastIndex=0;null!==(n=i.exec(e))&&(t=t[n[0]],void 0!==t&&null!==t););return t}function n(t){return t=t.slice(0,t.indexOf("?")),t=t.split("/"),{host:t[2],path:"/"+t.slice(3).join("/")}}function i(t,e,i,o){var a="http://c.isdspeed.qq.com/code.cgi",r=n(t);tvp.report(a,{domain:r.host,cgi:r.path,type:e,code:i,time:o})}function o(n,o){if("object"==t.type(n)&&n.url&&"string"==typeof n.url){"object"==typeof o&&(o=t.extend({key:"suc",value:0},o));var a=t.Deferred(),r=t.now(),s=0,l=t.extend({dataType:"jsonp"},n);return t.ajax(l).done(function(l){var d=l&&"object"==typeof o?e(l,o.key):0;s=t.now()-r,l&&"undefined"!=typeof d&&d==o.value?(i(n.url,1,d,s),a.resolve(l,s)):(i(n.url,3,d,s),a.resolve(l,s))}).fail(function(e){s=t.now()-r,i(n.url,2,900,s),a.reject(e,s)}),a}}return o}(tvp.$),tvp.reportErr=function(t,e){e=e||"tvperror";var n="http://rcgi.video.qq.com/report/jsbossrep?block="+e+"&ret=-1&level=4&msg=";t=[location.href,navigator.userAgent,tvp.filename,tvp.ver,t].join("|"),t=encodeURIComponent(t),n+=t,tvp.report(n)},tvp.bossReport={rcmdTextReport:function(t,e,n,i){var o,a,r,s,l,d;i=i||0,r=window.navigator.userAgent.toLowerCase(),a=r.indexOf("qzone")>-1,l=tvp.app.pageType,d=tvp.common.getUin(),s=1===l?2:2===l?4:a?6:-1,o={oper:t,iplat:s,tab:e,rlist:n,host:location.hostname,url:top.location.href||window.location.href,rtype:0,ptype:21,uin:d,int1:i,int2:tvp.common.getDeviceId()};var c="http://btrace.video.qq.com/kvcollect?BossId=2745&Pwd=0&_dc="+Math.random();c+="&"+tvp.$.param(o),tvp.report(c)},window_error:function(){},play_report:function(t){if(t&&!tvp.$.isEmptyObject(t)){var e="http://btrace.video.qq.com/kvcollect?BossId=2865&Pwd=1698957057&_dc="+Math.random();e+="&"+t.join("&"),tvp.report(e)}},user_action_report:function(t){var e={sop:t.actions,url:t.url||top.location.href,platform:tvp.common.getDeviceId(),vid:t.vid},n="http://btrace.video.qq.com/kvcollect?BossId=2797&Pwd=219856622&_dc="+Math.random();n+="&"+tvp.$.param(e),tvp.report(n)},apprecommend_report:function(t){var e,n=tvp.app.pageType,i=window.navigator.userAgent.toLowerCase(),o=i.indexOf("qzone")>-1;e=1===n?2:2===n?4:o?6:-1;var a={oper:t.oper,tab:t.tab_id,vid:t.vid,rlist:t.rlist,page:t.page,url:top.location.href||window.location.href,iplat:e,ptype:21,rtype:1},r="http://btrace.video.qq.com/kvcollect?BossId=2745&Pwd=0&_dc="+Math.random();r+="&"+tvp.$.param(a),tvp.report(r)},report_bullet_switch:function(t){t=t||{};var e=tvp.$;if(t.platform=e.os.android?1:e.os.iphone?2:e.os.ipad?3:4,t.url=window.location.href,"undefined"!==e.type(t.user_action)){var n="http://btrace.video.qq.com/kvcollect?BossId=3084&Pwd=1539562724&_dc="+Math.random();n+="&"+e.param(t),tvp.report(n)}},h5_live_quality:function(t){var e={step:t.step,sid:t.sid,vurl:t.vurl||"",guid:t.guid,playno:t.playno,vdef:t.vdef,tpay:t.tpay,cpay:t.cpay,fplayerver:tvp.ver.replace(/\$/g,""),ftime:+new Date,ctime:+new Date,rtime:+new Date,sdtfrom:tvp.common.get_stdfrom(),platform:tvp.common.get_platform(),surl:location.href,sref:document.referrer,vip_type:"",adid:"",ptag:tvp.$.getUrlParam("ptag",location.href)},n="http://btrace.video.qq.com/kvcollect?BossId=3101&Pwd=1037836152&_dc="+Math.random();n+="&"+tvp.$.param(e),tvp.report(n)},appReportShowClick:function(t,e){var n="http://btrace.video.qq.com/kvcollect?BossId=3267&Pwd=1887953802&",i={cmd:-1,url:window!=top?document.referrer:document.location.href,ver:tvp.ver.replace(/\$/g,""),ua:navigator.userAgent,int1:tvp.common.getDeviceId(),int2:tvp.common.getPlatformId(),int3:0,int4:0,str1:"",str2:tvp.filename};t=tvp.$.extend(i,t),t.iSta=t.cmd,delete t.cmd,t=tvp.$.extend(t,{iTy:3267,iQQ:tvp.$.cookie&&tvp.$.cookie.get&&(tvp.$.cookie.get("uin")||tvp.$.cookie.get("luin"))}),t.iQQ&&(t.iQQ=t.iQQ.replace(/\D/gi,"")),t.isshortvd=e&&e.config&&e.config.isShortVideo?e.config.useHtml5VerticalBullet?2:1:0,e&&e.dataset&&e.dataset.noShortVideoData&&(t.isshortvd=3),n+=tvp.$.param(t),tvp.report(n)}},function(){tvp.common&&tvp.common.afterWeChatReady&&tvp.$.browser.WeChat&&tvp.common.afterWeChatReady({timeout:5e3}).done(function(){tvp.dataset.openLazy=!1,tvp.$(document).trigger("tvp:report:continue")})}(),tvp.retCode={snid:0,TYPE:{SUC:1,ERR:2},config:{cgi:"http://isdspeed.qq.com/cgi-bin/v.cgi",sampling:1},commCode:{error:11,MQzone_Err:12},report:function(t,e,n,i){if(t&&!(isNaN(e)||1>e)&&"undefined"!=typeof n){var o=this.config.cgi;o+="?flag1="+t.toString()+"&flag2="+e.toString()+"&1="+tvp.retCode.config.sampling+"&2="+n,i&&(o+="&flag3="+i.toString()),tvp.report(o)}}},tvp.RetCode=function(t){this.appid=t,this.timer={begin:0,end:0},this.SNID=tvp.retCode.snid,this.isReported=!1,tvp.retCode.snid++},tvp.RetCode.prototype={begin:function(){this.timer.begin=(new Date).valueOf()},end:function(){this.timer.end=this.timer.end||(new Date).valueOf()},report:function(t,e){if(!this.isReported){this.end();var n=this.timer.end-this.timer.begin;tvp.retCode.report(this.appid,t,n,e),this.isReported=!0}},reportSuc:function(){this.report(tvp.retCode.TYPE.SUC)},reportErr:function(t){t=t||tvp.retCode.commCode.error,this.report(tvp.retCode.TYPE.ERR,t)}},function(t,e){var n={poster:"",prefix:0,tail:0,tagStart:0,tagEnd:0,duration:"",historyStart:0,pay:0,eduext:0,classType:0,yyactid:0,coverId:"",title:"",isLookBack:0,tstart:0,CDNType:0,vFormat:"",LiveReTime:"",typeId:0,format:e.os.ipad||e.os.MIPAD?"mp4":"auto",channelExtParam:{},pid:"",rid:"",guid:"",bulletId:"",bullet:!1,h5BulletId:"",freeFlowHelper:!1,connectionPlayType:0};t.VideoInfo=function(){function i(t){return t.indexOf("_")<0?t:t.split("_")[0]}function o(t){return t.indexOf("_")<0?0:parseInt(t.split("_")[1])}function a(t){for(var e=[],n=t.split("|"),o=0;o<n.length;o++)e.push(i(n[o]));return e.join("|")}function r(){v&&v instanceof t.Player&&v.on(t.ACTION.onVodH5Init,function(){var e;"auto"===v.config.isHtml5UseHLS&&t.common.isUseHLS()||v.config.isHtml5UseHLS||(e=f.getMP4Url(),f.callGetMp4UrlDefer.resolve(e))})}var s="",l="",d=0,c=0,p="",u="",f=this,h={},v=null,g={},m=null;e.extend(h,n),this.data={},this.url="",this.lastQueryVid="";var y=e.getData("tvp-guid");y?n.guid=y:(y=e.createGUID(),e.setData("tvp-guid",y),n.guid=y),this.callGetMp4UrlDefer=e.Deferred(),e.each(h,function(t){var e=t.charAt(0).toUpperCase()+t.substr(1);f["set"+e]=function(e){return h[t]=e,this},f["get"+e]=function(){return h[t]}}),this.setCurPlayer=function(t){v=t,r()},this.setVid=function(n){if(t.$.isString(n)){if(this.clear(),p=n,n.indexOf("|")<0){var r=i(n);s=r,c=o(n),l=r}else{var d=n.split("|");s=i(d[0]),c=o(d[0]),l=a(n)}return s=e.filterXSS(s),l=e.filterXSS(l),this}},this.getVid=function(){return s},this.getVidList=function(){return l},this.getVidArray=function(){return l.split("|")},this.getIdx=function(){return c},this.getDuration=function(){if(!h.duration)return this.data&&this.data.vl&&e.isArray(this.data.vl.vi)&&this.data.vl.vi.length>0&&0!=this.data.vl.vi[0].td?this.data.vl.vi[0].td:0;for(var t=h.duration.split("|"),n=0,i=0,o=t.length;o>i;i++)n+=parseInt(t[i]);return n},this.getFileSize=function(){return this.data&&this.data.vl&&this.data.vl.vi&&this.data.vl.vi[0]&&this.data.vl.vi[0].fs?parseInt(this.data.vl.vi[0].fs,10):0},this.getTimelong=function(){return this.getDuration()},this.getEndOffset=function(){return this.getDuration()-this.getTail()},this.setChannelId=function(e){return t.$.isString(e)?(u=e,this):void 0},this.getChannelId=function(){return u},this.getFullVid=function(){return 0==this.getIdx()?i(this.getVid()):i(this.getVid())+"_"+this.getIdx()},this.getTitle=function(){return""===h.title&&this.data&&("mp4"==this.data.playtype&&this.data.vl&&e.isArray(this.data.vl.vi)&&this.data.vl.vi.length>0?h.title=this.data.vl.vi[0].ti||"":"hls"==this.data.playtype&&e.isArray(this.data.vi)&&this.data.vi.length>0&&(h.title=this.data.vi[0].title||"")),h.title},this.clear=function(){s="",l="",d=0,c=0,u="",m=null,g={},e.extend(h,n),this.data={},this.url=""},this.clone=function(t){t.setVid(p),t.setChannelId(u);for(var n in h){var i=n.charAt(0).toUpperCase()+n.substr(1);t["set"+i](this["get"+i]())}e.extend(t.data,this.data)},this.getVideoSnap=function(){var e=[];return e[0]=t.common.getVideoSnap(s,c),e[1]=e[0].replace("_160_90_3","_1"),e[2]=e[1].replace("_1.jpg",".png"),e},this.getMP4Url=function(n,i){var o="",a=this.getVidArray(),r="";if(e.isString(n)){if(o=n,e.inArray(n,a)<0){var s=e.Deferred();return s.reject(),s}}else isNaN(n)?(o=this.getVid(),r=this.getFullVid()):r=o=this.getVidArray()[n>=a.length?0:n];this.lastQueryVid=r||o,this.setRid(e.createGUID());var l,d=o+"_mp4_"+this.getFormat();if(i&&(l=e.Deferred()),"object"==e.type(g[d])&&e.isFunction(g[d].done)&&"resolved"==g[d].state())return g[d];g[d]=e.Deferred();var c=this;return t.h5Helper.loadVideoUrlByVid({vid:o,isPay:this.getPay(),eduext:h.eduext?h.eduext:0,yyactid:h.yyactid?h.yyactid:0,classType:h.classType,fmt:this.getFormat(),appId:v instanceof t.Player?v.config.appid:0,contentId:v instanceof t.Player?v.config.contentId:""}).done(function(t,n,i,o){window.txvLogin&&txvLogin.isLogin&&txvLogin.isLogin(function(t){c.tpay=n&&8===n.st?0:2,t||(c.tpay=-2)});var a=c.getFreeFlowHelper(),r=!1,s=function(t){"array"===e.type(t)?(c.url=t[0],c.dataHls=t,t=t[0]):c.url=t,c.data=n,c.data.playtype="mp4","undefined"!=typeof i&&(c.videoSlice=i),"undefined"!=typeof o&&(c.dataJson=o,c.setDuration(o.preview+"")),l?l.resolve(t):g[d]&&g[d].resolve(t)};"function"===e.type(a)?(a(t,function(t){r=!0,s(t)}),setTimeout(function(){r||s(t)},5e3)):s(t)}).fail(function(t,n){g[d]&&g[d].reject(t,e.isUndefined(n)?0:n)}),l?l:g[d]},this.switchDefinition=function(n){var i=e.Deferred(),o=this;return t.h5Helper.loadVideoUrlByVid({vid:this.getVid(),isPay:this.getPay(),eduext:this.getEduext(),yyactid:this.getYyactid(),classType:this.getClassType(),fmt:n||this.getFormat(),appId:v instanceof t.Player?v.config.appid:0,contentId:v instanceof t.Player?v.config.contentId:""}).done(function(t,n,a,r){var s=o.getFreeFlowHelper(),l=!1,d=function(t){o.url=t,o.data=n,o.data.playtype="mp4","undefined"!=typeof a&&(o.videoSlice=a),"undefined"!=typeof r&&(o.dataJson=r,o.setDuration(r.preview+"")),i.resolve(t)};"function"===e.type(s)?(s(t,function(t){l=!0,d(t)}),setTimeout(function(){l||d(t)},5e3)):d(t)}).fail(function(t,n){i.reject(t,e.isUndefined(n)?0:n)}),i},this.getHLS=function(n){var i="",o=this.getVidArray(),a="";if(e.isString(n)){if(i=n,e.inArray(n,o)<0){var r=e.Deferred();return r.reject(),r}}else isNaN(n)?(i=this.getVid(),a=this.getFullVid()):a=i=this.getVidArray()[n>=o.length?0:n];this.lastQueryVid=a||i,this.setRid(e.createGUID());var s=i+"_hls_"+this.getFormat();if("object"==e.type(g[s])&&e.isFunction(g[s].done)&&"resolved"==g[s].state())return g[s];g[s]=e.Deferred();var l=this;return t.h5Helper.loadHLSUrlByVid({vid:i,isPay:this.getPay(),fmt:this.getFormat(),appId:v instanceof t.Player?v.config.appid:0,contentId:v instanceof t.Player?v.config.contentId:""}).done(function(t,e){l.url=t,l.data=e,l.data.playtype="hls",g[s]&&g[s].resolve(t)}).fail(function(t,n){g[s]&&g[s].reject(t,e.isUndefined(n)?0:n)}),g[s]},this.getPlayFormat=function(){if(!e.isPlainObject(this.data))return this.getFormat();if("object"==e.type(this.data.fl)&&e.isArray(this.data.fl.fi))for(var t=this.data.fl.fi,n=0;n<t.length;n++)if(1==t[n].sl)return t[n].name;return this.getFormat()},this.getSrtLangList=function(){return"object"==e.type(this.data.sfl)&&e.isArray(this.data.sfl.fi)?(e.each(this.data.sfl.fi,function(e,n){n.desc=t.html5lang.getSrtName(n.id)}),this.data.sfl.fi):[]},this.getSrtUrlList=function(n){if(e.isUndefined(n)){var i=this.getSrtLangList();if(!(i.length>0))return e.Deferred().reject(-1);n=i[0]}if("object"!=e.type(n)&&!isNaN(n)){for(var o=0,a=this.data.sfl.fi.length;a>o;o++)if(this.data.sfl.fi[o].id==n){n=this.data.sfl.fi[o];break}if("object"!=e.type(n))return e.Deferred().reject(-2)}var r=this.getVid(),s=r+"_srt_"+n.id;if("object"==e.type(g[s])&&e.isFunction(g[s].done)&&"resolved"==g[s].state())return g[s];g[s]=e.Deferred();var l=this;return t.h5Helper.loadSRT({vid:r,sflid:n.id,pid:l.getPid()}).done(function(t){var i=[];"object"==e.type(t.ul)&&e.isArray(t.ul.ui)&&e.each(t.ul.ui,function(t,e){i.push([e.url,"lang="+n.name].join("?"))}),g[s].resolve(i)}).fail(function(t){g[s].reject(t)}),g[s]},this.getFormatList=function(){if("object"==e.type(m)&&e.isFunction(m.done))return m;m=e.Deferred();var t=this,n=["sd","hd","shd","fhd"],i=function(){var i=[];return e.isPlainObject(t.data.fl)&&e.isArray(t.data.fl.fi)?(e.each(t.data.fl.fi,function(t,o){-1!=e.inArray(o.name,n)&&i.push(o.name)}),i):[]};return this.getMP4Url().done(function(){m.resolve({list:i()})}).fail(function(){m.reject({list:[]})}),m},this.hasHardSubtitle=function(){for(var t=this.getFormat(),e=0,n=this.data.fl.fi.length;n>e;e++){var i=this.data.fl.fi[e];if(i.name==t)return!!i.sb}return!1},this.hasSoftSubtitle=function(){return"object"==e.type(this.data.sfl)&&e.isArray(this.data.sfl.fi)&&this.data.sfl.fi.length>0}},t.PLAYTYPE={LIVE:"1",VOD:"2"}}(tvp,tvp.$),function(t){tvp.speedlimit={buildResult:function(e){var n=!1,i=!1,o=t.Deferred();return t.browser.MQQ&&t.browser.version>5.1&&(i=!0),i&&this.mqqGetResult(e).then(function(t){t?o.resolve(t):o.resolve()}),i&&(n=!0),n||o.resolve(),setTimeout(function(){o.resolve()},3e3),o},mqqGetResult:function(e){function n(){if(window.x5&&window.x5.getBrowserSignature)try{var n=parseInt(tvp.$.now()/1e3,10);x5.getBrowserSignature("vid:"+e+"["+n+"]",function(e){e?i.resolve({bver:t.browser.version,pkckey:e}):i.resolve()},function(){i.resolve()})}catch(o){i.resolve()}else i.resolve();setTimeout(function(){i.resolve()},300)}var i=t.Deferred();return window.x5&&window.x5.getBrowserSignature?n():tvp.app?(tvp.app.loadMqqDefer||(tvp.app.loadMqqDefer=tvp.app.loadMqqAPI()),tvp.app.loadMqqDefer.done(function(){n()}),tvp.app.loadMqqDefer.fail(function(){i.resolve()})):i.resolve(),i}}}(tvp.$);var o={};o.ha=function(t){function e(t,e){return((t>>1)+(e>>1)<<1)+(1&t)+(1&e)}for(var n=[],i=0;64>i;)n[i]=0|4294967296*Math.abs(Math.sin(++i));var o=function(i){for(var o,a,r,s,l=[],d=unescape(encodeURI(i)),c=d.length,p=[o=1732584193,a=-271733879,~o,~a],u=0;c>=u;)l[u>>2]|=(d.charCodeAt(u)||128)<<8*(u++%4);for(l[i=(c+8>>6)*t+14]=8*c,u=0;i>u;u+=t){for(c=p,s=0;64>s;)c=[r=c[3],e(o=c[1],(r=e(e(c[0],[o&(a=c[2])|~o&r,r&o|~r&a,o^a^r,a^(o|~r)][c=s>>4]),e(n[s],l[[s,5*s+1,3*s+5,7*s][c]%t+u])))<<(c=[7,12,17,22,5,9,14,20,4,11,t,23,6,10,15,21][4*c+s++%4])|r>>>32-c),o,a];for(s=4;s;)p[--s]=e(p[s],c[s])}for(i="";32>s;)i+=(p[s>>3]>>4*(1^7&s++)&15).toString(t);return i};return o}(16),o.stringToHex=function(t){for(var e="",n=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"),i=0;i<t.length;i++)e+=n[t.charCodeAt(i)>>4]+n[15&t.charCodeAt(i)];return e},o.hexToString=function(t){for(var e="",n="0x"==t.substr(0,2)?2:0;n<t.length;n+=2)e+=String.fromCharCode(parseInt(t.substr(n,2),16));return e},o._Seed="#$#@#*ad",o.tempcalc=function(t,e){for(var n="",i=0;i<t.length;i++)n+=String.fromCharCode(t.charCodeAt(i)^e.charCodeAt(i%4));return n},o.u1=function(t,e){for(var n="",i=e;i<t.length;i+=2)n+=t.charAt(i);return n},o._urlStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o.urlenc=function(t,e,n){for(var i,a,r,s,l,d,c,p="",u=0;u<t.length;)i=t.charCodeAt(u++),a=t.charCodeAt(u++),r=t.charCodeAt(u++),15==u&&(p+="A",p+=e,p+=n),s=i>>2,l=(3&i)<<4|a>>4,d=(15&a)<<2|r>>6,c=63&r,isNaN(a)?d=c=64:isNaN(r)&&(c=64),p=p+o._urlStr.charAt(s)+o._urlStr.charAt(l)+o._urlStr.charAt(d)+o._urlStr.charAt(c);return p},o.$xx=function(t,e,n,i){var a=""+Math.floor((new Date).valueOf()/1e3),i=(""+i).charAt(0),r="",s="",l={plt:t||"",vid:e||"",std:n||"",sts:i||"",ts:a,rf:r,ua:s};l=window.JSON?JSON.stringify(l):function(){var t=[];for(var e in l)t.push('"'+e+'":"'+l[e]+'"');return"{"+t.join(",")+"}"}(l);var d=o.hexToString(o.ha(t+e+a+o._Seed+r+s+i.charAt(0)+n)),c=o.urlenc(o.tempcalc(d,o._Seed),i.charAt(0),a),p=o.urlenc(o.tempcalc(d,"86FG@hdf"),i.charAt(0),a),u=o.u1(c,0),f=o.u1(c,1);return{p:l,u:c,c:p,u1:u,u2:f,t:a}},function(t,e){function n(){return this.init()}var i=[{reg:function(){return this.cfg.noAuth?!0:!1},request:function(t){var e=this;t.resolve({param:{vids:e.cfg.vid,defaultfmt:e.cfg.fmt}})}},{reg:function(){return this.cfg.eduext?!0:!1},request:function(t){var e=this;t.resolve({cgi:e.cfg2.cgi.edugetvinfo,param:{eduext:e.cfg.eduext,platform:261001,vid:e.cfg.vid,defn:e.cfg.fmt}})}},{reg:function(){return 1===this.cfg.classType?!0:!1},request:function(t){var e=this;t.resolve({cgi:e.cfg2.cgi.edugetvinfo,param:{platform:221001,vid:e.cfg.vid,defn:e.cfg.fmt}})}},{reg:function(){return this.cfg.yyactid?!0:!1},request:function(t){var e=this;t.resolve({cgi:e.cfg2.cgi.yygetinfo,cgi2:e.cfg2.cgi.yygetkey,param:{actid:e.cfg.yyactid,platform:181001,vids:e.cfg.vid,defaultfmt:e.cfg.fmt}})}},{reg:function(){if(window!==top&&"v.qq.com"===location.hostname&&"/iframe/player.html"===location.pathname){var e=t.common.getParams(location.href);if(e&&e.cKey&&e.encryptVer&&e.platform)return this.params=e,!0}return!1},request:function(t){var e,n=this,i={cgi:n.cfg2.cgi.getinfo,param:{encryptVer:n.params.encryptVer,platform:n.params.platform,cKey:n.params.cKey,vids:n.cfg.vid,defaultfmt:n.cfg.fmt}};try{e=window.parent.location.href}catch(o){}e&&(i.param.wxrefer=e),t.resolve(i)}},{reg:function(){return t.common.is_mqq_buluo()?!0:!1},request:function(e){if(!window.getBrowserSignature)return void e.reject();var n=this;window.getBrowserSignature(n.cfg.vid,function(i){var o;if(i&&i.data)try{var a=JSON.parse(i.data);a&&a.result&&a.result.token&&(o=a.result.token)}catch(r){}o?e.resolve({param:{cKey:o,encryptVer:"6.4",platform:t.$.os.ios?"170408":"170308",vids:n.cfg.vid,defaultfmt:n.cfg.fmt}}):e.reject()})}},{reg:function(){return e.browser.MQQ&&!t.$.browser.MQQClient&&window===top?!0:!1},request:function(n){var i,o,a=this,r="undefined"!=typeof a.cfg.svr_time?a.cfg.svr_time+"":parseInt(+new Date/1e3)+"",s=function(){var t,i,o={vid:a.cfg.vid};o.timestamp=r,e.os.ios?(t=x5.ios.getBrowserSignature,i=e.os.ipad?o:"vid:"+o.vid+"["+o.timestamp+"]"):(t=x5.android.getBrowserSignature,i="vid:"+o.vid+"["+o.timestamp+"]"),t(i,function(t){if("object"==typeof t&&t.key&&t.ver&&t.platform){var e={cgi:a.cfg.cgi.getvinfo,param:{cKey:t.key,encryptVer:t.ver,platform:t.platform,vid:a.cfg.vid,defn:a.cfg.fmt}};n.resolve(e)}else if("object"==typeof t&&t.data){var e={cgi:a.cfg.cgi.getvinfo,param:{cKey:t.data,encryptVer:"4.0",platform:"161001",vid:a.cfg.vid,defn:a.cfg.fmt}};n.resolve(e)}else if("string"==typeof t){var e={cgi:a.cfg.cgi.getvinfo,param:{cKey:t,encryptVer:"4.0",platform:"161001",vid:a.cfg.vid,defn:a.cfg.fmt}};n.resolve(e)}else n.reject()},function(){n.reject()})};i=window.x5&&x5.ios&&"function"===e.type(x5.ios.getBrowserSignature),o=window.x5&&"function"===e.type(window.x5.getBrowserSignature),i||o?s():t.app.loadMqqAPI().done(function(){i=window.x5&&x5.ios&&"function"===e.type(x5.ios.getBrowserSignature),o=window.x5&&"function"===e.type(window.x5.getBrowserSignature),i||o?s():n.reject()}).fail(function(){n.reject()})}},{reg:function(){return e.browser.qqnews||e.browser.kuaibao?!0:!1},request:function(t){var n=this,i=n.cfg.vid,o="undefined"!=typeof n.cfg.svr_time?n.cfg.svr_time+"":parseInt(+new Date/1e3)+"",a="TVP_KUAIBAO_CB_"+o.substr(-4,4);window[a]=function(e){var i;try{i=JSON.parse(e)}catch(o){}if(i&&i.key&&i.ver&&i.platform&&i.sdtfrom){var a={param:{cKey:i.key,encryptVer:i.ver,platform:i.platform,sdtfrom:i.sdtfrom,vid:n.cfg.vid,defaultfmt:"mp4",clip:4}};t.resolve(a)}else t.reject()};var r=function(){var t={method:"getCKey",types:["string","string","string"],args:[i,o,a],instanceName:"TencentNewsScriptControllerJsInterface"},e="jsbridge://get_with_json_data?json="+encodeURIComponent(JSON.stringify(t))+"&_t="+o,n=new Image;n.src=e},s=function(){var t=function(){window.getBrowserSignature(i,o,a)};"function"==typeof window.getBrowserSignature?(t(),document.addEventListener("TencentNewsJSInjectionComplete",function(){t()})):document.addEventListener("TencentNewsJSInjectionComplete",function(){t()})};e.os.ios?s():e.os.android?r():t.reject()}},{reg:function(){return e.browser.douban||e.browser.liebao?!0:!1},request:function(t){var e,n=this,i="undefined"!=typeof n.cfg.svr_time?n.cfg.svr_time+"":parseInt(+new Date/1e3)+"",o=function(){if(!window.getBrowserSignature)return void t.reject();try{e=window.getBrowserSignature(n.cfg.vid,i)}catch(o){}if(e&&e.key&&e.ver&&e.platform){var a={param:{cKey:e.key,encryptVer:e.ver,platform:e.platform,vid:n.cfg.vid,defaultfmt:n.cfg.fmt}};t.resolve(a)}else t.reject()};o()}},{reg:function(){return t.$.browser.MQQClient&&"mqqcartoon"===t.$.getUrlParam("openS")?!0:!1},request:function(e){var n=this;t.$.getScript("http://imgcache.qq.com/club/client/comic/release/js/util/qqComicVideoAuth.js?t="+t.ts,function(){"function"===t.$.type(window.getBrowserSignature)?window.getBrowserSignature(n.cfg.vid,function(t){if(t&&-1!==t){var i={cgi:n.cfg2.cgi.getvinfo,param:{cKey:t,encryptVer:"6.4",platform:"170101",vid:n.cfg.vid,defn:n.cfg.fmt}};e.resolve(i)}}):e.reject()})}}];n.prototype={init:function(){return this.reg_request},reg_request:function(n,o){var a=this;a.cfg=n,a.cfg2=o;var r=e.Deferred(),s=!1;return t.config&&t.config.authRules&&t.config.authRules.length&&(i=i.concat(t.config.authRules)),e(i).each(function(t,n){return"function"!==e.type(n.reg)?!0:"function"!==e.type(n.request)?!0:n.reg.call(a)?(s=!0,n.request.call(a,r),!1):!0}),s||r.reject(),setTimeout(function(){r.reject()},6e3),r}},t.auth=new n}(tvp,tvp.$),function(t,e){function n(){var t="view.inews.qq.com"===c.host;return location.hostname.indexOf("caixin.com")>-1?"v1093":e.os.iphone||e.os.ipod?t?"v3110":"v3010":e.os.ipad?t?"v4110":"v4010":e.os.android?e.os.tablet?"v6010":t?"v5110":"v5010":e.browser.IEMobile?"v7010":"v1010"}function i(t,e){for(var n=0,i=e.length;i>n;n++)if(1==e[n].sl)return e[n].id;return-1}function a(n){var i={cmd:3532,speed:0,appId:0,contentId:"",vid:"",itype:1,val:0,val2:0,str3:""};n=e.extend(i,n),t.report(n)}function r(t){t=t||{};var i,o=!1;return t.alias&&"string"==typeof t.fn&&t.vid&&(t.fn=t.fn.replace(t.vid,t.alias),o=!0),p&&"string"==typeof t.path&&(t.path=t.path.replace(/\/\/(.+?)(\/|#|$|\?)/,function(){return arguments.length>1?arguments[0].replace(arguments[1],p):arguments[0]})),i=t.path.indexOf("?")>-1?t.path+"&"+t.fn+"&vkey="+t.vkey+"&br="+t.br+"&platform=2&fmt="+t.fmt+"&level="+t.level+"&sdtfrom="+n():t.path+t.fn+"?vkey="+t.vkey+"&br="+t.br+"&platform=2&fmt="+t.fmt+"&level="+t.level+"&sdtfrom="+n(),e.isString(t.sha)&&t.sha.length>0&&(i+="&sha="+t.sha),o&&(i+="&vidalias=1"),i}function s(t){if("object"!==e.type(t))return 0;if(!(t.ul&&t.ul.ui&&t.ul.ui.length))return 0;var n=[];return e(t.ul.ui).each(function(t,e){e.url&&e.hls&&e.hls.pt&&n.push(e.url+e.hls.pt)}),0===n.length?0:n}function l(t){return function(n){a(e.extend(t,n))}}function d(i){var a,r,s,l="",d=1,c={};if("object"==typeof o&&"function"==typeof o.$xx&&"string"==typeof i){a=e.getUrlParam("platform",i),r=e.getUrlParam("vids",i),s=n(),i.indexOf("mvgetinfo?")>-1&&(e.os.iphone?s="V3013":e.os.ipad?s="V4013":e.os.android&&(s="V5013"));try{c=o.$xx(a,r,s,d)}catch(p){"function"==typeof t.reportErr&&p&&p.message&&t.reportErr(p.message)}c&&(l=l+"&_qv_rmt="+c.u1,l=l+"&_qv_rmt2="+c.u2,e.getUrlParam("sdtfrom",i)||(l=l+"&sdtfrom="+s),i=i+(-1==i.indexOf("?")?"?":"&")+l,e.cookie.set("qv_als",c.c))}return i}var c={isHLS:!1,isPay:!1,vid:"",fmt:"auto",platform:11001,host:window!=top?document.referrer:document.location.host},p="";c.cgi=function(){if("view.inews.qq.com"===c.host){var n="";return e.browser.WeChat&&(n="nocache=1&"),{getinfo:t.common.get_request_url("getinfoInews"),getkey:t.common.get_request_url("getkeyInews")+n}}return{getinfo:t.common.get_request_url("getinfo")+"?callback=?&",getvinfo:t.common.get_request_url("getvinfo")+"?callback=?&",edugetvinfo:t.common.get_request_url("edugetvinfo")+"?callback=?&",yygetinfo:t.common.get_request_url("mvgetinfo")+"?callback=?&",yygetkey:t.common.get_request_url("mvgetkey")+"?callback=?&",getkey:t.common.get_request_url("getkey")+"?callback=?&"}}(),c.retryCgi=function(){return e.browser.WeChat||e.browser.MQQClient?{getinfo:c.cgi.getinfo.replace(/(\/\/)(.+?)(\/|$)/,"$1bkh5vv.video.qq.com$3"),getkey:c.cgi.getkey.replace(/(\/\/)(.+?)(\/|$)/,"$1bkh5vv.video.qq.com$3")}:{getinfo:c.cgi.getinfo.replace(/(\/\/)(.+?)(\/|$)/,"$1bkh5vv.video.qq.com$3"),getkey:c.cgi.getkey.replace(/(\/\/)(.+?)(\/|$)/,"$1bkh5vv.video.qq.com$3")}}(),t.h5Helper={loadVideoUrlByVid:function(n){var i="";return t.speedlimit?(i=e.Deferred(),t.speedlimit.buildResult().done(function(e){var o=t.h5Helper.loadVideoUrlByVid_base(n,e);o.done(function(t,e){i.resolve(t,e)}),o.fail(function(t,e){i.reject(t,e)})})):i=t.h5Helper.loadVideoUrlByVid_base(n),i},loadVideoUrlByVid_base:function(o,a){var p,u,f={},h={},v=0,g=e.Deferred();e.extend(e.extend(f,c),o);var m,y=new t.RetCode(100126),w=!1,_=c.cgi.getinfo,b=e.now(),x=0,$="",I=e.noop,T=c.cgi.getkey;m={platform:f.platform,charge:f.isPay?1:0,otype:"json",sphls:t.common.isSupportM3u8()?1:0,sb:1,nocache:e.browser.MQQClient||e.browser.WeChat?1:0,_rnd:(new Date).valueOf()},o.retryDefer&&e.isFunction(o.retryDefer.reject)&&(w=!0,g=o.retryDefer,_=c.retryCgi.getinfo,T=c.retryCgi.getkey),o.loadingAdCgi&&(_=o.loadingAdCgi,o.noAuth=!0),o.defer&&(g=o.defer),I=l({itype:1,val2:w?1:0,str3:$,vid:f.vid,appId:f.appId,contentId:f.contentId}),y.begin(),I();var S=function(i){if(x=e.now()-b,i&&i.s?"o"!=i.s?(v=i.em||50,u=i.exem):i.vl&&i.vl.vi&&e.isArray(i.vl.vi)&&0!=i.vl.cnt?p=i.vl.vi[0]:v=68:v=50,0!=v||5==p.fst&&e.isPlainObject(p.ul)&&e.isArray(p.ul.ui)&&0!=p.ul.ui.length?0==v&&2!=p.st&&(8!=p.st?v=62:i.vl&&i.vl.vi&&i.vl.vi[0]&&i.vl.vi[0].td&&parseInt(i.vl.vi[0].td)>parseInt(i.preview)&&(i.exem=1)):v=62,o.yyactid&&83===v&&(u=-3),t.common.is_mqq_buluo()&&(u=0),0!=v)return I({val:v,speed:x}),y.reportErr(v),void g.reject(v,u);if(y.reportSuc(),I({val:0,speed:x}),o.loadingAdCgi)return void g.resolve(p.ul.ui[0].url,{vl:i.vl,fl:i.fl,sfl:i.sfl,exem:i.exem,preview:i.preview});if(3==i.dltype)u=s(p),g.resolve(u,{vl:i.vl,fl:i.fl,sfl:i.sfl,exem:i.exem,preview:i.preview});else{if(p.fvkey)return u=r({path:p.ul.ui[0].url,fn:p.fn,vkey:p.fvkey,br:p.br,platform:2,fmt:f.fmt,level:p.level,sdtfrom:n(),sha:p.fsha,vid:f.vid,alias:p.alias}),void g.resolve(u,{vl:i.vl,fl:i.fl,sfl:i.sfl,exem:i.exem,preview:i.preview,st:p.st});C(i)}},C=function(a){var s,c=p.ul.ui[0];h.br=p.br,h.path=c.url,h.fn=p.fn,h.fiid=i(f,a.fl.fi),h.vt=c.vt,s=new t.RetCode(100127),s.begin(),b=e.now(),$=T+e.param({otype:"json",vid:f.vid,format:h.fiid,filename:h.fn,platform:f.platform,vt:h.vt,charge:f.isPay?1:0,_rnd:(new Date).valueOf()}),$=d($),I=l({itype:2,val2:w?1:0,str3:$,vid:f.vid,appId:f.appId,contentId:f.contentId}),I(),e.ajax({url:$,dataType:"jsonp",jsonpCallback:"tvp_request_getvkey_callback_"+parseInt(1e6*Math.random())}).done(function(t){var i="";return v=0,x=e.now()-b,t&&t.s?"o"!=t.s&&(v=t.em||50):v=50,0!=v?(s.reportErr(v),I({val:v,speed:x}),void g.reject(v)):(i=r({path:h.path,fn:h.fn,vkey:t.key,br:h.br,platform:2,fmt:f.fmt,level:t.level,sdtfrom:n(),sha:t.sha,vid:f.vid,alias:p.alias}),s.reportSuc(),I({val:0,speed:x}),void g.resolve(i,{vl:a.vl,fl:a.fl,sfl:a.sfl,exem:a.exem,preview:a.preview}))}).fail(function(){s.reportErr(),I({val:500,speed:e.now()-b}),w?g.reject(500,2):(o.retryDefer=g,t.h5Helper.loadVideoUrlByVid(o))})},k=function(){$=_+e.param(m),a&&"object"===e.type(a)&&($+="&"+e.param(a)),$=d($),e.ajax({url:$,dataType:"jsonp",jsonpCallback:"tvp_request_getinfo_callback_"+parseInt(1e6*Math.random())}).done(function(e){if(!o.noAuth&&e&&0!=e.em&&"o"!=e.s){if(85===e.em&&-3===e.type&&1===o.cgi_auth_index)return o.cgi_auth_index+=1,o.defer=g,o.needTime=!0,o.svr_time=e.curTime,void t.h5Helper.loadVideoUrlByVid(o);if(83!==e.em||!m.eduext)return o.noAuth=!0,o.defer=g,void t.h5Helper.loadVideoUrlByVid(o)}S(e)}).fail(function(){if(y.reportErr(),I({val:500,speed:e.now()-b}),w)g.reject(500,1);else{var n=parseInt(700*Math.random()+300);setTimeout(function(){o.noAuth=!0,o.retryDefer=g,t.h5Helper.loadVideoUrlByVid(o)},n)}})};return o.cgi_auth_index||(o.cgi_auth_index=1),t.auth(f,c).done(function(t){t=t||{},"undefined"!==e.type(t.cgi)&&t.cgi&&(_=t.cgi),"undefined"!==e.type(t.cgi2)&&t.cgi2&&(T=t.cgi2),t.param&&e.extend(m,t.param),k()}).fail(function(){e.extend(m,{vids:f.vid,defaultfmt:f.fmt}),k()}),g},loadHDVideoUrlByVid:function(e){e.fmt="mp4",t.h5Helper.loadVideoUrlByVid(e)},loadHLSUrlByVid:function(n){var i={},o=e.Deferred();e.extend(e.extend(i,c),n);var a=new t.RetCode(100128),r="http://h5vv.video.qq.com/gethls?callback=?&"+e.param({vid:i.vid,charge:i.isPay?1:0,otype:"json",platform:i.platform,_rnd:(new Date).valueOf()}),s=l({itype:3,str3:r,vid:i.vid,appId:i.appId,contentId:i.contentId}),p=e.now();return r=d(r),s(),a.begin(),e.ajax({url:r,dataType:"jsonp"}).done(function(n){if(!n||!n.s)return a.reportErr(50),s({speed:e.now()-p,val:50}),void o.reject(50);if("o"!=n.s)return a.reportErr(n.em||50),s({speed:e.now()-p,val:n.em||50}),void o.reject(n.em||50);if(!n.vd||!n.vd.vi||!t.$.isArray(n.vd.vi))return a.reportErr(68),s({speed:e.now()-p,val:68}),void o.reject(68);for(var i=[],r=-2,l=0;l<n.vd.vi.length;l++)if(r=n.vd.vi[l].ch,2==n.vd.vi[l].st){var d=n.vd.vi[l].url.toLowerCase();if(!(d.indexOf(".mp4")<0&&d.indexOf(".m3u8")<0)&&n.vd.vi[l].url){var c=n.vd.vi[l];i.push(c.url);break}}return 0==i.length?(a.reportErr(68),s({speed:e.now()-p,val:68}),void o.reject(68,r)):(s({speed:e.now()-p,val:0}),a.reportSuc(),void o.resolve(i[0],n.vd))
}).fail(function(){a.reportErr(),s({speed:e.now()-p,val:500}),o.reject(500,3)}),o},load3GVideoUrl:function(e){e.fmt="msd",t.h5Helper.loadVideoUrlByVid(e)},loadIsUseHLS:function(n){var i={},o=e.Deferred();e.extend(e.extend(i,c),n);var a=new t.RetCode(100125);return a.begin(),e.ajax({url:t.common.get_request_url("get_dtype")+"?callback=?&"+e.param({vids:i.vid,platform:i.platform,otype:"json",_rnd:(new Date).valueOf()}),dataType:"jsonp"}).done(function(t){var i=1;if("object"!=e.type(t))return a.reportErr(),void o.reject(500,4);if("o"!=t.s||!e.isArray(t.dl)||0==t.dl.length)return a.reportErr(t.em),void o.reject(t.em||50);for(var r=0,s=t.dl.length;s>r;r++)t.dl[r].vid===n.vid&&(i=t.dl[r].dltype);a.reportSuc(),o.resolve(i,t)}).fail(function(){a.reportErr(),o.reject(500,4)}),o},loadSRT:function(t){var n={},i=e.Deferred();return e.extend(e.extend(n,c),t),e.ajax({url:"http://h5vv.video.qq.com/getsurl?"+e.param({vid:n.vid,format:n.sflid,platform:n.platform,pid:n.pid,otype:"json",_rnd:(new Date).valueOf()}),dataType:"jsonp"}).done(function(t){return"object"!=e.type(t)?void i.reject(500):"o"!=t.s?void i.reject(isNaN(t.em)?500:t.em,t.msg||""):void i.resolve(t)}).fail(function(){i.reject(500)}),i},setSpecialVideoFileDomain:function(t){"string"==typeof t&&/^(\S+[\.])?qq\.com/.test(location.host)&&(p=t)}}}(tvp,tvp.$),function(){function t(){this.cache={},this.wxCallbacks=[]}var n={set:function(t,e,n,i,o){if(o){var a=new Date,r=new Date;r.setTime(a.getTime()+36e5*o)}return document.cookie=t+"="+e+"; "+(o?"expires="+r.toGMTString()+"; ":"")+(i?"path="+i+"; ":"path=/; ")+(n?"domain="+n+";":"domain="+window.location.host+";"),!0},get:function(t){var e=new RegExp("(?:^|;+|\\s+)"+t+"=([^;]*)"),n=document.cookie.match(e);return n?n[1]:""},del:function(t,e,n){var i=new Date;i.setTime(i.getTime()-1),document.cookie=t+"=; expires="+i.toGMTString()+";"+(n?"path="+n+"; ":"path=/; ")+(e?"domain="+e+";":"domain="+window.location.host+";")}},i={ajax:function(t,n,i){if(!t||"function"!=typeof n||"function"!=typeof i)return{error:"ajax params error"};var o;if(window.jQuery&&jQuery.ajax)o=jQuery.ajax;else if(window.Zepto&&e.ajax)o=e.ajax;else{if(!(window.tvp&&tvp.$&&tvp.$.ajax))return void i({error:"$.ajax not found"});o=tvp.$.ajax}t.success=function(t){n(t)},t.error=function(t){i({error:t})},o(t)}},o=navigator.userAgent.toLowerCase(),a={isqqlive:o.indexOf("qqlive")>-1},r={qqloginHash:"txvlogin_qqlogin_hash=1"},s=function(){function t(){for(var t;t=n.shift();)t(e)}var e=!0,n=[];return location.href.indexOf(r.qqloginHash)>-1&&(e=!1,i.ajax({url:"//video.qq.com/fcgi-bin/qq_login",dataType:"jsonp"},function(){location.href=location.href.replace(r.qqloginHash),e=!0,t()},function(){e=!0,t()})),function(t){e?t(e):n.push(t)}}();t.prototype={isLogin:function(t){t=t||function(){};var e=this;return a.isqqlive?void this.tvGetCookie(["qq","wx"],function(e){var n;try{n=JSON.parse(e)}catch(i){}n&&t(n.result&&n.result.qq?1:n.result&&n.result.wx?2:0)}):void this.getWXCookie(function(n){e.isQQLogin(function(i){return i&&n&&"qq"===n.main_login?void t(1,null):void e.isWXLogin(function(e){e&&"wx"===e.main_login?t(2,e):t(0,null)})})})},getUserInfo:function(t){t=t||function(){};var e=this;this.isLogin(function(n,i){return 0===n?void t({error:"not login"}):a.isqqlive?void e.tvGetUserInfo(["qq","wx"],function(e){var i,o;try{i=JSON.parse(e)}catch(a){}return i?(1===n?o="qq":2===n&&(o="wx"),void t(i&&i.result&&i.result[o]&&i.result[o].nickname?{nick:i.result[o].nickname,face:i.result[o].headImgUrl,type:o}:{error:"get tv "+o+" user info fail"})):void t({error:"parse tv cookie fail"})}):void(1===n?e.requestQQInfo(function(e){t(e&&e.nick?{nick:e.nick,face:e.qqface,type:"qq"}:{error:"requestQQInfo fail"})}):2===n&&t(i&&i.nick?{nick:decodeURIComponent(i.nick),face:i.head,type:"wx"}:{error:"get weixin info fail"}))})},checkQQLogin:function(t){t=t||function(){};var e=n.get("lskey"),i=n.get("luin"),o=n.get("uin"),a=n.get("skey");t(o&&a?2:e&&i?1:0)},isQQLogin:function(t){t=t||function(){},this.checkQQLogin(function(e){t(0!==e)})},isQQLowLogin:function(t){t=t||function(){},this.checkQQLogin(function(e){t(1===e)})},getUin:function(t){t=t||function(){};var e;this.isQQLowLogin(function(i){e=n.get(i?"luin":"uin"),e?(e=parseInt(e.replace(/^o0*/g,""),10),t(e)):t(0)})},getSkey:function(t){t=t||function(){};var e=n.get("skey"),i=n.get("lskey");t(e||i)},time33:function(t){for(var e=0,n=t.length,i=5381;n>e;++e)i+=(i<<5)+t.charAt(e).charCodeAt();return 2147483647&i},gTk:function(t){t=t||function(){};var e=this;this.getWXCookie(function(n){"wx"==n.main_login?t(e.time33(n.vusession),"wx"):e.getSkey(function(n){var i=n?e.time33(n):"";t(i,"")})})},requestQQInfo:function(t){t=t||function(){};var e,n=this,o=function(){n.checkQQLogin(function(n){return 0===n?void t({error:"qq not login"}):(e=1===n?1:0,void a())})},a=function(){i.ajax({url:"//video.qq.com/fcgi-bin/get_userinfo",data:{otype:"json",type:2,_:+new Date,low_login:e},dataType:"jsonp",timeout:5e3},function(e){e={qqface:e.data[0].headurl,nick:e.data[0].nick},t(e)},function(e){t(e)})};o()},openQQLogin:function(t){t=t||{};var e=location.protocol+"//video.qq.com/fcgi-bin/qq_login?redirect_url="+encodeURIComponent(t.s_url||location.href);delete t.s_url;var n="//ui.ptlogin2.qq.com/cgi-bin/login?",i={link_target:"blank",low_login:0,target:"self",style:9,appid:"532001601",pt_no_onekey:0,s_url:encodeURIComponent(e)},o=[];for(var a in i)o.push(t.hasOwnProperty(a)?a+"="+t[a]:a+"="+i[a]);n+=o.join("&"),setTimeout(function(){window.location.href=n},200)},qqLogout:function(){n.set("nickCookie","",location.host,"/",-24),n.set("encuinCookie","",location.host,"/",-24),n.set("skey","",".qq.com","/",-24),n.set("uin","",".qq.com","/",-24),this.isQQLowLogin(function(t){t&&(n.set("lskey","",".qq.com","/",-24),n.set("luin","",".qq.com","/",-24))}),(new Image).src="//video.qq.com/fcgi-bin/logout?_="+Math.random()},openWXLogin:function(t){t=t||window.location.href;var e="//video.qq.com/fcgi-bin/wx_login?from=1&redirect_url="+encodeURIComponent(t);document.location.href=e},getWXCookie:function(t){t=t||function(){};var e=this;s(function(){var n="//video.qq.com/getcookie/getcookie.html.html";if("qq.com"!==document.domain&&t({error:"document.domain不等于qq.com，跨域失败"}),e.cache.wxAuthCache)return void t(e.cache.wxAuthCache);e.wxCallbacks.push(t),window.txvGetLoginCookiesCallback=function(t){if(e.cache.wxAuthCache=t,setInterval(function(){e.cache.wxAuthCache=null},1e4),e.wxCallbacks&&e.wxCallbacks.length)for(var n;e.wxCallbacks.length;)n=e.wxCallbacks.shift(),"function"==typeof n&&n.call(e,t)};var i="tvp_login_cross_domin_frame",o=document.getElementById(i);o?e.cache.hasOwnProperty("wxAuthCache")&&(o.src=n):(o=document.createElement("iframe"),o.src=n,o.id=i,o.style.display="none",document.body.appendChild(o))})},isWXLogin:function(t){t=t||function(){};var e=this,n={};this.getWXCookie(function(i){return i&&i.access_token&&i.appid&&i.openid&&i.vuserid&&i.vusession&&i.refresh_token?void e.checkWXLogin(function(e){if(!e||e.errcode+""!="0")return void t(!1);if(e&&e.vuserid&&e.access_token){for(var o in i)n[o]=i[o];for(var o in e)n[o]=e[o];t(n)}else t(!1)}):void t(!1)})},checkWXLogin:function(t){t=t||function(){};var e="//video.qq.com/fcgi-bin/check_login",n=i.ajax({url:e,timeout:5e3,dataType:"jsonp"},function(e){t(e)},function(e){t(e)});n&&n.error&&t(n)},wxLogout:function(t){t=t||function(){};var e="//video.qq.com/fcgi-bin/logout";this.cache&&this.cache.wxAuthCache&&(this.cache.wxAuthCache=null);var n=i.ajax({url:e,dataType:"jsonp",timeout:5e3},function(e){t(e)},function(e){t(e)});n&&n.error&&t(n)},tenvideoJSReady:function(t){return t=t||function(){},"object"==typeof window.TenvideoJSBridge?void t():void document.addEventListener("onTenvideoJSBridgeReady",function(){t()},!1)},tvLogin:function(t,e){e=e||function(){},this.tenvideoJSReady(function(){TenvideoJSBridge.invoke("actionLogin",{type:t}),TenvideoJSBridge.on("onActionLoginFinish",e),TenvideoJSBridge.on("actionLoginFinish",e)})},tvLoginQQ:function(t){t=t||function(){},this.tvLogin("qq",t)},tvLoginWX:function(t){t=t||function(){},this.tvLogin("wx",t)},tvLoginTV:function(t){t=t||function(){},this.tvLogin("tv",t)},tvGetCookie:function(t,e){this.tenvideoJSReady(function(){TenvideoJSBridge.invoke("getCookie",{type:t},e)})},tvGetMainCookie:function(t){this.tenvideoJSReady(function(){TenvideoJSBridge.invoke("getMainCookie",null,t)})},tvGetUserInfo:function(t,e){this.tenvideoJSReady(function(){TenvideoJSBridge.invoke("getUserInfo",{type:t},e)})}};var l=new t;l.cookie=n,window.txvLogin=l}(),function(t,e){t.BasePlayer=function(){var n={};this.modId="",this.sessionId="",this.$mod=null,this.videomod=null,this.playerid="",this.curVideo=null,this.instance=null,this.dataset={},this.eventList=["ready","inited","play","playing","ended","allended","pause","resume","timeupdate","getnext","error","stop","fullscreen","change","write","flashpopup","getnextenable","msg","h5loadingadstart","h5loadingadend","volumechange","adplay"],this.config={},this.hijackFun=["getPlayer","getCurVideo","showPlayer","hidePlayer","play","pause","getPlaytime","setPlaytime","getPlayerType","resize"],this.prototype={},function(e){var n=["init","addParam","write","setPlayerReady"];n=n.concat(e.hijackFun);for(var i=0,o=n.length;o>i;i++)e.prototype[n[i]]=t.$.noop}(this),this.addParam=function(t,e){this.config[t]=e},this.on=function(t,i){t&&e.isFunction(i)&&(n[t]=e.isArray(n[t])?n[t]:[],n[t].push(i))},this.trigger=function(t){var i,o,a;if(t&&e.isArray(n[t]))for(o=0,a=n[t].length;a>o;o++)e.isFunction(n[t][o])&&(i=Array.prototype.slice.call(arguments,1),n[t][o].apply(null,i))},this.off=function(t,i){var o;t&&e.isArray(n[t])&&(i?(o=e.inArray(i,n[t]),o>=0&&(n[t][o]=void 0)):n[t]=void 0)}},t.BasePlayer.prototype={setCurVideo:function(t){this.curVideo=t},getPlayer:function(){return null},getCurVideo:function(){return this.curVideo},getCurVid:function(){return this.curVideo instanceof t.VideoInfo?this.curVideo.getVid():""},getCurVidList:function(){return this.curVideo instanceof t.VideoInfo?this.curVideo.getVidList():""},init:function(n){e.extend(this.config,n);for(var i=0,o=this.eventList.length;o>i;i++){var a="on"+this.eventList[i];this[a]=e.isFunction(this.config[a])?this.config[a]:t.$.noop}this.setCurVideo(this.config.video),this.write(this.config.modId)},write:function(t){e("#"+t).html("here is player of base")},log:function(t){window.console&&window.console.log(t)},getCBEvent:function(n){var i;return this.instance&&e.isFunction(this.instance[n])&&this.instance[n]!=t.$.noop?i=this.instance[n]:e.isFunction(this[n])&&this[n]!=t.$.noop&&(i=this[n]),i},callCBEvent:function(t){var n=this.getCBEvent(t);if(e.isFunction(n)){var i=Array.prototype.slice.call(arguments,1);return n.apply(this,i)}return void 0},resize:function(t,n){var i=this.getPlayer();i&&(i.style.width=e.formatSize(t),i.style.height=e.formatSize(n))},showPlayer:function(){},hidePlayer:function(){},execFlashMethod:function(t){var e,n=this.getPlayer(),i=[];if(n&&n[t]){i=[].slice.call(arguments,1);try{return e=n[t].apply(n,i)}catch(o){}}}}}(tvp,tvp.$),function(t,e){t.html5lang={errMsg:{"default":"视频加载失败，请刷新页面重试",0:"视频加载失败",68:"视频加载失败，请刷新页面重试","-1":"请刷新页面重试","-2":"请刷新页面重试","-3":"请刷新页面重试","-4":"请刷新页面重试","-6":"请刷新页面重试","-7":"请刷新页面重试",50:"视频加载失败，请刷新页面重试",52:"视频加载失败，暂无法观看",64:"视频加载失败，暂无法观看",51:"视频加载失败，暂无法观看",61:"当前视频已下架，暂无法观看",62:"当前视频不存在，暂无法观看",63:"视频加载失败，暂无法观看",65:"视频加载失败，暂无法观看",67:"视频加载失败，暂无法观看",69:"视频加载失败，暂无法观看",71:"视频加载失败，暂无法观看",73:"视频加载失败，暂无法观看",74:"视频加载失败，暂无法观看",76:"视频加载失败，请刷新页面重试",77:"视频加载失败，请刷新页面重试",80:{0:"因版权限制,请到腾讯视频观看",1:"很抱歉，当前IP地址所在地区暂不支持播放",2:"因版权限制，暂不支持播放",callback:function(e,n,i){if(0==parseInt(n)&&t.app&&i&&i.vid){var o=t.html5skin.errorDownloader;t.app.check(i).done(function(t){if(t.url){var n=e.find(".tvp_player_error_content");n=e;var i=e.find(".text").html();i=i.substr(0,i.indexOf("(")),o?(i=o.replace("${errorMsg}",i),i=i.replace("${url}",t.url)):i='<a href="'+t.url+'">'+i+"</a>",n.length&&n.html(i)}})}}},81:"视频加载失败，暂无法观看",82:"视频加载失败，暂无法观看",83:{main:"该片为付费视频，请前往腾讯视频观看","-2":"请登录后观看","-1":"视频加载失败，暂无法观看","-3":"该片为数字音乐专辑独家视频，请前往QQ音乐支持购买后查看"},84:"很抱歉，根据您的IP地址，暂无法播放",85:{main:"视频加载失败，请刷新页面重试","-1":"视频加载失败，请刷新页面重试","-2":"视频加载失败，请刷新页面重试","-3":"视频加载失败，请刷新页面重试","-4":"视频加载失败，请刷新页面重试","-5":"视频加载失败，请刷新页面重试","-6":"视频加载失败，请刷新页面重试"},86:"视频加载失败，请刷新页面重试",500:{main:"视频加载失败，请刷新页面重试",1:"视频加载失败，请刷新页面重试",2:"视频加载失败，请刷新页面重试"}},getErrMsg:function(n,i){if(isNaN(n))return"";if(n in t.html5lang.errMsg){var o=t.html5lang.errMsg[n];if(0===n&&"-"+i in t.html5lang.errMsg&&(o+="，"+t.html5lang.errMsg["-"+i]),e.isString(o))return o;if(e.isPlainObject(o)){var a;return a=i in o?o[i]:o.main,a||t.html5lang.errMsg["default"]}}return t.html5lang.errMsg["default"]},definition:{mp4:"高清",msd:"流畅"},srtLang:{50001:{srclang:"zh-cn",desc:"简体中文"},50002:{srclang:"zh-cn",desc:"简体中文"},50003:{srclang:"zh-tw",desc:"繁体中文"},50004:{srclang:"en",desc:"英文"},50005:{srclang:"zh-cn,en",desc:"简体中文&英文"},50006:{srclang:"zh-tw,en",desc:"繁体中文&英文"}},durationLimit:{msg:"5分钟看的不够爽？腾讯视频有高清完整版，等你来看~",padMsg:"本节目只提供5分钟预览。腾讯视频客户端可以观看高清完整版，等你喔~",download:"下载APP",padPlay:"立即播放",play:"继续播放",replay:"重新播放",open:"去看完整版"},liveDownloader:{downloadText:"下载腾讯视频，观看视频直播",openText:"打开腾讯视频，观看视频直播"},getDefiName:function(e){return e in t.defaultConfig.definition?t.defaultConfig.definition[e]:""},getSrtName:function(e){return e in t.html5lang.srtLang?t.html5lang.srtLang[e].desc:""}}}(tvp,tvp.$),tvp.html5skin={defaultError:function(){return[' <div class="tvp_player_error" id="$ERROR-TIPS-INNER$">','   <div class="tvp_error_inner">','     <div class="tvp_error_title">$ERROR-MSG$</div>','     <div class="tvp_error_desc">$ERROR-DETAIL$</div>','     <a href="javascript:;" data-role="error-refresh" class="tvp_btn_simple tvp_none">刷新</a>',"  </div>"," </div>"].join("")}(),errorDownloader:function(){return['<div class="tvp_live_download_app">','	<a class="tvp_download_app_inner" href="${url}">','		<i class="tpv_icon_download"></i>','		<span class="tvp_icon_text">${errorMsg}</span>',"	</a>","</div>"].join("")}(),durationLimit:function(){return['<div style="display:none" class="tvp_limit_tips" data-role="durationLimit">','   <div class="tvp_limit_tips_inner">','		<div class="tvp_tips_content">','			<p class="tvp_tips_text">${msg}</p>',"		</div>",'		<div class="tvp_btn_line">','			<span data-role="durationLimit-play" class="tvp_btn tvp_btn_try">${play}</span>','			<span  data-role="durationLimit-replay" class="tvp_btn tvp_btn_try">${replay}</span>','			<a data-action="applink" ${iframe} href="${url}" data-url="" data-role="durationLimit-download" class="tvp_btn tvp_btn_download">${download}</a>','			<a data-action="applink" href="" data-url="" data-role="durationLimit-open" class="tvp_btn tvp_btn_download">${open}</a>',"		</div>","	</div>","</div>"].join("")}(),durationLimit_v2_case1:function(){return['<div data-role="tvp-limit-case1" class="tvp_none">','<div class="tvp_layer_replay tvp_none" data-role="tvp-limit-replay">','<div class="tvp_overlay_replay">','<span class="tvp_button_replay"></span>','<span class="tvp_text" data-role="tvp-limit-replay-text">${replayText}</span>',"</div>","</div>",'<div class="tvp_overlay_play_try tvp_none" data-role="tvp-limit-play">','<span class="tvp_button_play"></span>','<span class="tvp_text" data-role="tvp-limit-play-text">${playText}</span>',"</div>",'<div class="tvp_app_banner tvp_none" data-role="tvp-limit-download">','<a data-role="tvp-limit-download-btn" href="javascript:;" class="tvp_app_btn" data-status="down">','<span class="tvp_progress">','<span class="tvp_progress_current"></span>',"</span>",'<span data-role="tvp-limit-download-text" class="tvp_text" data-text="${download}"></span>',"</a>","</div>",'<div class="tvp_app_badge tvp_none" data-role="tvp-limit-timing">','<a href="javascript:;" data-role="tvp-limit-timing-btn" class="tvp_app_btn" data-status="down">','<span class="tvp_progress"><span class="tvp_progress_current"></span></span>','<span class="tvp_text" data-text="还剩" data-role="tvp-limit-timing-text"></span>',"</a>","</div>","</div>"].join("")}(),durationLimit_v2_case2:function(){return['<div class="tvp_external_layer tvp_none" data-role="tvp-limit-case2">','<div class="tvp_external_inner">','<div class="tvp_overlay_play_try" data-role="tvp-limit-play">','<span class="tvp_button_play"></span>','<span class="tvp_text" data-role="tvp-limit-play-text">${playText}</span>',"</div>",'<div class="tvp_layer_replay tvp_none" data-role="tvp-limit-replay">','<div class="tvp_overlay_replay">','<span class="tvp_button_replay"></span>','<span class="tvp_text" data-role="tvp-limit-replay-text">${replayText}</span>',"</div>","</div>",'<div class="tvp_app_banner tvp_none" data-role="tvp-limit-download">','<a href="javascript:;" class="tvp_app_btn" data-status="down" data-role="tvp-limit-download-btn">','<span class="tvp_progress"><span class="tvp_progress_current"></span></span>','<span data-role="tvp-limit-download-text" class="tvp_btn_text" data-text="${download}"></span>',"</a>","</div>","</div>","</div>",'<div class="tvp_app_badge tvp_none" data-role="tvp-limit-timing">','<a data-role="tvp-limit-timing-btn" href="javascript:;" class="tvp_app_btn" data-status="down">','<span class="tvp_text" data-text="还剩" data-role="tvp-limit-timing-text"></span>',"</a>","</div>"].join("")}(),durationLimit_v2_case3:function(){return['<div class="tvp_app_badge tvp_none" data-role="tvp-limit-case3">','<a data-role="tvp-limit-timing-btn" href="javascript:;" class="tvp_app_btn" data-status="down">','<span class="tvp_progress"><span class="tvp_progress_current"></span></span>','<span data-role="tvp-limit-timing-text" class="tvp_text" data-text="${timingText}"></span>',"</a>","</div>"].join("")}(),liveDownloader:function(){return['<div class="tvp_player_error">','<div class="tvp_error_inner">','<div class="tvp_error_title" data-role="tvp_errormsg">${msg}</div>','<a data-role="tvp_err_refresh" href="javascript:;" class="txvp_error_refresh tvp_none" onclick="location.reload();">点击刷新</a>','<div class="tvp_error_code">错误代码：<span data-role="tvp_errrocode">${code}</span></div>','<a data-role="tvp_error_btn" href="javascript:;" class="tvp_btn_normal">${btnText}</a>',"</div>","</div>"].join("")}(),follow:function(){return['<a class="tvp_follow" data-role="appfollow_followbtn" data-follow="follow">','<span class="tvp_icon_follow"></span>','<span class="tvp_icon_text" data-role="appfollow_followtext">关注</span>',"</a>",'<div class="tvp_follow_hint">','<div class="tvp_hint_title">关注成功！</div>','<div class="tvp_hint_desc" data-role="bannerText">{FOLLOWTEXT}</div>',"</div>"].join("")}()},function(t,e){t.BaseHtml5||(t.BaseHtml5=function(){this.protectedFn={},this.h5EvtAdapter={},this.eventList=this.eventList.concat(["html5error"]),this.html5AttrList={autoplay:"autoplay","x-webkit-airplay":"isHtml5UseAirPlay","webkit-playsinline":"isiPhoneShowPlaysinline",preload:"html5Preload",loop:"html5loop"},this.$videomod=null},t.BaseHtml5.fn=t.BaseHtml5.prototype=new t.BasePlayer,e.extend(t.BaseHtml5.fn,{getPlayer:function(){return this.videoTag},getPlayerType:function(){return"html5"},createVideoHtml:function(){this.playerid=this.config.playerid,this.playerid||(this.playerid="tenvideo_video_player_"+t.BaseHtml5.maxId++);var n=['<video id="',this.playerid,'" width="100%" height="100%" '].join(""),i=this;this.config.isHtml5UseUI&&(e.os.iphone||e.os.ipod)&&this.config.isIOSVideoOffset&&!this.config.isiPhoneShowPlaysinline&&(n+='style="position:absolute;top:-200%;left:-200%"'),this.config.isHtml5UseUI&&this.config.isHtml5ShowPosterOnStart&&e.os.android&&(n+=e.browser.UC?'style="position:absolute;left:-200%;"':'style="position:absolute;top:-200%;"',setTimeout(function(){if(i.videoTag&&1==i.$video.size()){var t=!1;i.$video.one("playing",function(){t||(t=!0,i.videoTag.style.cssText="")}).one("tvp:h5ui:playbtn:click",function(){t||(t=!0,i.videoTag.style.cssText="")})}},100));for(var o in this.html5AttrList){n+=" ";var a=this.html5AttrList[o],r="";if(""==a)r="";else{if(!(a in this.config))continue;r=this.config[a]}r!==!1&&"disabled"!=r&&0!==r&&("autoplay"==o&&this.config.isHtml5ShowLoadingAdOnStart||(n+=o,"autoplay"!=o||1!=r?""!=r&&(n+=["=",r].join("")):n+='="autoplay"'))}if(!this.isUseControl&&e.os.iphone&&!this.config.isiPhoneShowPlaysinline){var s=this.config.html5ForbiddenUIFeature.join("-");s.indexOf("controlbar")>-1&&(this.isUseControl=!0)}this.isUseControl&&(n+=" controls ");var l=this.curVideo.getPoster();return e.isString(l)&&l.length>0&&-1==e.inArray("posterlayer",this.config.html5VodUIFeature)&&(n+=" poster='"+l+"'"),l||!this.config.pic||this.config.isHtml5UseUI||(n+=" poster='"+this.config.pic+"'"),n+="></video>"},write:function(n){var i=null;if("object"==e.type(n)&&1==n.nodeType?(i=n,this.$mod=e(n),this.modId=this.$mod.attr("id")||""):(i=t.$.getByID(n),this.modId=n,this.$mod=e("#"+n)),i){var o=this.createVideoHtml(),a="mod_"+this.playerid;i.innerHTML='<div id="'+a+'" class="tenvideo_player">'+o+"</div>",this.videomod=e.getByID(a),this.$videomod=e(this.videomod),this.$videomod.width(e.formatSize(this.config.width)).height(e.formatSize(this.config.height)),this.videoTag=e.getByID(this.playerid),this.$video=e(this.videoTag),this.registerMonitor(),this.bindEventAdapt(),this.checkPlayerSize()}},checkPlayerSize:function(){function t(){e.isFullScreen||setTimeout(function(){var t=e.config.width,i=e.config.height,o=parseInt(n.width(),10),a=parseInt(n.height(),10);i.toString().indexOf("%")>-1||a>o&&(a=parseInt(9*o/16,10),o=t,e.resize(o,a))},100)}var e=this,n=this.$videomod?this.$videomod:this.$elements;this.config.isCheckPlayerSize&&n&&(t(),window.addEventListener("onorientationchange"in window?"orientationchange":"resize",function(){t()},!1))},resize:function(t,n){this.config.width=t,this.config.height=n;var i=this.$videomod?this.$videomod:this.$elements;i&&(i.width(e.formatSize(t)).height(e.formatSize(n)),i&&i.trigger&&i.trigger("tvp:resize"))},showError:function(n,i,o){var a=this;setTimeout(function(){if(!a.videoTag||a.videoTag.paused){var r=a.getCBEvent("showError");if(e.isFunction(r)&&r!=a.showError)r.call(a,n,i,o);else if(e.isFunction(a.config.showError))a.config.showError.call(a,n,i,o);else{var s=t.html5skin.defaultError,l=a.playerid+"_errtips_inner",d="错误码:"+n,c=i||0==i?"_"+i:"";t.html5lang.errMsg[n]&&t.html5lang.errMsg[n].nocode&&(c=""),o=o||t.html5lang.getErrMsg(n,i),s=s.replace("$ERROR-TIPS-INNER$",l).replace("$ERROR-MSG$",o).replace("$ERROR-DETAIL$","("+d+c+")");var p=e(a.$UILayer),u=e(e.trim(s)).appendTo(p).show();p&&0!==p.length||(p=e(a.videomod),p.html('<div class="tvp_container tvp_controls_hide"></div>'),p=p.find(".tvp_container")),u.appendTo(p),o.indexOf("刷新")>-1&&p.find('[data-role="error-refresh"]').removeClass("tvp_none").on("click touchend",function(){window.location.reload()});try{t.html5lang.errMsg[n]&&t.html5lang.errMsg[n].callback&&t.html5lang.errMsg[n].callback(u,i,{vid:a.curVideo.getVid()})}catch(f){}}}},250),this.callCBEvent("onerror",n,i)},isUseH5UIFeature:function(t){return e.inArray(t,this.config.html5VodUIFeature)>=0},isForbiddenH5UIFeature:function(t){return e.inArray(t,this.config.html5ForbiddenUIFeature)>=0},callProtectFn:function(t){e.isFunction(this.protectedFn[t])&&this.protectedFn[t].call(this)},registerMonitor:function(){e.isFunction(this.buildmonitor)&&this.buildmonitor.call(this)},bindEventAdapt:function(){var t=["-empty","-abort","-loadstart","-can-play","-can-play-through","-loaded-data","-loaded-metadata","-abort","-error","-pause","-paused","-waiting","-stalled","-suspend","-play","-volume-change","-playing","-seeked","-seeking","-duration-change","-progress","-rate-change","-timeupdate","-ended"],n=this;e.each(t,function(t,i){var o="on"+e.camelCase(i),a=n.h5EvtAdapter[o];(window.DEBUG||e.isFunction(a))&&n.$video.on(i.replace(/-/g,""),function(t){var i=n.h5EvtAdapter[o];e.isFunction(i)&&i.call(n,this,t)})})}}),t.BaseHtml5.maxId=0)}(tvp,tvp.$),function(t,e){function n(){return e.os.android&&!s&&!e.os.HTC&&!e.os.VIVO&&e.os.version>="4.0"&&!(e.browser.AndriodBrowser&&e.browser.version<"30")&&0!==navigator.userAgent.indexOf("ZTE U930")}function i(){}function o(n,i){this.videoTag=null,this.$video=null,this.config.width=t.$.filterXSS(n),this.config.height=t.$.filterXSS(i),this.protectedFn={},this.isUseControl=!0,e.extend(this.h5EvtAdapter,{onEnded:function(){if(!this.isPlayingLoadingAd()&&!this.isPlayingSplit){this.$video&&this.$video.trigger&&this.$video.trigger("tvp:player:ended"),this.callCBEvent("onended",a);var n="",i=this.curVideo.getVidList().split("|"),o=e.inArray(a,i);if(o>-1&&o<i.length-1&&(n=i[o+1]),""!==n)return void this.play(n);this.callCBEvent("onallended"),this.$video&&this.$video.trigger&&this.$video.trigger("tvp:player:allended"),this.config.isHtml5ShowPosterOnEnd&&this.setPoster();var r=this.callCBEvent("ongetnext",a,this.curVideo);r&&r instanceof t.VideoInfo&&this.play(r)}},onError:function(n,i){var o=this;if(t.report({cmd:3525,appId:this.config.appid,contentId:this.config.contentId,vid:this.curVideo.lastQueryVid,str4:navigator.userAgent}),i.target.currentSrc.indexOf(".m3u8")>0&&(t.debug("play hls error,reload play mp4..."),o.dataset.hlsIndex||(o.dataset.hlsIndex=1),o.curVideo.dataHls&&"array"===e.type(o.curVideo.dataHls)&&o.curVideo.dataHls.length>1&&o.curVideo.dataHls[o.dataset.hlsIndex]&&0===o.curVideo.dataHls[o.dataset.hlsIndex].indexOf("http")&&o.$video&&(o.$video.attr("src",o.curVideo.dataHls[o.dataset.hlsIndex]),o.$video[0]&&o.$video[0].load)))return o.$video[0].load(),void o.$video[0].play();var a=-1;i.target&&i.target.error&&(a=i.target.error.code),4==a&&this.showError(0,a)},onPlaying:function(){var t=this;this.callCBEvent("onplaying",a,this.curVideo),this.isShowingDurationLimit()&&this.pause(),setTimeout(function(){t.isPlayingLoadingAd()||t.isPlayingSplit||t.goOnPlaying()},50)},onTimeupdate:function(){this.callCBEvent("ontimeupdate",a,this.$video),e.isFunction(this.setGoOnPlayingTime)&&this.setGoOnPlayingTime()},onPause:function(){e.os.android&&this.config.isHtml5UseUI&&this.$video.addClass("tvp_video_with_skin"),this.callCBEvent("onpause",a,this.$video),t.bossReport.user_action_report({actions:"pause",vid:a})}})}if(!t.Html5Tiny){var a="",r=null,s=!1;o.fn=o.prototype=new t.BaseHtml5,e.extend(o.prototype,{registerPlugins:function(){var n=this,i=[];e.each(i,function(i,o){try{var a="build"+o;e.isFunction(n[a])&&n[a](n)}catch(r){t.debug("[registerPlugins]:"+r.message)}})},write:function(o){t.BaseHtml5.prototype.write.call(this,o);var a=this,r=t.$("#"+o);r&&window===top&&r.height()===window.innerHeight&&r.width()===window.innerWidth&&window.innerHeight>=window.innerWidth&&e("#"+o+" .tvp_overlay_poster").addClass("tvp_overlay_poster_auto"),this.config.specialVideoFileDomain&&t.h5Helper&&e.isFunction(t.h5Helper.setSpecialVideoFileDomain)&&t.h5Helper.setSpecialVideoFileDomain(this.config.specialVideoFileDomain),this.registerPlugins(),this.callProtectFn("onwrite"),this.play(this.curVideo,this.config.autoplay),this.$video.one("timeupdate",function(){n()&&i(a.videoTag,a)}),e.os.android&&e.browser.WeChat&&this.$video.one("click",function(){this.load()}),this.init_report_playtime()},init_report_playtime:function(){if(!this.has_report_playtime&&!this.isPlayingSplit){this.has_report_playtime=!0;var t,n,i,o,a=0,r=this,s="tvp_report_h5_playtime",l=e.getData(s),d=this.$video[0],c=this.curVideo.getVid(),p=function(){return e.isFunction(r.isPlayingLoadingAd)&&r.isPlayingLoadingAd()?!0:!1};this.$video.on("pause",function(){p()||f()}).on("playing",function(){setTimeout(function(){p()||(f(),u())},100)}).on("ended",function(){if(!p()){var t=parseInt(d.currentTime);h(c,a,t),f()}});var u=function(){f(),o=setInterval(function(){a+=5;var t=c+"|"+a,n=parseInt(d.currentTime);n&&(t+="|"+n),e.setData(s,t)},5e3)},f=function(){o&&clearInterval(o),o=null},h=function(t,n,i){r.report_playtime({vid:t,ptime:n,currentTime:i}),e.setData(s,0)};l&&l.indexOf("|")>-1&&(l=l.split("|"),t=l[0],n=l[1],i=l[2],h(t,n,i))}},report_playtime:function(n){var i={ptime:n.ptime,url:n.url||top.location.href,platform:t.common.getDeviceId(),ctime:n.currentTime,vid:n.vid,pagetype:t.app&&t.app.pageType?t.app.pageType:0,host:top.location&&top.location.hostname?top.location.hostname:window.location.hostname},o=new Image,a="http://btrace.video.qq.com/kvcollect?BossId=2803&Pwd=524422958&_dc="+Math.random();a+="&"+e.param(i),o.src=a}}),e.extend(o.prototype,{pause:function(){this.videoTag.pause()},getCurVid:function(){return""===a?this.curVideo instanceof t.VideoInfo?this.curVideo.getVid():"":a},play:function(n,i,o){function r(o){o=!!o,s.$video&&s.$video.trigger&&s.$video.trigger("tvp:video:ajaxstart",n instanceof t.VideoInfo?n.getVid():n,o);var l,d,c=o?s.curVideo.getHLS:s.curVideo.getMP4Url,p=s.curVideo.getVid();s.curVideo&&p&&(s.curVideo.defer_cache||(s.curVideo.defer_cache={ad:{},vd:{}}),!o&&s.curVideo.callGetMp4UrlDefer&&s.curVideo.callGetMp4UrlDefer.done(function(t){t&&e.isFunction(t.done)&&(s.curVideo.defer_cache.vd[p]=t,s.curVideo.callGetMp4UrlDefer=null)}),s.curVideo.defer_cache.vd[p]||(s.curVideo.defer_cache.vd[p]=c.call(s.curVideo,n,s.isPlayingSplit)),s.curVideo.defer_cache.ad[p]||(s.curVideo.defer_cache.ad[p]=e.Deferred()),t.Html5UI&&e.isFunction(t.Html5UI.fn.buildloadingAd)&&s.config.isHtml5UseUI&&(s.config.isHtml5ShowLoadingAdOnStart||s.config.isHtml5ShowLoadingAdOnChange)?(s.$video.attr("tvp_loadingad_ended",1),s.$video.off("tvp:loadingad:ended").on("tvp:loadingad:ended",function(t,n){var i=n.vid||"";if(i){if(!s.curVideo.defer_cache.vd[i])return void(l?(s.videoTag.src=l,s.videoTag.load(),s.$video.trigger("overlay_ctrl_showloading"),s.videoTag.play()):(s.curVideo.defer_cache.ad[i]=e.Deferred(),s.curVideo.defer_cache.ad[i].resolve()));l&&d(l,s.config.autoplayAfterLoadingad&&!n.emptyAd),s.curVideo.defer_cache.ad[i]||(s.curVideo.defer_cache.ad[i]=e.Deferred()),s.curVideo.defer_cache.ad[i].resolve()}})):s.curVideo.defer_cache.ad[p].resolve(),s.curVideo.defer_cache.vd[p].done(function(e){if(l=e,s._isInited||(s._isInited=!0,s.callCBEvent("oninited")),s.$video&&s.$video.trigger&&s.$video.trigger("tvp:video:ajaxsuc",e),s.config.isShowDurationLimit)try{t.html5DurationLimit.create(s)}catch(n){}var i=s.getCurVideo();i.data&&i.data.vl&&i.data.vl.vi&&i.data.vl.vi.length&&i.data.vl.vi[0]&&i.data.vl.vi[0].fs&&s.$video.trigger("tvp:overlay:update:filesize",i.data.vl.vi[0].fs)}),d=function(t,n){s.$UILayer&&"function"===e.type(s.$UILayer.find)&&s.$UILayer.find(".tvp_player_error").remove(),s.curVideo.defer_cache.vd[p]=null,s.curVideo.defer_cache.ad[p]=null,n="undefined"==typeof n?!1:n,e.os.android&&e.browser.wechat&&(t+="&nocache=1&time="+(new Date).getTime()),s.isGetingInfo=!1,!e.browser.WeChat&&"setAttribute"in s.videoTag?s.videoTag.setAttribute("src",t):s.videoTag.src=t,s.$video&&s.$video.trigger&&s.$video.trigger("tvp:video:src"),s._isInited||(s._isInited=!0,s.callCBEvent("oninited")),s.callCBEvent("onplay",s.curVideo.lastQueryVid,s.curVideo),(i||n)&&(s.videoTag.load(),s.$video.trigger("overlay_ctrl_showloading"),s.videoTag.play());var o=s.curVideo.getTagStart()||s.curVideo.getHistoryStart()||0;o>0&&s.seek(o)},e.when(s.curVideo.defer_cache.vd[p],s.curVideo.defer_cache.ad[p]).done(function(t){t=t||l,s.$UILayer&&s.$UILayer.find(".tvp_player_error").remove(),d(t)}).fail(function(e,n){return o?(t.debug("get hls url fail,reload mp4..."),void r(!1)):(s._isInited||(s._isInited=!0,s.callCBEvent("oninited")),s.$video&&s.$video.trigger&&s.$video.trigger("tvp:video:ajaxerror"),s.$video&&s.$video.trigger&&s.$video.trigger("tvp:video:error",e,n),s.showError(e,n),void(s.isGetingInfo=!1))}).always(function(){a=s.curVideo.lastQueryVid}))}var s=this,l=!1;if(t.Html5Player&&!(s instanceof t.Html5Player)&&s.instance&&s.instance instanceof t.Html5Player&&(s=s.instance),e.isUndefined(i)&&(i=!0),e.isUndefined(o)&&(o=this.config.isHtml5UseHLS),!n&&s.videoTag.src)return s.videoTag.currentTime||s.videoTag.load(),void s.videoTag.play();if(n instanceof t.VideoInfo){if(l=s.curVideo._vidBeforeChange?s.curVideo._vidBeforeChange===n.getVid()?!1:!0:!1,s.isPlayingSplit&&s._isInited&&s.getCurVid()===n.getVid())return;if(s.dataset&&(s.dataset.isVidChange=l),s.setCurVideo(n),s.curVideo._vidBeforeChange=n.getVid(),l&&(s.callCBEvent("onchange",s.curVideo.getFullVid()),this.$video&&this.$video.trigger&&this.$video.trigger("tvp:player:videochange"),e.os.iphone))try{s.videoTag.pause(),s.videoTag.play()
}catch(d){}n.setPid(e.createGUID()),a=s.curVideo.getFullVid()}s.config.isHtml5ShowPosterOnChange&&s.setPoster(),s.isGetingInfo=!0;try{s.videoTag.pause()}catch(d){}var c=!1;"auto"===o?t.common.isUseHLS()?t.h5Helper.loadIsUseHLS({vid:a}).done(function(t){c=3==t}).fail(function(){c=!1}).always(function(){r.call(s,c)}):(c=!1,r.call(s,c)):(c=o,r.call(s,c))},goOnPlayingHandler:function(t,n,i){var o,a="tvp_goonplaying_time",r=5,s={},l=e.getData(a);if(l)try{l=JSON.parse(l)}catch(d){}return"object"!=typeof l&&(l=[]),l.length>r&&l.shift(),e(l).each(function(t,n){if("string"===e.type(n)){var i=n.split("|");i&&2===i.length&&(s[i[0]]=i[1])}}),l=s,s=null,o=function(){s=[];for(var t in l)s.push(t+"|"+l[t]);e.setData(a,JSON.stringify(s))},"get"===t?l[n]:void("del"===t?(l[n]=null,delete l[n],o()):"set"===t&&(l[n]=i,o()))},setGoOnPlayingTime:function(){if(!this.isPlayingSplit&&this.config.isContinuePlay){var t=this.getCurTime(),e=this.getDuration(),n=this.getCurVid();if(t=parseInt(t,10),e=parseInt(e,10),!(5>t||this.isPlayingLoadingAd()||this._currentTime&&this._currentTime===t))return this._currentTime=t,5>e-t?void this.goOnPlayingHandler("del",n):void(0!==t&&t%3===0&&this.goOnPlayingHandler("set",n,t))}},goOnPlaying:function(){if(!this.isPlayingSplit&&this.config.isContinuePlay&&!(this.getCurTime()>3||this.hasShowGoOnPlaying)){var t=this.getCurVid(),e=this,n=this.goOnPlayingHandler("get",t),i=this.$mod.find('[data-role="xubo-banner"]'),o=this.$mod.find('[data-role="xubo-text"]'),a=o.html(),r={};if(n){n=parseInt(n),this.seek(n);var s=function(){a&&(e.hasShowGoOnPlaying=!0,r.min=parseInt(n/60),r.sec=parseInt(n%60),a=0!=r.min?a.replace("{$min}",r.min+"分"):a.replace("{$min}",""),a=0!=r.sec?a.replace("{$sec}",r.sec+"秒"):a.replace("{$sec}",""),o.html(a),i.removeClass("tvp_none"),setTimeout(function(){i.addClass("tvp_none")},3e3))};s()}}},seek:function(t){if(!isNaN(t)){t=Math.min(t,this.getDuration()-5),t=Math.max(t,0);var e=this,n=null;n&&(clearTimeout(n),n=null);var i=this.videoTag.seekable;1==i.length&&t<i.end(0)?this.seekTo(t):n=setTimeout(function(){e.seek(t)},100)}},seekTo:function(t){var e=this;try{this.videoTag.currentTime=t,this.videoTag.paused&&this.videoTag.play()}catch(n){this.$video.one("canplay",function(){e.videoTag.currentTime=t,e.videoTag.paused&&e.videoTag.play()})}},getCurTime:function(){return this.videoTag.currentTime},getPlaytime:function(){return this.getCurTime()},setPlaytime:function(t){this.seek(t)},checkIsPlayingLoop:function(t){t=t||0;var e=this;this.playinglooptimer&&clearTimeout(this.playinglooptimer),0===this.videoTag.currentTime&&30>=t&&(this.videoTag.load(),this.videoTag.play(),this.playinglooptimer=setTimeout(function(){e.checkIsPlayingLoop(++t)},1e3))},setPoster:function(){var t=this.curVideo.getPoster();t||!this.config.pic||this.config.isHtml5UseUI||(t=this.config.pic),e.isString(t)&&t.length>0?this.videoTag.poster=t:this.hidePoster()},hidePoster:function(){this.videoTag.removeAttribute("poster")},getDuration:function(){var t=this.curVideo.getDuration();return!isNaN(t)&&t>0?t:this.videoTag.duration},getFileSize:function(){var t="function"==typeof this.curVideo.getFileSize?this.curVideo.getFileSize():0;return!isNaN(t)&&t>0?t:0},checkPause:function(){var t=[],e=this;r=setInterval(function(){e.videoTag.paused||(t.push(e.videoTag.currentTime),t.length>=2&&(0==Math.abs(t[0]-t[1])?(r&&clearInterval(r),t=[],e.videoTag.load(),e.videoTag.play()):r&&clearInterval(r),t=[]))},500)},isPlayingLoadingAd:function(){var t=1==this.$video.attr("data-playing-loadingad")||1==this.$video.attr("data-playing-adonend");return t},isPlayingFrontAd:function(){return 1==this.$video.attr("data-playing-loadingad")},isPlayingEndAd:function(){return 1==this.$video.attr("data-playing-adonend")},isShowingDurationLimit:function(){return this.hasDurationLimit()&&this.DurationLimitInstance.isShow},hasDurationLimit:function(){return this.DurationLimitInstance=this.DurationLimitInstance||this.instance&&this.instance.DurationLimitInstance,this.config.isShowDurationLimit&&this.DurationLimitInstance&&this.DurationLimitInstance.enable}}),t.Html5Tiny=o}}(tvp,tvp.$),function(t,e){function n(e,n){var i={cmd:3543,vid:e.curVideo.getChannelId(),contentId:e.config.contentId,appId:e.config.appid,int5:t.common.isLiveUseHTML5()?1:0,int6:n,str8:navigator.userAgent};t.report(i)}function i(){var n={cmd:2,qq:t.common.getUin(),guid:encodeURIComponent(t.$.createGUID()),txvjsv:"2.0",stream:2},i={debug:"",ip:""};return e.each(i,function(t){i[t]=e.getUrlParam(t)}),e.extend(n,i),e.os.windows&&(n.system=0),(e.os.iphone||e.os.ipod)&&(n.system=1,n.sdtfrom=113),e.os.ipad&&(n.sdtfrom=213),e.os.android&&(n.system=2,n.sdtfrom=313),e.os.mac&&(n.system=3),n}function o(e,n){t.livehub&&t.livehub.stepReport&&t.livehub.stepReport(e,n)}function a(){var e=this;this.$video.off("tvp:loading:livereport").on("tvp:loading:livereport",function(n,i){var o;i&&(o=i.step),o&&t.bossReport.h5_live_quality({step:o,playno:l,sid:e.curVideo.getChannelId(),guid:c,vurl:e.$video&&e.$video.attr&&e.$video.attr("src"),vdef:e.rs_cache&&e.rs_cache.defn,tpay:e.rs_cache&&e.rs_cache.ispay,cpay:e.rs_cache&&e.rs_cache.isuserpay})})}function r(i,o){this.config.width=t.$.filterXSS(i),this.config.height=t.$.filterXSS(o),this.videoTag=null,this.$video=null,this.protectedFn={},this.isUseControl=!0,e.extend(this.h5EvtAdapter,{onPlay:function(){this.report_time={onplay:(new Date).valueOf()}},onPlaying:function(){var i=this;this.callCBEvent("onplaying",this.curVideo.getChannelId(),this.curVideo),this.hasReportCanPlayHls||(this.hasReportCanPlayHls=!0,n(i,1)),setTimeout(function(){var n=!1;i.$video&&"function"===e.type(i.$video.attr)&&(n="1"===i.$video.attr("data-playing-loadingad")?!0:!1),i.hasReportH5Live||n||(i.hasReportH5Live=!0,i.report_time.onplaying=(new Date).valueOf(),i.report_h5_live({firstload:(i.report_time.onplaying-i.report_time.onplay)/1e3,firstreport:1,playno:l,blocktime:0,block:0,prd:0}),i.report_event(),t.bossReport.h5_live_quality({step:6,playno:l,sid:i.curVideo.getChannelId(),guid:c,vurl:this.$video&&this.$video.attr&&this.$video.attr("src"),vdef:i.rs_cache&&i.rs_cache.defn,tpay:i.rs_cache&&i.rs_cache.ispay,cpay:i.rs_cache&&i.rs_cache.isuserpay}))},100)},onError:function(i,o){function a(t){var n=[2,3,4,6,25,28,50,"video_1","video_2","video_3","video_4"];return e.inArray(t,n)>-1?!0:!1}i=i||{};var r=this;n(r,0);var s=-1,d=r.getCurVideo();o&&o.target&&o.target.error&&(s=o.target.error.code);var c;if(i&&i.hasOwnProperty("iretcode")?c=i.iretcode:-1!==s&&(c="video_"+s),this.report_h5_live({errcode:s,playno:l}),a(c)&&(r.onerrorRetryTimes||(r.onerrorRetryTimes=0),r.onerrorRetryTimes++,r.onerrorRetryTimes<4))return void r.play(d,!0);e.each(t.html5LiveFrontShow.plugins,function(t,e){if("liveDownloader"==e.name){var n;d&&(n=d.getChannelId()),new e.key(r,{code:c,msg:i.errinfo,lid:n})}});var p=i.errinfo;if(!p){var u={video_1:"MEDIA_ERR_ABORTED",video_2:"MEDIA_ERR_NETWORK",video_3:"MEDIA_ERR_DECODE",video_4:"MEDIA_ERR_SRC_NOT_SUPPORTED"};p=u[c]}this.callCBEvent("onerror",c,p)}})}if(!t.Html5LiveTiny){var s=!1,l=t.$.newGuid(),d="tvp_report_h5_live",c=e.getData(d);c||(c=t.$.newGuid(),e.setData(d,c)),r.fn=r.prototype=new t.BaseHtml5,e.extend(r.fn,{write:function(e){t.BaseHtml5.prototype.write.call(this,e),this.callProtectFn("onwrite"),this.callCBEvent("onwrite"),this.callCBEvent("onready"),this.play(this.curVideo,this.config.autoplay),a.call(this)},play:function(n,a){function r(t){d.videoTag.src=t,d.$video&&d.$video.trigger&&d.$video.trigger("tvp:video:src"),s||(s=!0,d.callCBEvent("oninited")),d.videoTag.pause(),a&&(d.videoTag.load(),d.videoTag.play()),d.callCBEvent("onchange",d.curVideo.getChannelId())}var d=this;if(!this.videoTag)throw new Error("未找到视频播放器对象，请确认<video>标签是否存在");if(!(n instanceof t.VideoInfo))throw new Error("传入的对象不是tvp.VideoInfo的实例");e.isUndefined(a)&&(a=!0),this.setCurVideo(n);var p,u=this.config.playUrl,f={cnlid:n.getChannelId(),host:t.$.getHost()};f=e.extend(f,i()),d.config&&d.config.hasOwnProperty("livepid")&&d.config.livepid&&(f.livepid=d.config.livepid);var h,v=e.Deferred(),g=e.Deferred();if(u){if(!/.*\.?qq\.com$/.test(f.host)&&!/.*\.?qq\.com$/.test(u))throw o(10,{config:d.config}),new Error("当前域或者播放地址不在白名单内!");p=u,o(9,{config:d.config}),v.resolve(p)}else{o(11,{config:d.config});var m=e.now();e.ajax({url:t.common.get_request_url("zb"),data:f,dataType:"jsonp"}).done(function(i,a){d.rs_cache=i,a=e.now()-m,i&&0==i.iretcode||v.reject(i),i.playurl?(o(12,{delay:a,config:d.config}),t.bossReport.h5_live_quality({playno:l,guid:c,sid:n.getChannelId(),step:4,vurl:i.playurl,vdef:i.defn,tpay:i.ispay,cpay:i.isuserpay}),h=i.playurl,v.resolve(i.playurl),d.play_limit(i)):(o(13,{delay:a,config:d.config,code:i.iretcode}),v.reject(i))}).fail(function(t,n){n=e.now()-m,o(14,{delay:n,config:d.config}),v.reject(t)})}t.Html5UI&&e.isFunction(t.Html5UI.fn.buildloadingAd)&&d.config.isHtml5UseUI&&(d.config.isHtml5ShowLoadingAdOnStart||d.config.isHtml5ShowLoadingAdOnChange)?(d.$video.attr("tvp_loadingad_ended",1),d.$video.off("tvp:loadingad:ended").on("tvp:loadingad:ended",function(t,e){d.config.autoplayAfterLoadingad&&e&&!e.emptyAd&&(a=!0),g.resolve()})):g.resolve(),e.when(v,g).done(function(){r(h)}).fail(function(t){d.h5EvtAdapter.onError.call(d,t)})},play_limit:function(t){function n(){var t,n='<span class="tvp_text">试看{$min}分钟</span>';"number"===e.type(i)&&(t=60>i?1:Math.round(i/60),n=n.replace("{$min}",t),o.$UILayer.find(".tvp_overlay_play").addClass("tvp_overlay_play_try").append(n))}if(!this.hasPlayInit&&t.endplaytime&&!(t.endplaytime-t.svrtick<=0)){this.hasPlayInit=!0;var i=t.endplaytime-t.svrtick,o=this;n(),this.$video.on("timeupdate",function(){this.currentTime&&i-parseInt(this.currentTime)<=0&&(o.$video&&o.$video[0]&&(o.$video[0].pause&&o.$video[0].pause(),o.$video.remove()),o.callCBEvent("onerror"))})}},report_event:function(){var t,e,n=this.$video,i="",o=this,a=0,r=0,s=0,d=0,c=!1;n.on("pause",function(){i="pause"}).on("playing",function(){i="play"}).on("play",function(){i="play"}).on("timeupdate",function(){t=this.currentTime}),setInterval(function(){e||(e=t),"pause"!==i&&(t>=e?(i="playing",c=!1):(i="waiting",c||(s+=1),c=!0,d+=1)),e=t>e?t:e,60===a&&(d=d>60?60:d,o.report_h5_live({prd:r,blocktime:d,block:s,firstload:0,playno:l}),a=0,s=0,d=0,r=0),"pause"!==i&&(a+=1,r+=1)},1e3)},report_h5_live:function(n){n=n||{};var i=this,o=i.$video.attr("src"),a=function(t){return"undefined"==typeof t?"":t},r=this.getCurVideo(),s=r.getChannelId(),l=t.$.getUrlParam("cdn",o),d=t.common.get_stdfrom(),p=t.common.getDeviceId(),u=n.playno||t.$.newGuid(),f=a(n.firstload),h=a(n.errcode)||0,v=a(n.blocktime),g=a(n.block),m=a(n.firstreport)||0,y=a(n.prd),w="";this.config&&this.config.hasOwnProperty("livepid")&&this.config.livepid&&(w=this.config.livepid);var _={prog:s,playno:u,guid:c,cdn:l,sdtfrom:d,firstreport:m,firstload:f,blocktime:v,block:g,prd:y,platform:p,errcode:h,durl:o,dsip:t.common.get_hostname_fromUrl(o),sUrl:location.href,sRef:document.referrer,fplayerver:2,sbiz:"",livepid:w},b=new Image,x="http://btrace.video.qq.com/kvcollect?BossId=2727&Pwd=1424084450&_dc="+Math.random();x+="&"+e.param(_),b.src=x},isPlayingLoadingAd:function(){var t=1==this.$video.attr("data-playing-loadingad")||1==this.$video.attr("data-playing-adonend");return t}}),t.Html5LiveTiny=r,t.Html5LiveTiny.maxId=0}}(tvp,tvp.$),function(t,e){function n(t){this.list=[],this.build(t)}e.extend(n.prototype,{build:function(n){if(n&&1===n.config.type&&!e.os.windows){var i=this,o=n.config.html5LiveFrontShow;e.each(o,function(o,a){e.each(t.html5LiveFrontShow.plugins,function(t,e){a==e.name&&i.list.push(new e.key(n))})})}}}),t.html5LiveFrontShow={plugins:[],create:function(t){return t.html5LiveFrontShowInstance=new n(t),t.html5LiveFrontShowInstance}}}(tvp,tvp.$),function(t,e){function n(t,e){this.build(t,e)}var i={1:"当前节目不存在,请点击观看其他精彩节目",2:"当前观看人数过多,请稍后重试",3:"当前观看人数过多,请稍后重试",4:"当前观看人数过多,请稍后重试",5:"很抱歉，您所在的地区因版权原因不能播放该场直播",6:"前方信号暂时中断,请稍后重试",7:"节目未开始,请点击观看其他精彩节目",8:"节目已结束,请点击观看其他精彩节目",9:"此频道观看人数达到上限,请点击观看其他清晰度",11:"强制p2p",12:"应版权方要求，暂停提供直播信号，请点击观看其他精彩节目",13:"使用p2p",14:"请求uri格式出错",15:"请求的视频流格式无效",16:"缺少身份验证信息",17:"referer受限",18:"当前用户不在白名单",19:"未知app来源",20:"来源无效",21:"无效命令字",22:"教育直播无观看权限",23:"付费验证请求失败",25:"无登陆信息",28:"登录验证请求失败",30:"当前节目未付费",31:"当前用户未登录",32:"权限验证失败",45:"今天试看次数已到达上限",47:"试看计数失败",48:"未登录微信",50:"节目试看信息获取失败",51:"当前没有正在直播的节目",104:"您的账号同时在线数超过系统上限,请稍后再试",video_1:"直播视频播放失败",video_2:"直播视频播放失败",video_3:"直播视频播放失败",video_4:"直播视频播放失败"},o={name:"liveDownloader"};t.html5LiveFrontShow.plugins.push({name:"liveDownloader",key:n}),e.extend(n.prototype,{build:function(n,a){function r(t){return e.inArray(t,[2,3,4,5,6,7,8,9,15,16,22,23,25,28,30,31,32,45,48,50,51,104,"video_1","video_2","video_3","video_4"])>-1?!0:!1}if(a=a||{},n&&1===n.config.type){!a.msg&&a.code&&(a.msg=i[a.code]),a.msg||(a.msg="未知错误");var s=t.html5skin[o.name],l=t.html5lang[o.name];l.iframe=window!=top?'target="_parent"':"",l.url=t.app.getDownloadUrl(),this.renderData=l,this.renderData.btnText=20===a.code?"去腾讯视频看正版直播":"看看别的视频",e.extend(this.renderData,a),s=e.formatTpl(s,l),this.t=n,this.lid=n.curVideo.getChannelId();var d=n.$UILayer||n.$videomod;this.$mod=d,d.addClass("tvp_container"),this.element=e(s).appendTo(d),this.$errmsg=this.element.find('[data-role="tvp_errormsg"]'),this.$errcode=this.element.find('[data-role="tvp_errrocode"]'),this.$refresh=this.element.find('[data-role="tvp_err_refresh"]'),this.$btn=this.element.find('[data-role="tvp_error_btn"]'),r(a.code)?this.$refresh.removeClass("tvp_none"):this.$refresh.addClass("tvp_none"),this._checkBtn(),this._bindEvents()}},_checkBtn:function(){var e=this,n=this.$btn;t.app.check({lid:e.lid,t:e.t}).done(function(t){e.hasApp=t.hasApp,t&&t.hasApp?n.attr({href:t.liveOpenUrl,"data-url":t.url}):t&&t.url&&n.attr({href:t.url,"data-url":t.liveOpenUrl}),e.promotionId=e.t.config.livePromotionId||140,n.attr("data-promotionid",e.promotionId),e.downloadUrl=t.url,e.bindDownloader(n,n)})},bindDownloader:function(n,i){var o=this,a="string"===e.type(this.t.config.downloaderCallback)?this.t.config.downloaderCallback:!1,r={downloader:!0,downloadUrl:o.downloadUrl,md5:o.md5,range:[1,2]};if(!this.hascheckDownloader){this.hascheckDownloader=!0;var s={t:o.t,downloadInstance:o,downloadBox:n,downloadBtn:i,range:[1,2],appName:t.app.config.defaultName,downloadMd5:o.md5,downloaderCallback:a};o.md5?t.app.checkCanDownloader(o.hasApp,r,s):t.app.getAppMd5(o.promotionId).done(function(e){e&&e.md5&&(o.md5=e.md5,s.downloadMd5=e.md5,r.md5=e.md5),t.app.checkCanDownloader(o.hasApp,r,s)}),this.onDownloaderStatusChange()}},onDownloaderStatusChange:function(){function t(t){var n="";"downloading"===t?n="正在下载腾讯视频":"pause"===t?n="已暂停，点击恢复下载":"complete"===t?(n="下载已完成，点击安装",t="install"):"afterInstall"===t?n="已暂停，点击恢复下载":"hasapp"===t&&(n=e.renderData.btnText),n||(n=e.renderData.btnText),e.$btn.html(n),e.$btn.attr("data-status",t)}var e=this;this.$btn.on("tvp:appdownload:complete",function(){t("complete")}).on("tvp:appdownload:downloading",function(){t("downloading")}).on("tvp:appdownload:pause",function(){t("pause")}).on("tvp:appdownload:afterInstall",function(){t("afterInstall")}).on("tvp:appdownload:hasapp",function(){t("hasapp")})},_bindEvents:function(){var t=this;this.$btn.on("click",function(){t._report(1)})},_report:function(e){var n=this.t,i={cmd:3542,vid:n.curVideo.getChannelId(),contentId:n.config.contentId,appId:n.config.appid,int5:e};t.report(i)}})}(tvp,tvp.$),function(t,e){e.extend(t.BaseHtml5.fn,{enterFullScreen:function(){var t=this,e=this.$mod[0],n=0;if(e.webkitRequestFullScreen)return void e.webkitRequestFullScreen();if(this.videoTag.webkitSupportsFullscreen)if(this.videoTag.readyState>=1)this.videoTag.webkitEnterFullscreen();else{if(++n>=30)return;setTimeout(function(){t.enterFullScreen()},200)}}})}(tvp,tvp.$),function(t,e){e.extend(t.Html5Tiny.fn,{swtichDefinition:function(t){if(this.curVideo.getFormat()!=t){this.pause();var e=this.getCurTime(),n=this,i=null;this.curVideo.setFormat(t),this.$video.one("canplay canplaythrough",function(){n.isDefinitionSwitching&&(setTimeout(function(){n.seek(e)},500),i=setInterval(function(){n.videoTag.currentTime>=e&&(clearInterval(i),i=null,n.isDefinitionSwitching=!1)},50))}),this.isDefinitionSwitching=!0,this.play(this.curVideo)}}})}(tvp,tvp.$),function(t,e){function n(){this.start=t.$.now(),this.end=0}function i(i,o){this.vid=i||"",this.player=o,this.rid=o.curVideo.getRid()||e.createGUID(),this.pid=o.curVideo.getPid()||e.createGUID(),this.reportTimer={};var a=e.isFunction(o.getPlayerType)?o.getPlayerType().toUpperCase():"",r="http://rcgi.video.qq.com/report/play?",s=this.getplatform(),l=["TenPlayer",a,"V2.0"].join(""),d={version:l,vid:this.vid,rid:this.rid,pid:this.pid,url:window!=top?document.referrer:document.location.href,platform:s,ptag:e.cookie.get("ptag"),pfversion:e.os.version,appid:o.config.appid};this.getStepName=function(t){return"report_"+t},this.addStep=function(t){this.reportTimer[this.getStepName(t)]=new n},this.delStep=function(t){delete this.reportTimer[this.getStepName(t)]},this.report=function(n,i,a){var s=[],l={},c={},p=r;if(n){e.extend(c,d),"object"==typeof a&&e.extend(c,a);try{l.vt=o.curVideo.data.vl.vi[0].ul.ui[0].vt,l.tpay=o.curVideo.tpay}catch(u){l.vt=0}l.vurl=o.curVideo.url,l.bt=parseInt(o.getDuration(),10),e.extend(c,l),c.step=n,c.ctime=e.getISOTimeFormat(),c.val=i,c.isshortvd=o&&o.config&&o.config.isShortVideo?1:0,c.opensource={mqqcartoon:1,"ugch5.m.v.qq.com":2,"buluo.qq.com":3}[t.$.getUrlParam("openS")||o.config.openS],c.opensource||(c.opensource=0),o.config.openS&&/^\d+$/.test(o.config.openS+"")&&(c.opensource=o.config.openS),o.curVideo&&o.curVideo.getGuid&&(c.cmid=o.curVideo.getGuid()),c.ua=navigator.userAgent;for(var f in c){var h=c[f];isNaN(h)&&(h=encodeURIComponent(""+h)),s.push(f+"="+h)}p+=s.join("&"),t.bossReport.play_report(s)}},this.reportStep=function(e,i){if(!(this.reportTimer[this.getStepName(e)]instanceof n))return void t.debug("no timer "+e);var o=this.reportTimer[this.getStepName(e)].getTimelong();isNaN(o)||0>=o||o>9e6||(this.report(e,o,i),this.delStep(e))}}n.prototype={getTimelong:function(){if(this.end=t.$.now(),this.end<=0||this.start<=0)return 0;var e=this.end-this.start;return 0>=e?0:e},getSeconds:function(){return parseInt(this.getTimelong()/1e3,10)}},i.fn=i.prototype={getBusinessId:function(){if(e.browser.WeChat)return 6;if(e.browser.MQQClient)return 17;var t="";if(document.location.href.indexOf("http://v.qq.com/iframe/")>=0&&window!=top){var n=document.referrer;if(""!=n){var i=document.createElement("a");i.href=n,t=i.hostname,i=null}}""==t&&(t=document.location.hostname||document.location.host);var o=[{r:/(\w+\.)?weixin\.qq\.com$/i,v:6},{r:/^(v|film)\.qq\.com$/i,v:1},{r:/^news\.qq\.com$/i,v:2},{r:/(\w+\.)?qzone\.qq\.com$/i,v:3},{r:/(\w+\.)?t\.qq\.com$/i,v:5},{r:/^3g\.v\.qq\.com$/i,v:8},{r:/^m\.v\.qq\.com$/i,v:10},{r:/3g\.qq\.com$/i,v:12}];t=t.toLowerCase();for(var a=0,r=o.length;r>a;a++){var s=o[a];if(s.r.test(t))return s.v}return 7},getDeviceId:function(){var t=e.os,n=navigator.userAgent;return t.ipad?1:t.windows?/Touch/i.test(n)?8:/Phone/i.test(n)?7:2:t.android?t.tablet?5:3:t.iphone?4:t.Mac?9:10},getplatform:function(){var t=this.getBusinessId(),e=this.getDeviceId();return 1e4*t+100*e+1}},t.H5Monitor=i}(tvp,tvp.$),function(t,e){function n(){}var i={case1:{promotionId:755,downloadUrl:"http://mcgi.v.qq.com/commdatav2?cmd=4&confid=755&platform=aphone",texts:{download:"下载腾讯视频${limitTips}",downloading:"正在下载腾讯视频，马上就能看哟",pause:"已暂停，点击恢复下载",install:"下载已完成，点击安装",afterInstall:"安装已完成，请打开腾讯视频看完整版",hasapp:"打开腾讯视频${limitTips}",_downloading:"正在下载",_pause:"点击恢复",_install:"立即安装",_afterInstall:"腾讯视频看更多",_afterInstall_1:"腾讯视频看更多",playText:"试看${limitTime}分钟",replayText:"重新播放",timingText:"腾讯视频看更多"}},case2:{promotionId:756,downloadUrl:"http://mcgi.v.qq.com/commdatav2?cmd=4&confid=756&platform=aphone",texts:{download:"下载腾讯视频，看精彩完整版",playText:"试看${limitTime}分钟",replayText:"重新播放",timingText:"腾讯视频看更多"}},case3:{promotionId:754,downloadUrl:"http://mcgi.v.qq.com/commdatav2?cmd=4&confid=754&platform=aphone",texts:{_download:"腾讯视频看更多",_downloading:"正在下载",_pause:"点击恢复",_install:"立即安装",_afterInstall:"腾讯视频看更多",timingText:"腾讯视频看更多"},per:100,disable:[2,3,4,5]}},o={case_regx:[/MicroMessenger/i,/QQ\/(\d+\.(\d+)\.(\d+)\.(\d+))/i,/qqnews\/(\d+\.\d+\.\d+)/],name:"durationLimit_v2",downloader:!0,range:[1,2]},a={HIDE:"tvp_none"},r={initEvent1:function(){var t=this;this.$video.off("play.limit").on("play.limit",function(){t.$limitPlay.addClass(a.HIDE),t.$limitRePlay.addClass(a.HIDE),t.downloaded||t.$banner.addClass(a.HIDE)}),this.$video.off("playing.limit").on("playing.limit",function(){t.$limitPlay.addClass(a.HIDE),t.$limitRePlay.addClass(a.HIDE),t.showDownload&&(t.updateCountDownTime(),t.$smallBtnBox.removeClass(a.HIDE)),t.downloaded||t.$banner.addClass(a.HIDE),setTimeout(function(){t.player&&t.player.isPlayingLoadingAd&&t.player.isPlayingLoadingAd()&&t.$smallBtnBox.addClass(a.HIDE)},100)}),this.$video.off("pause.limit").on("pause.limit",function(){t.player.isTouching||this.ended||(t.player.isTouching||t.$limitPlay.removeClass(a.HIDE),t.showDownload&&t.showBanner&&t.$banner.removeClass(a.HIDE),t.$smallBtnBox.addClass(a.HIDE),setTimeout(function(){t.hideControl()},500))}),this.$video.off("ended.limit").on("ended.limit",function(){t.player&&t.player.isPlayingLoadingAd&&t.player.isPlayingLoadingAd()||(t.$limitRePlay.removeClass(a.HIDE),t.$limitPlay.addClass(a.HIDE),t.downloaded||t.$banner.addClass(a.HIDE),t.$smallBtnBox.addClass(a.HIDE))}),this.$video.off("timeupdate.limit").on("timeupdate.limit",function(){t.showDownload&&(t.remain=parseInt(this.duration-this.currentTime),t.updateCountDownTime())})},initEvent2:function(){var t=this;this.$video.on("play",function(){t.$panel.addClass(a.HIDE)}),this.$video.on("playing",function(){t.showDownload&&(t.updateCountDownTime(),t.$smallBtnBox.removeClass(a.HIDE)),setTimeout(function(){t.player&&t.player.isPlayingLoadingAd&&t.player.isPlayingLoadingAd()&&t.$smallBtnBox.addClass(a.HIDE)},100)}),this.$video.on("pause",function(){t.player.isTouching||this.ended||(t.$panel.removeClass(a.HIDE),t.$limitPlay.removeClass(a.HIDE),t.$limitRePlay.addClass(a.HIDE),t.$smallBtnBox.addClass(a.HIDE))}),this.$video.on("ended",function(){t.player&&t.player.isPlayingLoadingAd&&t.player.isPlayingLoadingAd()||(t.$limitRePlay.removeClass(a.HIDE),t.$limitPlay.addClass(a.HIDE),t.$panel.removeClass(a.HIDE),t.$smallBtnBox.addClass(a.HIDE))}),this.$video.on("timeupdate",function(){t.showDownload&&(t.remain=parseInt(this.duration-this.currentTime),t.updateCountDownTime())})},initEvent3:function(){var t=this,e=this.$video.get(0);e&&this.$video.off("timeupdate.limit").on("timeupdate.limit",function(){var e=parseInt(this.currentTime,10);e&&t.showDownload&&t.showSmallBtnOnTime(e)&&(t.$panel.removeClass(a.HIDE),t.delayHideDOM())})},playBtnEvent:function(){var t=this,e=this.$video.get(0);e&&(t.$video.trigger("tvp_durationlimit_show"),t.$limitPlay.on("click",function(){t.player.play(null,!0)}),t.$limitRePlay.find(".tvp_overlay_replay").on("click",function(){e.load(),e.play()}))}},s={update:function(t){var e,n,i=this;"afterInstall"===t||"hasapp"===t?(i.downloaded=!1,e=i.conf.openUrl,n="open"):(i.downloaded=!0,e=i.conf.downloadUrl,n=t),1===i.type&&(i.$bannerBtn.attr({"data-status":n,href:e}),i.$bannerTXT.attr({"data-text":i.renderData[t]})),i.$smallBtn.attr({"data-status":n,href:e}),i.$smallBtnTXT.attr({"data-text":i.renderData["_"+t]})},onStatusChange:function(){if(this.type&&2!==this.type){var t=this;this.$box.on("tvp:appdownload:complete",function(){s.update.call(t,"install")}).on("tvp:appdownload:downloading",function(){s.update.call(t,"downloading")}).on("tvp:appdownload:pause",function(){s.update.call(t,"pause")}).on("tvp:appdownload:afterInstall",function(){s.update.call(t,"afterInstall")}).on("tvp:appdownload:hasapp",function(){s.update.call(t,"hasapp")})}},clickReport:function(){var t=this;t.conf.hasApp?(t.stepReport(6,3),t.$btn.off("touchend.stepreport").on("touchend.stepreport",function(){t.stepReport(7,3)})):(e.os.ios||2===t.type)&&(t.stepReport(1,1),t.$btn.off("touchend.stepreport").on("touchend.stepreport",function(){t.stepReport(2,1)}))},setDownload1:function(){var t=this;this.$box=e([this.$banner.get(0),this.$smallBtnBox.get(0)]),this.$btn=e([this.$bannerBtn.get(0),this.$smallBtn.get(0)]),this.$btn.attr({href:t.conf.url,"data-downloadUrl":t.conf.downloadUrl,"data-downloadmd5":t.conf.md5,"data-promotionid":t.conf.promotionId,"data-url":t.conf.openUrl}),this.bindDownloader(this.$box,this.$btn),s.onStatusChange.call(this)},setDownload2:function(){var n=this;this.$btn=e([this.$bannerBtn.get(0),this.$smallBtn.get(0)]),this.$btn.attr({href:n.conf.url,"data-downloadUrl":n.conf.downloadUrl,"data-downloadmd5":n.conf.md5,"data-promotionid":n.conf.promotionId,"data-url":n.conf.openUrl}),t.app.bindTryOpenAppBanner&&t.app.bindTryOpenAppBanner({$btn:n.$btn,rewriteText:t.$.noop})},setDownload3:function(){var t=this;this.$box=this.$panel,this.$btn=this.$smallBtn,this.$btn.attr({href:t.conf.url,"data-downloadUrl":t.conf.downloadUrl,"data-downloadmd5":t.conf.md5,"data-promotionid":t.conf.promotionId,"data-url":t.conf.openUrl}),this.bindDownloader(this.$box,this.$btn),s.onStatusChange.call(this)}};n.prototype={init:function(e){return e&&1!=e.config.type&&e.config.isHtml5UseUI&&!e.config.isShortVideo?(this.player=e,this.$video=e.$video,this.vid=e.curVideo.getVid(),this.enable=this.hasLimit(),this.type=this.getLimitCase(),this.conf=i["case"+this.type],t.app&&t.app.config&&(this.conf.appName=this.conf.appName||t.app.config.defaultName),this.updateUserConfig(),this.isUseCase1UI(),this.showBanner=!this.hasAppBanner(),this.whenToDisableCase3(),t.app&&t.app.isSupportApp?void(0!==this.type&&(this.enable&&e.trigger&&e.trigger("tvp.durationlimit.enable"),this.start())):void(this.enable&&this.macLimit())):void 0},hide:function(){var t=this;t.$smallBtnBox&&t.$smallBtnBox.addClass(a.HIDE),t.$limitPlay&&t.$limitPlay.addClass(a.HIDE),t.$limitRePlay&&t.$limitRePlay.addClass(a.HIDE),t.$limitRePlay&&t.$limitRePlay.addClass(a.HIDE),t.$panel&&t.$panel.addClass(a.HIDE)},updateUserConfig:function(){var t=this.player.config.disableLimitBanner,n=this.type+"",a=this.player.config.caseSetting,r=this.player.config.limitSetting;if(this.showDownload=!0,t&&(t=t.split(","),t&&t.length&&e.inArray(n,t)>-1&&(this.showDownload=!1)),this.showDownload&&3===this.type&&(this.showDownload=this.randomShowSmallBtn()),a)for(var s in a)for(var l in a[s])"object"===e.type(a[s][l])?e.extend(i[s][l],a[s][l]):i[s][l]=a[s][l];r&&e.extend(o,r),e.extend(this.conf,o)},isUseCase1UI:function(){2===this.type&&this.showDownload===!1&&this.player.config.useLimitCase1UI===!0&&(this.type=1,this.conf=i["case"+this.type],this.conf.appName=this.conf.appName||t.app.config.defaultName)},hasLimit:function(){var t=this.player.curVideo.data;return t&&t.exem&&t.preview?(this.player.curVideo.setDuration(t.preview.toString()),this.preview=t.preview,this.remain=t.preview,!0):!1},getLimitCase:function(){var t=navigator.userAgent.toLowerCase(),n=o.case_regx,i=!1;return e(n).each(function(e,n){return n.test(t)?(i=!0,!1):void 0}),this.enable?i?1:2:i?3:0},start:function(){var t=this;this.getOnlineTipsText();try{t.showReport(),t.tipsSetting(),t.render(),t.initDOM(),t.initDisplay()}catch(n){}var i=r["initEvent"+t.type];"function"===e.type(i)&&i.call(t),t.showDownload&&t.initDownload(),(1===t.type||2===t.type)&&r.playBtnEvent.call(t)},tipsSetting:function(){var t="看精彩完整版",e=i["case"+this.type].texts,n="case"+this.type;t=this.bannerTips?this.bannerTips:t;for(var o in e)i[n].texts[o]=(i[n].texts[o]+"").replace("${limitTips}",", "+t)},render:function(){var n=t.html5skin[o.name+"_case"+this.type],a=i["case"+this.type],r=a.texts,s=this.preview-29;r&&(s=0>s?1:Math.ceil(s/60),r.limitTime=s,n=e.formatTpl(n,r),this.renderData=r,this.$mod=this.player.$UILayer||this.player.$videomod,this.$mod.addClass("tvp_container"),this.element=e(n).appendTo(this.$mod))},initDOM:function(){this.$mod&&(1===this.type?(this.$panel=this.$mod.find('[data-role="tvp-limit-case1"]'),this.$limitRePlay=this.$mod.find('[data-role="tvp-limit-replay"]'),this.$limitPlay=this.$mod.find('[data-role="tvp-limit-play"]'),this.$banner=this.$mod.find('[data-role="tvp-limit-download"]'),this.$bannerBtn=this.$banner.find('[data-role="tvp-limit-download-btn"]'),this.$bannerTXT=this.$banner.find('[data-role="tvp-limit-download-text"]'),this.$smallBtnBox=this.$mod.find('[data-role="tvp-limit-timing"]'),this.$smallBtn=this.$smallBtnBox.find('[data-role="tvp-limit-timing-btn"]'),this.$smallBtnTXT=this.$smallBtnBox.find('[data-role="tvp-limit-timing-text"]'),this.$remain=this.$smallBtn.find('[data-role="tvp-limit-timing-text"]')):2===this.type?(this.$panel=this.$mod.find('[data-role="tvp-limit-case2"]'),this.$limitPlay=this.$mod.find('[data-role="tvp-limit-play"]'),this.$limitRePlay=this.$mod.find('[data-role="tvp-limit-replay"]'),this.$banner=this.$mod.find('[data-role="tvp-limit-download"]'),this.$bannerBtn=this.$banner.find('[data-role="tvp-limit-download-btn"]'),this.$smallBtnBox=this.$mod.find('[data-role="tvp-limit-timing"]'),this.$smallBtn=this.$smallBtnBox.find('[data-role="tvp-limit-timing-btn"]'),this.$replayText=this.$limitRePlay.find('[data-role="tvp-limit-replay-text"]'),this.$remain=this.$smallBtn.find('[data-role="tvp-limit-timing-text"]')):3===this.type&&(this.$panel=this.$mod.find('[data-role="tvp-limit-case3"]'),this.$smallBtn=this.$panel.find('[data-role="tvp-limit-timing-btn"]'),this.$smallBtnTXT=this.$panel.find('[data-role="tvp-limit-timing-text"]')),this.$play=this.$mod.find(t.html5skin.elements.overlay.play))},initDisplay:function(){1===this.type?(this.showDownload&&this.showBanner&&this.$banner.removeClass(a.HIDE),this.$panel.removeClass(a.HIDE),this.$limitPlay.removeClass(a.HIDE),this.$play.addClass(a.HIDE)):2===this.type?(this.$panel.removeClass(a.HIDE),this.showDownload&&this.showBanner&&this.$banner.removeClass(a.HIDE),this.$play.addClass(a.HIDE)):3===this.type&&this.$panel.addClass(a.HIDE)},randomShowSmallBtn:function(){if(!this.conf||"undefined"===e.type(this.conf.per))return!1;var t=parseInt(100*Math.random(),10)+1;return t>100-this.conf.per?!0:!1},getOnlineTipsText:function(){var n=e.Deferred(),i=t.common.recomdTextById(this.vid),o=this;return 1!==this.type?(n.resolve(),n):(i&&"string"===e(i.rmdword)&&i.rmdword?(o.bannerTips=i.rmdword,o.reportData=i,n.resolve()):i&&"function"===e.type(i.done)?i.done(function(){var e=t.common.recomdText[o.vid];e&&e.rmdword&&(o.bannerTips=e.rmdword),o.reportData=e,n.resolve()}):n.resolve(),n)},showSmallBtnOnTime:function(t){return 3!==this.type?!1:this.isPad()?!0:1===t?!0:t%30===0?!0:!1},isPad:function(){return e.os.ipad||e.os.tablet},updateCountDownTime:function(){if(this.remain&&!this.downloaded){var t,e=parseInt(this.remain/60),n=this.remain%60;n=10>n?"0"+n:n,e=10>e?"0"+e:e,t=e+":"+n,this.$remain.attr("data-text","还剩 "+t)}},delayHideDOM:function(t,e){t=t||this.$panel,e=e||1e4;var n=this;this.delayTimer||(this.delayTimer=setTimeout(function(){n.downloaded||t.addClass(a.HIDE),n.delayTimer=null},e))},showReport:function(){this.reportData&&this.reportData.tab_id&&this.reportData.alginfo&&t.bossReport.rcmdTextReport(1,this.reportData.tab_id,this.reportData.alginfo,1)},getMD5:function(){var n=e.Deferred(),i=this,o=this.conf.appName;return this.conf.promotionId?this.conf.md5?(n.resolve(),n):(t.app.getAppMd5(this.conf.promotionId,o).done(function(t){t&&t.md5&&(i.conf.md5=t.md5),n.resolve()}).fail(function(){n.reject()}),n):(n.reject(),n)},check:function(){var n=e.Deferred(),i=this;return this.conf.promotionId&&i.conf.downloadUrl?(this.getMD5().done(function(){return i.conf.md5?void t.app.check({vid:i.vid,promotionId:i.conf.promotionId,downloadUrl:i.conf.downloadUrl,md5:i.conf.md5}).done(function(t){t&&t.openUrl&&(i.conf.hasApp=t.hasApp,"undefined"===e.type(i.conf.openUrl)&&(i.conf.openUrl=t.openUrl),i.conf.url=t.url),n.resolve()}):void n.reject()}).fail(function(){n.reject()}),n):(n.reject(),n)},initDownload:function(){var t=this;this.check().done(function(){if(t.conf&&t.conf.openUrl&&t.conf.url){var n=s["setDownload"+t.type];
"undefined"!==e.type(n)&&(n.call(t),s.clickReport.call(t),t.conf.hasApp&&t.$box&&"function"===e.type(t.$box.trigger)&&t.$box.trigger("tvp:appdownload:hasapp"))}})},bindDownloader:function(n,i){var o=this,a="string"===e.type(this.player.config.downloaderCallback)?this.player.config.downloaderCallback:!1,r={downloader:o.conf.downloader,downloadUrl:o.conf.downloadUrl,md5:o.conf.md5,range:o.conf.range};if(!this.hascheckDownloader){this.hascheckDownloader=!0;var s={t:o.player,downloadInstance:o,downloadBox:n,downloadBtn:i,range:o.conf.range,appName:o.conf.appName,downloadMd5:o.conf.md5,downloaderCallback:a};t.app.checkCanDownloader(o.conf.hasApp,r,s)}},stepReport:function(n,i){var o=this,a=o.player,r={cmd:3537,int5:n,str4:i,str8:e.getUrlParam("mmuin"),val:n};r.int6=o.conf.promotionId,t.app.report(r,a)},hasAppBanner:function(){var t=this;return e.createAppFollow||t.player&&t.player.config&&t.player.config.plugins&&(t.player.config.plugins.AppBanner||t.player.config.plugins.AppFollow)?!0:!1},whenToDisableCase3:function(){if(3===this.type){var n=this;if("all"===this.conf.disable)return void(this.showDownload=!1);if(e.isArray(n.conf.disable)){var i=function(){var e,n,i=t.app.pageType;try{n=top.location.host}catch(o){n=null}return e=1===i?"mp.weixin.qq.com"===n?1:"view.inews.qq.com"===n?2:3:2===i?"view.inews.qq.com"===n?4:5:3===i?6:7};e.inArray(i(),n.conf.disable)>-1&&(this.showDownload=!1)}}},hideControl:function(){this.player&&this.player.hideControl&&this.player.hideControl()},macLimit:function(){var n=t.common.isMac();if(n){var i,o,a,r,s=this.player.$UILayer,l=this.player.$video,d=l.parent().find("video"),c=this;if(o=s.find('[data-role="tvp_fn_tips_box"]')){a=o.find('[data-role="tvp_fn_tips_text"]'),r=window.txv&&txv.login&&"function"===e.type(txv.login.openLogin),i="v.qq.com"===window.location.hostname?r?'<span style="cursor: pointer;" class="tvp_link tvp_fn_openLogin">登录</span>后可观看完整版':'<a class="tvp_link" href="http://v.qq.com/">登录</a>后可观看完整版':'在<a class="tvp_link" href="http://v.qq.com/">v.qq.com</a>登录后可观看完整版';var p=function(){a.html(i),"v.qq.com"===window.location.hostname&&t.$(".tvp_fn_openLogin").off("click").on("click",function(){window.txv&&txv.login&&txv.login.openLogin&&(c.player&&c.player.checkIsFullScreen&&c.player.checkIsFullScreen()&&c.player.cancelFullScreen(),txv.login.openLogin())}),setTimeout(function(){return"function"===e.type(c.player.isPlayingLoadingAd)&&c.player.isPlayingLoadingAd()?void o.addClass("tvp_none"):void o.removeClass("tvp_none")},300)};d.on("playing",function(){p()})}}},clear:function(){this.$video.off("play.limit").off("playing.limit").off("pause.limit").off("timeupdate.limit").off("ended.limit"),1===this.type?this.$panel.remove():2===this.type?(this.$panel.remove(),this.$smallBtnBox.remove()):3===this.type&&this.$panel.remove(),this.$video.trigger("tvp_durationlimit_hide")}},t.html5DurationLimit={create:function(e){e.DurationLimitInstance&&"function"===t.$.type(e.DurationLimitInstance.clear)&&e.DurationLimitInstance.clear(),e.DurationLimitInstance=new n;try{e.DurationLimitInstance.init(e)}catch(i){}return e.DurationLimitInstance}}}(tvp,tvp.$),function(t,e){e.extend(t.Html5Tiny.fn,{buildmonitor:function(){var n=this,i=null,o=0,a=!1;this.$video.on("playing",function(){setTimeout(function(){n.isPlayingLoadingAd()&&(n.hasAds=!0,i&&i.reportStep(7,{val1:1}))},90)}),this.$video.on("tvp:video:ajaxstart",function(e,o,r){a=r,i=null,i=new t.H5Monitor(o,n),i.addStep(a?1009:1011),i.addStep(7)}).on("tvp:video:ajaxsuc",function(){i&&(i.report(3,1),i.reportStep(a?1009:1011,{val1:1,val2:0}))}).on("tvp:video:src",function(){o=0,i.report(4,1,{val2:1}),i.addStep(6),i.addStep(30),n.$video.one("canplay",function(){i&&i.reportStep(30,{val1:0,val2:2})}).one("error",function(){i&&(i.reportStep(30,{val1:1,val2:2}),i.report(5,0,{val1:3}))}).one("playing",function(){i&&(i.reportStep(6,{val1:n.hasAds?4:1}),i.addStep(5),s({itype:1}),n.$video.one("tvp:player:ended",function(){i.reportStep(5,{val1:1}),s({itype:2})}).one("tvp:player:videochange",function(){i.reportStep(5,{val1:2}),s({itype:3})}))})}).on("waiting",function(){i&&1!=++o&&(n.isDefinitionSwitching||n.isTouching||(i.addStep(31),n.$video.one("timeupdate",r)))}).one("tvp:h5ui:playbtn:click",function(){s({itype:4})});var r=function(){var t=i.reportTimer[i.getStepName(31)],e=0;return t?(e=t.getTimelong(),i.report(31,Math.min(1e4,e),{val1:e>1e4?1:0,val2:2,"ptime ":n.videoTag.currentTime}),void n.$video.off("timeupdate",r)):void n.$video.off("timeupdate",r)},s=function(i){i=i||{};var o={cmd:3533,appId:n.config.appid||0,contentId:n.config.contentId||"",vid:n.curVideo.getFullVid(),init5:n.hasDurationLimit()?1:0};o=e.extend(o,i),t.report(o)}}})}(tvp,tvp.$),function(t,e){t.html5lang={errMsg:{"default":"视频加载失败，请刷新页面重试",0:"视频加载失败",68:"视频加载失败，请刷新页面重试","-1":"请刷新页面重试","-2":"请刷新页面重试","-3":"请刷新页面重试","-4":"请刷新页面重试","-6":"请刷新页面重试","-7":"请刷新页面重试",50:"视频加载失败，请刷新页面重试",52:"视频加载失败，暂无法观看",64:"视频加载失败，暂无法观看",51:"视频加载失败，暂无法观看",61:"当前视频已下架，暂无法观看",62:"当前视频不存在，暂无法观看",63:"视频加载失败，暂无法观看",65:"视频加载失败，暂无法观看",67:"视频加载失败，暂无法观看",69:"视频加载失败，暂无法观看",71:"视频加载失败，暂无法观看",73:"视频加载失败，暂无法观看",74:"视频加载失败，暂无法观看",76:"视频加载失败，请刷新页面重试",77:"视频加载失败，请刷新页面重试",80:{0:"因版权限制,请到腾讯视频观看",1:"很抱歉，当前IP地址所在地区暂不支持播放",2:"因版权限制，暂不支持播放",callback:function(e,n,i){if(0==parseInt(n)&&t.app&&i&&i.vid){var o=t.html5skin.errorDownloader;t.app.check(i).done(function(t){if(t.url){var n=e.find(".tvp_player_error_content");n=e;var i=e.find(".text").html();i=i.substr(0,i.indexOf("(")),o?(i=o.replace("${errorMsg}",i),i=i.replace("${url}",t.url)):i='<a href="'+t.url+'">'+i+"</a>",n.length&&n.html(i)}})}}},81:"视频加载失败，暂无法观看",82:"视频加载失败，暂无法观看",83:{main:"该片为付费视频，请前往腾讯视频观看","-2":"请登录后观看","-1":"视频加载失败，暂无法观看","-3":"该片为数字音乐专辑独家视频，请前往QQ音乐支持购买后查看"},84:"很抱歉，根据您的IP地址，暂无法播放",85:{main:"视频加载失败，请刷新页面重试","-1":"视频加载失败，请刷新页面重试","-2":"视频加载失败，请刷新页面重试","-3":"视频加载失败，请刷新页面重试","-4":"视频加载失败，请刷新页面重试","-5":"视频加载失败，请刷新页面重试","-6":"视频加载失败，请刷新页面重试"},86:"视频加载失败，请刷新页面重试",500:{main:"视频加载失败，请刷新页面重试",1:"视频加载失败，请刷新页面重试",2:"视频加载失败，请刷新页面重试"}},getErrMsg:function(n,i){if(isNaN(n))return"";if(n in t.html5lang.errMsg){var o=t.html5lang.errMsg[n];if(0===n&&"-"+i in t.html5lang.errMsg&&(o+="，"+t.html5lang.errMsg["-"+i]),e.isString(o))return o;if(e.isPlainObject(o)){var a;return a=i in o?o[i]:o.main,a||t.html5lang.errMsg["default"]}}return t.html5lang.errMsg["default"]},definition:{mp4:"高清",msd:"流畅"},srtLang:{50001:{srclang:"zh-cn",desc:"简体中文"},50002:{srclang:"zh-cn",desc:"简体中文"},50003:{srclang:"zh-tw",desc:"繁体中文"},50004:{srclang:"en",desc:"英文"},50005:{srclang:"zh-cn,en",desc:"简体中文&英文"},50006:{srclang:"zh-tw,en",desc:"繁体中文&英文"}},durationLimit:{msg:"5分钟看的不够爽？腾讯视频有高清完整版，等你来看~",padMsg:"本节目只提供5分钟预览。腾讯视频客户端可以观看高清完整版，等你喔~",download:"下载APP",padPlay:"立即播放",play:"继续播放",replay:"重新播放",open:"去看完整版"},liveDownloader:{downloadText:"下载腾讯视频，观看视频直播",openText:"打开腾讯视频，观看视频直播"},getDefiName:function(e){return e in t.defaultConfig.definition?t.defaultConfig.definition[e]:""},getSrtName:function(e){return e in t.html5lang.srtLang?t.html5lang.srtLang[e].desc:""}}}(tvp,tvp.$),tvp.html5skin={defaultError:function(){return[' <div class="tvp_player_error" id="$ERROR-TIPS-INNER$">','   <div class="tvp_error_inner">','     <div class="tvp_error_title">$ERROR-MSG$</div>','     <div class="tvp_error_desc">$ERROR-DETAIL$</div>','     <a href="javascript:;" data-role="error-refresh" class="tvp_btn_simple tvp_none">刷新</a>',"  </div>"," </div>"].join("")}(),errorDownloader:function(){return['<div class="tvp_live_download_app">','	<a class="tvp_download_app_inner" href="${url}">','		<i class="tpv_icon_download"></i>','		<span class="tvp_icon_text">${errorMsg}</span>',"	</a>","</div>"].join("")}(),durationLimit:function(){return['<div style="display:none" class="tvp_limit_tips" data-role="durationLimit">','   <div class="tvp_limit_tips_inner">','		<div class="tvp_tips_content">','			<p class="tvp_tips_text">${msg}</p>',"		</div>",'		<div class="tvp_btn_line">','			<span data-role="durationLimit-play" class="tvp_btn tvp_btn_try">${play}</span>','			<span  data-role="durationLimit-replay" class="tvp_btn tvp_btn_try">${replay}</span>','			<a data-action="applink" ${iframe} href="${url}" data-url="" data-role="durationLimit-download" class="tvp_btn tvp_btn_download">${download}</a>','			<a data-action="applink" href="" data-url="" data-role="durationLimit-open" class="tvp_btn tvp_btn_download">${open}</a>',"		</div>","	</div>","</div>"].join("")}(),durationLimit_v2_case1:function(){return['<div data-role="tvp-limit-case1" class="tvp_none">','<div class="tvp_layer_replay tvp_none" data-role="tvp-limit-replay">','<div class="tvp_overlay_replay">','<span class="tvp_button_replay"></span>','<span class="tvp_text" data-role="tvp-limit-replay-text">${replayText}</span>',"</div>","</div>",'<div class="tvp_overlay_play_try tvp_none" data-role="tvp-limit-play">','<span class="tvp_button_play"></span>','<span class="tvp_text" data-role="tvp-limit-play-text">${playText}</span>',"</div>",'<div class="tvp_app_banner tvp_none" data-role="tvp-limit-download">','<a data-role="tvp-limit-download-btn" href="javascript:;" class="tvp_app_btn" data-status="down">','<span class="tvp_progress">','<span class="tvp_progress_current"></span>',"</span>",'<span data-role="tvp-limit-download-text" class="tvp_text" data-text="${download}"></span>',"</a>","</div>",'<div class="tvp_app_badge tvp_none" data-role="tvp-limit-timing">','<a href="javascript:;" data-role="tvp-limit-timing-btn" class="tvp_app_btn" data-status="down">','<span class="tvp_progress"><span class="tvp_progress_current"></span></span>','<span class="tvp_text" data-text="还剩" data-role="tvp-limit-timing-text"></span>',"</a>","</div>","</div>"].join("")}(),durationLimit_v2_case2:function(){return['<div class="tvp_external_layer tvp_none" data-role="tvp-limit-case2">','<div class="tvp_external_inner">','<div class="tvp_overlay_play_try" data-role="tvp-limit-play">','<span class="tvp_button_play"></span>','<span class="tvp_text" data-role="tvp-limit-play-text">${playText}</span>',"</div>",'<div class="tvp_layer_replay tvp_none" data-role="tvp-limit-replay">','<div class="tvp_overlay_replay">','<span class="tvp_button_replay"></span>','<span class="tvp_text" data-role="tvp-limit-replay-text">${replayText}</span>',"</div>","</div>",'<div class="tvp_app_banner tvp_none" data-role="tvp-limit-download">','<a href="javascript:;" class="tvp_app_btn" data-status="down" data-role="tvp-limit-download-btn">','<span class="tvp_progress"><span class="tvp_progress_current"></span></span>','<span data-role="tvp-limit-download-text" class="tvp_btn_text" data-text="${download}"></span>',"</a>","</div>","</div>","</div>",'<div class="tvp_app_badge tvp_none" data-role="tvp-limit-timing">','<a data-role="tvp-limit-timing-btn" href="javascript:;" class="tvp_app_btn" data-status="down">','<span class="tvp_text" data-text="还剩" data-role="tvp-limit-timing-text"></span>',"</a>","</div>"].join("")}(),durationLimit_v2_case3:function(){return['<div class="tvp_app_badge tvp_none" data-role="tvp-limit-case3">','<a data-role="tvp-limit-timing-btn" href="javascript:;" class="tvp_app_btn" data-status="down">','<span class="tvp_progress"><span class="tvp_progress_current"></span></span>','<span data-role="tvp-limit-timing-text" class="tvp_text" data-text="${timingText}"></span>',"</a>","</div>"].join("")}(),liveDownloader:function(){return['<div class="tvp_player_error">','<div class="tvp_error_inner">','<div class="tvp_error_title" data-role="tvp_errormsg">${msg}</div>','<a data-role="tvp_err_refresh" href="javascript:;" class="txvp_error_refresh tvp_none" onclick="location.reload();">点击刷新</a>','<div class="tvp_error_code">错误代码：<span data-role="tvp_errrocode">${code}</span></div>','<a data-role="tvp_error_btn" href="javascript:;" class="tvp_btn_normal">${btnText}</a>',"</div>","</div>"].join("")}(),follow:function(){return['<a class="tvp_follow" data-role="appfollow_followbtn" data-follow="follow">','<span class="tvp_icon_follow"></span>','<span class="tvp_icon_text" data-role="appfollow_followtext">关注</span>',"</a>",'<div class="tvp_follow_hint">','<div class="tvp_hint_title">关注成功！</div>','<div class="tvp_hint_desc" data-role="bannerText">{FOLLOWTEXT}</div>',"</div>"].join("")}()},function(t,e){function n(n,i){this.isUseControl=!1,this.config=e.extend({},this.config),this.config.width=t.$.filterXSS(n),this.config.height=t.$.filterXSS(i),this.control=null,this.$UILayer=null;var o=this;e.extend(this.protectedFn,{onwrite:function(){var n=[];n[0]=(new Date).getTime();var i=t.html5skin.noSVGClassName;e.isString(i)&&i.length>0&&!t.common.isSupportSVG()&&this.videomod.classList.add(i),this.control=new t.Html5UI(o),this.control.init(),this.$UILayer=this.control.$UILayer,n[1]=(new Date).getTime(),t.report({cmd:3536,vid:this.getCurVid(),appId:this.config.appid,contentId:this.config.contentId,speed:n[1]-n[0]});var a,r=navigator.userAgent.toLowerCase().indexOf("weibo")>-1,s=this;r&&this.videoTag&&this.videoTag.style&&(a=setInterval(function(){s.videoTag.style.cssText=s.videoTag.style.cssText},100),setTimeout(function(){clearInterval(a)},6e3)),this.callCBEvent("onready")}})}t.Html5Player||(n.fn=n.prototype=new t.Html5Tiny,e.extend(n.prototype,{createVideoHtml:function(){var e=t.Html5Tiny.prototype.createVideoHtml.call(this),n=t.html5skin.getHtml(this.config);return n.replace("$VIDEO$",e)},hideControl:function(){this.control.hide()},showControl:function(){this.control.show()}}),t.Html5Player=n)}(tvp,tvp.$),function(t,e){function n(n,i){this.isUseControl=!1,this.config.width=t.$.filterXSS(n),this.config.height=t.$.filterXSS(i),this.control=null,this.$UILayer=null;var o=this;e.extend(this.protectedFn,{onwrite:function(){this.control=new t.Html5UI(o),this.control.feature=this.config.html5LiveUIFeature,this.control.init(),this.$UILayer=this.control.$UILayer,this.$UILayer&&this.$UILayer.addClass&&this.$UILayer.addClass("tvp_container_live")}})}t.Html5Live||(n.fn=n.prototype=new t.Html5LiveTiny,e.extend(n.prototype,{createVideoHtml:function(){var e=t.Html5LiveTiny.prototype.createVideoHtml.call(this),n=t.html5skin.getHtml(this.config);return n.replace("$VIDEO$",e)},getPlayerType:function(){return"html5live"}}),t.Html5Live=n)}(tvp,tvp.$),function(t){function e(t){return"tagName"in t?t:t.parentNode}function n(t,e,n,i){var o=Math.abs(t-e),a=Math.abs(n-i);return o>=a?t-e>0?"Left":"Right":n-i>0?"Up":"Down"}function i(){d=null,c.last&&(c.el.trigger("longTap"),c={})}function o(){d&&clearTimeout(d),d=null}function a(){r&&clearTimeout(r),s&&clearTimeout(s),l&&clearTimeout(l),d&&clearTimeout(d),r=s=l=d=null,c={}}if(!(t.browser.WeChat&&t.browser.getNumVersion()<5||t.os.windows&&t.browser.ie||t.isFunction(t.fn.tap))){var r,s,l,d,c={},p=750;t(document).ready(function(){var u,f;t(document.body).bind("touchstart",function(n){n.originalEvent&&(n=n.originalEvent),u=Date.now(),f=u-(c.last||u),c.el=t(e(n.touches[0].target)),r&&clearTimeout(r),c.x1=n.touches[0].pageX,c.y1=n.touches[0].pageY,f>0&&250>=f&&(c.isDoubleTap=!0),c.last=u,d=setTimeout(i,p)}).bind("touchmove",function(t){t.originalEvent&&(t=t.originalEvent),o(),c.x2=t.touches[0].pageX,c.y2=t.touches[0].pageY}).bind("touchend",function(e){e.originalEvent&&(e=e.originalEvent),o(),c.x2&&Math.abs(c.x1-c.x2)>30||c.y2&&Math.abs(c.y1-c.y2)>30?l=setTimeout(function(){c.el&&"function"==typeof c.el.trigger&&(c.el.trigger("swipe"),c.el.trigger("swipe"+n(c.x1,c.x2,c.y1,c.y2)),c={})},0):"last"in c&&(s=setTimeout(function(){if(c.el&&"function"==typeof c.el.trigger){var e=t.Event("tap");e.cancelTouch=a,c.el.trigger(e),c.isDoubleTap?(c.el.trigger("doubleTap"),c={}):r=setTimeout(function(){r=null,c.el&&c.el.trigger("singleTap"),c={}},250)}},0))}).bind("touchcancel",function(){if(c.x2&&Math.abs(c.x1-c.x2)>30||c.y2&&Math.abs(c.y1-c.y2)>30)try{l=setTimeout(function(){c.el&&"function"==typeof c.el.trigger&&(c.el.trigger("swipe"),c.el.trigger("swipe"+n(c.x1,c.x2,c.y1,c.y2)),c={})},0)}catch(t){a()}else a()}),t(window).bind("scroll",a)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(e){t.fn[e]=function(t){return this.bind(e,t)}})}}(tvp.$),function(t){t.extend(tvp.html5skin,{html:function(){return['<div class="tvp_container tvp_controls_hide">',"	<% if(!!feature.title) {%>",'		<div class="tvp_titles">','			<strong class="tvp_title"><span></span></strong>',"		</div>","	<% } %>",'	<div class="tvp_video">',"$VIDEO$","</div>","	<% if(!!feature.controlbar) {%>",'	<div class="tvp_controls">',"		<% if(!!feature.playpause) {%>",'		<div class="tvp_button tvp_playpause_button tvp_play">','			<button type="button" title="播放/暂停"><span class="tvp_btn_value">播放</span></button>',"		</div>","		<% } %>","		<% if(!!feature.progress) {%>",'		<div class="tvp_time_rail">','			<span class="tvp_time_total" >','				<span class="tvp_time_loaded" ></span>','				<span class="tvp_time_current"><span class="tvp_time_handle"></span></span>',"			</span>",'     <span class="tvp_time_panel">',"			  <% if(!!feature.timepanel) {%>",'			  <span class="tvp_time_panel_current">00:00</span>',"			  <% } %>",'       <span class="tvp_time_panel_split">/</span>',"			  <% if(!!feature.timepanel) {%>",'			  <span class="tvp_time_panel_total">00:00</span>',"			  <% } %>","      </span>","		</div>","		<% } %>","    <% if(!!feature.bullet) {%>",'    <div class="tvp_barrage_switch tvp_none">','<div class="tvp_btn_barrage" data-role="tvp-bullet-switch"><div class="tvp_btn_value">弹</div></div>',"    </div>","    <% } %>","	<% if(!!feature.volume) {%>",'<div class="tvp_button tvp_volume tvp_none">','<div class="tvp_btn_volume">','<div class="tvp_icon_volume"></div>',"</div>",'<div class="tvp_volume_slider">','<div class="tvp_volume_range">','<div class="tvp_volume_range_current" style="height:50%">','<div class="tvp_volume_handle"></div>',"</div>","</div>","</div>","</div>","	<% } %>","		<% if(!!feature.definition) {%>",'		<div class="tvp_button tvp_definition _tvp_definition_ tvp_none">','			<div class="tvp_definition_button"><span>清晰度</span></div>','			<div class="tvp_definition_list"></div>',"		</div>","		<% } %>","		<% if(!!feature.fullscreen) {%>",'		<div class="tvp_button tvp_fullscreen_button tvp_fullscreen">','			<button type="button" title="切换全屏"><span class="tvp_btn_value">全屏</span></button>',"		</div>","		<% } %>",'		<span class="tvp_time_handel_hint" style="display:none"></span>',"	</div>","	<% } %>","	<% if(!!feature.overlay) {%>",'	<div class="tvp_overlay_loading tvp_none" style="z-index:5">','		<span class="tvp_icon_loading"></span>',"	</div>",'	<div class="tvp_overlay_play">','		<span class="tvp_button_play"></span>','		<div class="tvp_fileszie"></div>',"	</div>",'	<div class="tvp_layer_replay tvp_none">','		<div class="tvp_overlay_replay" data-role="tvp_replay_btn">','			<span class="tvp_button_replay"></span><span class="tvp_text">重新播放</span>',"		</div>","	</div>","	<% } %>","	<% if(!!feature.meta) {%>",'	<div class="tvp_meta_info">','		<span class="tvp_meta_duration"></span>','		<span class="tvp_meta_length"></span>',"	</div>","	<% } %>","	<% if(!!feature.bigben) {%>",'	<div class="tvp_overlay_bigben tvp_none">','		<div class="tvp_overlay_content">','			<i class="tvp_ico_ff_rw tvp_ico_ff"></i><span class="tvp_text tvp_overlay_bigben_text">0:00:00</span>','			<span class="tvp_time_total_small"><span class="tvp_time_current_small"></span></span>',"		</div>","	</div>","	<% } %>","	<% if(!!feature.posterlayer) {%>",'	<div class="tvp_overlay_poster" style="display:none;">','		<div class="tvp_poster_img"></div>',"	</div>","	<% } %>",' <div class="tvp_overlay_tips tvp_none" data-role="xubo-banner">','   <div class="tvp_overlay_content">','    <span class="tvp_text" data-role="xubo-text">上次观看至{$min}{$sec}，正在为您续播</span>',"   </div>"," </div>","	<% if(!!feature.tips) {%>",'	<div class="tvp_overlay_tips tvp_none" data-role="tvp_fn_tips_box">','		<div class="tvp_overlay_content">','			<span class="tvp_text" data-role="tvp_fn_tips_text"></span> ',"		</div>","	</div>","	<% } %>","	<% if(!!feature.loadingAd) {%>",'	<div class="tvp_ads tvp_none">','		<div class="tvp_ads_inner" style="width:100%;height:100%;">','			<div class="tvp_ads_content"><a href="javascript:;" class="tvp_ads_link"></a></div>','			<div class="tvp_ads_control tvp_none">','				<a href="javascript:;" class="tvp_ads_skip tvp_none">','					<span class="tvp_ads_countdown"></span>','					<span class="tvp_ads_skip_text">跳过广告</span>','					<span class="tvp_btn_close tvp_none"></span>',"				</a>",'				<span data-role="tvp_mute_btn" class="tvp_voice_mute tvp_none"><span class="tvp_icon_voice"></span></span>','			<div class="tvp_ads_skip_forbidden tvp_none">','				<span class="tvp_ads_text tvp-ads-role-forbidden-title">应版权方的要求，好莱坞会员无法跳过该剧广告</span>','				<span class="tvp_ads_hint tvp-ads-role-forbidden-icon"></span>','				<span class="tvp_ads_skip_text">广告剩余:</span>','				<span class="tvp_ads_countdown">10</span> 秒',"			</div>",'				<div class="tvp_ads_qqvip_skip tvp_none">','					<span class="tvp_ads_remain">【剩余 <span class="_remain"></span> 则广告】</span>','					<span class="tvp_ads_desc">','						您是尊贵的<span class="_vipname">QQ会员</span> <span class="_remaintime"><em class="tvp_ads_num"></em>秒后</span>可','						<a href="javascript:;" class="tvp_ads_skip_text">跳过此广告</a>',"					</span>","				</div>","			</div>",'			<a href="javascript:;" class="tvp_btn_ads_more tvp_none">','				详情点击 <i class="tvp_icon_arrow"></i>',"			</a>",'			<div class="tvp_ads_copyright tvp_none">','				<div class="tvp_ads_text tvp-ads-role-forbidden-text">应版权方的要求，好莱坞会员无法免除该部电视剧的广告，请您谅解！</div>','				<div class="tvp_ads_btn tvp-ads-role-forbidden-close">我知道了！</div>','				<span class="tvp_btn_close tvp-ads-role-forbidden-close">✕</span>',"			</div>","		</div>","	</div>","	<% } %>","	<% if(!!feature.preview) {%>",'<div class="tvp_thumbs tvp_none">','<div class="tvp_thumbs_pic">',"</div>",'<div class="tvp_thumbs_time"></div>','<div class="tvp_thumbs_share tvp_none">分享</div>','<div class="tvp_thumbs_arrow"></div>',"</div>","	<% } %>","	<% if(!!feature.adonend) {%>",'		<a href="#" data-role="adonend-box" class="tvp_ads_go tvp_none">','			<span class="tvp_ads_countdown" data-role="adonend-time">10</span><span class="tvp_ads_text">广告详情</span>',"		</a>","	<% } %>","	<% if(!!feature.verticalbullet) {%>",'		<div class="tvp_barrage_grace tvp_none" data-role="tvp_vertical_bullet"></div>',"	<% } %>","</div>"].join("")}(),definitionList:function(){return["<% for(var i=0, len=data.list.length;i<len;i++) { %>",' <div class="tvp_definition_item" data-fmt="<%=data.list[i].key%>">',"  <%=data.list[i].value%>",'  <% if (data.list[i].key=="fhd") { %><div class="tvp_icon_vip">会员</div><% } %>'," </div>","<% }%>"].join("")}(),noSVGClassName:"tvp_no_svg",elements:{title:{main:".tvp_titles",text:".tvp_title span"},meta:{main:".tvp_meta_info",duration:".tvp_meta_duration",filesize:".tvp_meta_length"},layer:".tvp_container",control:".tvp_controls",play:".tvp_playpause_button",overlay:{play:".tvp_overlay_play",loading:".tvp_overlay_loading",replay:".tvp_layer_replay",filesize:".tvp_fileszie"},progress:{main:".tvp_time_rail",cur:".tvp_time_current",loaded:".tvp_time_loaded",total:".tvp_time_total",handle:".tvp_time_handle",tips:".tvp_time_float",button:".tvp_playpause_button"},fullscreen:".tvp_fullscreen_button",timePanel:{cur:".tvp_time_panel_current",total:".tvp_time_panel_total"},bigben:{main:".tvp_overlay_bigben",desc:".tvp_overlay_bigben_text",ffrw:".tvp_ico_ff_rw",bar:".tvp_time_current_small"},definition:{main:"._tvp_definition_",button:"._tvp_definition_ .tvp_definition_button > span",list:"._tvp_definition_ .tvp_definition_list"},volume:{main:".tvp_volume",btn:".tvp_btn_volume",slider:".tvp_volume_slider",total:".tvp_volume_range",cur:".tvp_volume_range_current"},track:{main:"._tvp_track_",button:"._tvp_track_ .tvp_definition_button > span",list:"._tvp_track_ .tvp_definition_list"},posterlayer:{main:".tvp_overlay_poster",img:".tvp_poster_img"},tips:{main:".tvp_overlay_tips",desc:" .tvp_overlay_tips .tvp_text"},promotion:{main:".tvp_promotion",link:".tvp_promotion >a"},loadingAd:{main:".tvp_ads",control:".tvp_ads_control",countdown:".tvp_ads_countdown",skip:".tvp_ads_skip",qqVipSkip:".tvp_ads_qqvip_skip",forbiddenSkip:".tvp_ads_skip_forbidden",forbiddenTitle:".tvp-ads-role-forbidden-title",forbiddenText:".tvp-ads-role-forbidden-text",forbiddenClose:".tvp-ads-role-forbidden-close",forbiddenIcon:".tvp-ads-role-forbidden-icon",more:".tvp_btn_ads_more",adLink:".tvp_ads_link",copyrightTips:".tvp_ads_copyright",mutebtn:'[data-role="tvp_mute_btn"]'},preview:{main:".tvp_thumbs",pic:".tvp_thumbs_pic",time:".tvp_thumbs_time",share:".tvp_thumbs_share",arrow:".tvp_thumbs_arrow"}},getHtml:function(t){var e=tvp.$.tmpl(tvp.html5skin.html),n={};return tvp.$.each(t.type==tvp.PLAYER_DEFINE.LIVE?t.html5LiveUIFeature:t.html5VodUIFeature,function(t,e){n[e]=!0}),tvp.$.each(t.html5ForbiddenUIFeature,function(t,e){n[e]=!1}),e({feature:n})}})}(tvp.$),function(t,e){var n;t.Html5UI=function(t){this.player=t,this.videoTag=t.getPlayer(),this.$video=t.$video,this.$mod=t.$mod,this.$UILayer=null,this.$control=null,this.feature=t.config.html5VodUIFeature,n=this,this.elements={},this.constvars={progressWidth:0}},t.Html5UI.fn=t.Html5UI.prototype={getCurVideo:function(){return this.player.getCurVideo()},init:function(){this.initDom(),this.controlReady()},initDom:function(){this.$UILayer=this.$mod.find(t.html5skin.elements.layer),this.$control=this.$UILayer.find(t.html5skin.elements.control)},controlReady:function(){function n(t){try{var n="build"+t;e.isFunction(i[n])&&i[n](i.player,i.$video,i.$control,i.$UILayer)}catch(o){}}var i=this;e.each(this.feature,function(o,a){if(!i.player.isForbiddenH5UIFeature(a))if(a in i.player.config.html5FeatureExtJS){if("adonend"===a&&(i.player.config&&!i.player.config.plugins||i.player.config&&i.player.config.plugins&&!i.player.config.plugins.adonend))return;var r=i.player.config.html5FeatureExtJS[a]+"?v="+t.ts;e.getScript(r,function(){n(a)})}else n(a)}),this.player.isUseH5UIFeature("controlbar")&&(this.player.config.isHtml5ControlAlwaysShow?this.$UILayer.removeClass("tvp_controls_hide"):(this.$video.on(i.getClickName(),function(t){i.isHidden()&&(i.videoTag.currentTime||i.overlayPlayClicked)?(i.show(),i.beginHide(3e3)):i.hide(),t.preventDefault(),t.stopPropagation()}),this.hideControlTimer=0,this.$video.on("play",function(){i.beginHide(3e3)}).on("pause paused",function(){i.beginHide(3e3)})))},beginHide:function(t){var e=this;t=t||3e3,this.stopHide(),this.hideControlTimer=setTimeout(function(){e.isTouching||e.hide()},t)},stopHide:function(){this.hideControlTimer&&(clearTimeout(this.hideControlTimer),this.hideControlTimer=0)},hide:function(){this.$UILayer.addClass("tvp_controls_hide"),this.$control&&this.$control.trigger&&this.$control.trigger("tvp:control:hide"),this.$video&&(this.$video.trigger("tvp:preview:hide"),this.$video.trigger("tvp:volume:hide"))},show:function(){return 1==this.$video.data("data-playing-loadingad")?void this.hide():(this.hideControlTimer&&(clearTimeout(this.hideControlTimer),this.hideControlTimer=0),this.$UILayer.removeClass("tvp_controls_hide"),void(this.$control&&this.$control.trigger&&this.$control.trigger("tvp:control:show")))},isHidden:function(){return this.$UILayer.hasClass("tvp_controls_hide")},getDuration:function(){return this.player.getDuration()},getClickName:function(){return e.os.hasTouch?"touchend":"click"}}}(tvp,tvp.$),function(t,e){e.extend(t.Html5UI.fn,{buildbullet:function(e,n,i,o){new t.Html5Bullet(e,n,i,o)}})}(tvp,tvp.$),function(t,e){var n={speed:[5,8],one_second_per_px:65,start_postion:[50,200],margin:22,bullet_interval:2,queue_wait:.5,filter:1/3,full_nums:50,ctrl_height:120,null_tips:"别着急，弹幕要来啦~_(:з」∠)_"};t.Html5Bullet=function(t,e,n){this.player=t,this.$video=e,this.$UILayer=n,this.$videomod=this.player.$videomod,this.init()},t.Html5Bullet.prototype={init:function(){var t=this.player.config.html5LiveUIFeature,n=this.player.config.h5LiveBullet,i=this;-1!==t.indexOf("bullet")&&n&&this.player.config.isHtml5UseUI&&(e(this.get_html()).appendTo(this.$videomod),this.setDomRole(),this.bulletId=this.player.curVideo.getH5BulletId(),this.bulletId&&(this.check_bullet_db_switch().done(function(){i.init_events(),i.init_style(),i.set_top_values(),i.init_switch_status()}).fail(function(){}),this.player.sendMyBullet||(this.player.sendMyBullet=function(t){i.sendMyBullet.call(i,t)})))},topValues:{},bulletId:null,text_list:[],cgi_timer:null,cgi_interval:5,cgi_timestamp:0,bullet_timer:null,switch_open_cls:"tvp_open",switch_db_key:"tvp_switch_status",start:function(){var t=this;this.reset_animate_speed(),this.show(),t.text_list.unshift(n.null_tips),t.add_bullet(),this.text_list.length>20||t.request_live_cgi(),this.cgi_timer&&clearInterval(this.cgi_timer),this.cgi_timer=setInterval(function(){t.request_live_cgi()},1e3*this.cgi_interval),this.bullet_timer&&clearInterval(this.bullet_timer),this.bullet_timer=setInterval(function(){t.add_bullet()},1e3*n.bullet_interval)},stop:function(){clearInterval(this.cgi_timer),clearInterval(this.bullet_timer),this.hide(),this.$bullet.empty()},reset_animate_speed:function(){var t=this;setTimeout(function(){n.speed[0]=parseInt(t.$bullet.parent().width()/n.one_second_per_px),n.speed[1]=n.speed[0]+3},500)},show:function(){this.$bullet.removeClass("tvp_none")},hide:function(){this.$bullet.addClass("tvp_none")},check_switch:function(){var t=this.$switch.hasClass(this.switch_open_cls);return t},check_video:function(){var t,e=this.$video.get(0);return e?t=e.paused?!1:e.ended?!1:!0:!1},check_switch_pre_status:function(){var t=e.getData(this.switch_db_key);return"1"==t?!0:!1},update_switch_db_status:function(t){t="undefined"==typeof t?0:1,e.setData(this.switch_db_key,t)},init_events:function(){var n=this,i="click";this.$switch.off(i).on(i,function(){var e=n.check_switch(),i=e?0:1;e?(n.set_switch_close(),n.stop(),n.update_switch_db_status()):(n.set_switch_open(),n.check_video()&&n.start(),n.update_switch_db_status(1)),t.bossReport.report_bullet_switch({user_action:i,lid:n.player.curVideo.getChannelId(),bulletid:n.bulletId})});var o=function(){setTimeout(function(){n.reset_top_values()},200),n.reset_animate_speed()};e(window).off("orientationchange",o).on("orientationchange",o),this.player.$mod.off("tvp:bullet:enterfullscreen").on("tvp:bullet:enterfullscreen",o),this.player.$mod.off("tvp:bullet:cancelfullscreen").on("tvp:bullet:cancelfullscreen",o);var a=function(){n.check_switch()&&n.start()},r=function(){n.stop()},s=function(){n.stop()};this.$video.off("playing.tvp_bullet").on("playing.tvp_bullet",a).off("pause.tvp_bullet").on("pause.tvp_bullet",r).off("ended.tvp_bullet").on("ended.tvp_bullet",s)},init_style:function(){this.$videomod.css({position:"relative"})},show_switch:function(){this.$switch.parent().removeClass("tvp_none")},hide_switch:function(){this.$switch.parent().addClass("tvp_none")},set_switch_open:function(){this.$switch.addClass(this.switch_open_cls)},set_switch_close:function(){this.$switch.removeClass(this.switch_open_cls)},init_switch_status:function(){this.check_switch_pre_status()?this.set_switch_open():this.set_switch_close()},add_bullet:function(){var t=this;t.insert_bullet(t.text_list.shift()),t.insert_bullet(t.text_list.shift()),t.insert_bullet(t.text_list.shift())},sendMyBullet:function(e){return(e=t.$.filterXSS(e))?(e=['<span style="color:#fec800;">',e,"</span>"].join(""),this.text_list.unshift(e),!0):!1},check_bullet_db_switch:function(t){var n=t||e.Deferred(),i=this;return this.request_live_cgi().done(function(t){return t&&"45"==t.err_msg&&!i.hasRetry?(i.hasRetry=!0,void i.check_bullet_db_switch(n)):(t&&1==t.opened?(i.show_switch(),n.resolve()):(i.hide_switch(),n.reject()),void(t&&t.comments&&t.comments.length&&e(t.comments).each(function(t,n){var o=e.filterXSS(n.content);o&&i.text_list.push(o)})))}),n},request_live_cgi:function(){if(!(this.text_list.length>=n.full_nums)){var t,i="http://mfm.video.qq.com/live_danmu?callback=?",o=e.Deferred(),a=this;"https:"===location.protocol&&(i="https://sec.video.qq.com/p/mfm.video/live_danmu?callback=?");
var r={last_stamp:a.cgi_timestamp,pid:a.bulletId};return t=e.cookie.get("rtx_uin"),t||(t=e.cookie.get("uin")),t||(t=e.cookie.get("luin")),t&&(r.uin=t),e.ajax({url:i,cache:!1,data:r,dataType:"json",cache:!1,jsonpCallback:"tvp_request_bullet_callback_"+parseInt(1e6*Math.random())}).done(function(t){t&&t.loop_interval&&(a.cgi_interval=parseInt(t.loop_interval)),t&&t.last_stamp&&(a.cgi_timestamp=t.last_stamp),t&&t.comments&&t.comments.length&&e(t.comments).each(function(t,n){var i=e.filterXSS(n.content);i&&a.text_list.push(i)}),o.resolve(t)}),o}},get_html:function(){var t=['<div class="tvp_barrage_layer tvp_none" data-role="tvp-mod-bullet">',"</div>"];return t.join("")},setDomRole:function(){this.$bullet=this.$videomod.find('[data-role="tvp-mod-bullet"]'),this.$switch=this.$videomod.find('[data-role="tvp-bullet-switch"]')},reset_top_values:function(){this.topValues={},this.set_top_values()},set_top_values:function(){for(var t=n.margin||20,i=this.$bullet.parent().height(),i=i?i:this.player.config.height,i="string"==typeof i&&i.indexOf("%")>-1?e("#"+this.player.config.modId).height():i,o=i-n.ctrl_height,a=3,r=a;o>r;r++)this.topValues[r]=0,r+=t},get_one_top_value:function(){var t,e,n,i=[];for(var o in this.topValues)0===this.topValues[o]&&i.push(o);return t=i.length,0===t?!1:this.filter_ctrl()?!1:(n=this.get_random(0,t-1),e=i[n],this.topValues[e]=1,e)},get_topValue_count:function(){var t=[],e=[];for(var n in this.topValues)t.push(n),1===this.topValues[n]&&e.push(n);return{a:t,b:e}},filter_ctrl:function(){var t=this.get_topValue_count(),e=t.b.length,i=t.a.length;return e>=i*n.filter?1:0},insert_bullet:function(t){if(t){var i,o,a=this,r=this.get_random(n.speed[0],n.speed[1]),s=this.$bullet.width();if(s||"number"!==e.type(this.player.config.width)||(s=this.player.config.width),o=this.get_one_top_value(),o===!1)return void a.text_list.unshift(t);var l=document.createElement("div");l.className="tvp_bullet",l.style.position="absolute",l.style.top=o+"px",l.style.right="-"+s+"px",l.style.webkitTransform="translate3d(0,0,0)",l.style.webkitTransition="transform 0s linear",l.style.transition="transform 0s linear",l.innerHTML=t,a.$bullet.get(0).appendChild(l),i=e(l).width(),l.style.right="-"+i+"px",setTimeout(function(){a.move_bullet(l,{speed:r,width:i+s})},10),setTimeout(function(){l.parentNode&&l.parentNode.removeChild(l)},1e3*r+200),setTimeout(function(){"undefined"!=typeof a.topValues[o]&&(a.topValues[o]=0)},1e3*r*n.queue_wait)}},move_bullet:function(t,e){if(t){var n=t.style;e=e||{},e.speed=e.speed||8,e.width=e.width||800,n.webkitTransitionDuration=n.MozTransitionDuration=n.msTransitionDuration=n.OTransitionDuration=n.transitionDuration=e.speed+"s",n.transitionProperty=n.webkitTransitionProperty=n.MozTransitionProperty=n.msTransitionProperty=n.OTransitionProperty="transform",n.transitionTimingFunction=n.MozTransitionTimingFunction=n.msTransitionTimingFunction=n.OTransitionTimingFunction=n.webkitTransitionTimingFunction="linear",n.msTransform=n.MozTransform=n.OTransform=n.webkitTransform="translate3d(-"+e.width+"px,0,0)"}},get_random:function(t,e){var n=parseInt(Math.random()*(e-t+1)+t,10);return n}}}(tvp,tvp.$),function(t,e){e.extend(t.Html5UI.fn,{buildoverlay:function(n,i,o,a){var r=i[0],s={},l=i.parent().find("video"),d=2===l.length?!0:!1,c=this,p="tvp_none",u=!1,f=!1;e.each(t.html5skin.elements.overlay,function(t,e){s[t]=a.find(e)}),n&&n.config&&n.config.isShortVideo&&s.play.addClass("tvp_overlay_play_v2");var h={showPlay:function(){u||s.play.removeClass(p)},showReplay:function(){s.replay.removeClass(p)},showLoading:function(){s.loading.removeClass(p)},hidePlay:function(){s.play.addClass(p)},hideReplay:function(){s.replay.addClass(p)},hideLoading:function(){s.loading.addClass(p)}},v=function(){d&&"0"===e(this).attr("data-focus")||(h.hideLoading(),h.hidePlay(),h.hideReplay())},g=function(){if(!(d&&"0"===e(this).attr("data-focus")||!n.config.isHtml5ShowPlayBtnOnPause||c.isTouching||n.isDefinitionSwitching||u||"function"===e.type(n.isPlayingLoadingAd)&&n.isPlayingLoadingAd()||n.isPlayingSplit)){var t=this.ended;h.hideLoading(),t?(h.hidePlay(),h.showReplay()):(h.showPlay(),h.hideReplay())}},m=function(){d&&"0"===e(this).attr("data-focus")||n.isDefinitionSwitching||(h.showLoading(),h.hidePlay(),h.hideReplay())},y=function(){d&&"0"===e(this).attr("data-focus")||h.hideLoading()},w=function(){d&&"0"===e(this).attr("data-focus")||n.isDefinitionSwitching||(h.hideReplay(),h.hidePlay(),h.showLoading())},_=function(){h.hideLoading(),h.hidePlay(),h.showReplay()},b=function(){u=!0},x=function(){u=!1};l.on("overlay_ctrl_showplay",h.showPlay).on("overlay_ctrl_hideplay",h.hidePlay).on("overlay_ctrl_showreplay",h.showReplay).on("overlay_ctrl_hidereplay",h.hideReplay).on("overlay_ctrl_showloading",h.showLoading).on("overlay_ctrl_hideloading",h.hideLoading),l.on("tvp_durationlimit_show",b).on("tvp_durationlimit_hide",x),l.on("play",function(){}).on("canplay",function(){}).on("playing",v).on("pause",g).on("seeking",m).on("seeked",y).on("tvp_adonend_ended",_),i.on("tvp:overlay:update:filesize",function(t,e){e&&s.filesize&&(e=parseInt(e/1024),e>1024?e=parseInt(e/102.4)/10+"M":e+="K",s.filesize.html(e))}),e.os.ios?setTimeout(function(){i.on("waiting",w)},50):e.os.android&&i.on("waiting",w);var $=function(){if(n.isPlayingSplit){var e=l.filter('[data-focus="1"]');return void(e&&e[0]&&e[0].play())}r.src&&(i.trigger&&i.trigger("tvp:h5ui:playbtn:click"),f||(f=!0,c.overlayPlayClicked=!0,r.currentTime||r.load()),r.paused&&(r.play(),s.filesize&&s.filesize.addClass("tvp_none"),h.hidePlay(),h.showLoading()),t.dataset.openLazy=!1,t.$(document).trigger("tvp:report:continue").trigger("tvp:loadingad:continue"))};s.play.on("click",$);var I=function(){h.hideReplay(),h.hidePlay(),h.showLoading(),n.seekVideoIndex(1,0)},T=function(){return n.isPlayingSplit?void I():(i.trigger("tvp:player:videoreplay"),void(n.config.isHtml5ShowLoadingAdOnStart&&n.config.isHtml5ShowLoadingAdOnReplay||(r.load(),r.play(),h.hideReplay(),h.hidePlay(),h.showLoading())))};s.replay.find("[data-role=tvp_replay_btn]").on("click",T)}})}(tvp,tvp.$),function(t,e){e.extend(t.Html5UI.fn,{buildtips:function(n,i,o,a){function r(t,n){e.isUndefined(n)&&(n=5),s.main.addClass("tvp_show"),s.desc.text(t),0!=n&&setTimeout(function(){s.main.removeClass("tvp_show"),s.desc.text("")},1e3*n)}var s={};e.each(t.html5skin.elements.tips,function(t,e){s[t]=a.find(e)}),e.extend(t.Html5Player.fn,{showTips:r})}})}(tvp,tvp.$),function(t,e){e.extend(t.Html5UI.fn,{buildtitle:function(n,i,o,a){var r={};e.each(t.html5skin.elements.title,function(t,e){r[t]=a.find(e)}),i.on("tvp:video:ajaxsuc",function(){r.text.text(n.curVideo.getTitle())})}})}(tvp,tvp.$),function(t,e){e.extend(t.Html5UI.fn,{buildmeta:function(n,i,o,a){var r={};e.each(t.html5skin.elements.meta,function(t,e){r[t]=a.find(e)}),r.main.hide(),e.isUndefined(r.main)||0==r.main.length||(i.on("durationchange tvp:video:src",function(){r.duration.text(e.formatSecondsWithText(n.getDuration())),r.filesize.text(e.formatFileSize(n.getFileSize()))}),i.on("play playing",function(){r.main.hide()}))}})}(tvp,tvp.$),function(t,e){e.extend(t.Html5UI.fn,{buildplaypause:function(n,i,o,a){var r=a.find(t.html5skin.elements.play),s=i[0],l=i.parent().find("video"),d=2===l.length?!0:!1,c=this,p=!1;r.on(e.os.hasTouch&&!e.os.Mac?"touchend":"click",function(){if(d){var t=l.filter('[data-focus="1"]');t&&t.length&&(s=t[0])}s.paused?(p||(p=!0,s.currentTime||s.load()),s.play()):s.pause()}),l.on("paused pause",function(){c.isTouching||r.addClass("tvp_play").removeClass("tvp_pause")}).on("play playing",function(){r.addClass("tvp_pause").removeClass("tvp_play")})}})}(tvp,tvp.$),function(t,e){e.extend(t.Html5UI.fn,{buildtimepanel:function(n,i,o){var a={};e.each(t.html5skin.elements.timePanel,function(t,e){a[t]=o.find(e)}),e.isUndefined(a.total)||0==a.total.length||i.on("durationchange tvp:video:src",function(){a.total.text(e.formatSeconds(n.getDuration()))}),e.isUndefined(a.cur)||0==a.cur.length||i.on("timeupdate",function(){a.cur.text(e.formatSeconds(this.currentTime))}).on("tvp:player:videochange",function(){a.cur.text(e.formatSeconds(0))}),o.bind("tvp:progress:touchstart",function(t,n){a.cur.text(e.formatSeconds(n.time))})}})}(tvp,tvp.$),function(t,e){e.extend(t.Html5UI.fn,{buildprogress:function(n,i,o){function a(){var t,i,a,d,c,p,u=e.os.hasTouch,f={start:u?"touchstart":"mousedown",move:u?"touchmove":"mousemove",end:u?"touchend":"mouseup"};o.find(".tvp_time_rail").on(f.start,function(e){if(e=e.originalEvent?e.originalEvent:e,!u||e&&e.touches&&e.touches.length){var i;i=u?e.touches[0]:e,r.isRotate?(t=i.pageY,d=l.cur.height()):(t=i.pageX,d=l.cur.width()),n.isDefinitionSwitching=!1,r.isTouching=!0,r.player.isTouching=!0,s.pause(),e.preventDefault()}}).on(f.move,function(e){if(r.isTouching&&(e=e.originalEvent?e.originalEvent:e,!u||e&&e.touches&&e.touches.length)){var s,f,h;s=u?e.touches[0]:e,i=r.isRotate?s.pageY:s.pageX,a=i-t,c=d+a,p=r.isRotate?l.total.height():l.total.width(),c=c>p?p:0>c?0:c,f=c/p,h=n.getDuration()*f,h=isNaN(h)?0:h,r.setProgress(c,l),o.trigger&&o.trigger("tvp:progress:touchstart",{pos:c,precent:f,time:h}),e.preventDefault()}}).on(f.end,function(t){if(r.isTouching){p=r.isRotate?l.total.height():l.total.width();var e=c/p,i=n.getDuration()*e;n.seek(i),o.trigger&&o.trigger("tvp:progress:touchend"),r.isTouching=!1,r.player.isTouching=!1,t.preventDefault(),t.stopPropagation()}})}var r=this,s=i[0],l={};this.isTouching=!1,e.each(t.html5skin.elements.progress,function(t,e){l[t]=o.find(e)}),(t.$.browser.qqnews||t.$.browser.kuaibao)&&top.location.hostname&&(top._jsBridgePageScroll_=function(){return r.isTouching?0:1}),a(),i.bind("timeupdate",function(t){if(t=t.originalEvent?t.originalEvent:t,!r.isHidden()&&!n.isDefinitionSwitching&&4==t.target.readyState){var e;e=r.isRotate?s.currentTime/n.getDuration()*l.total.height():s.currentTime/n.getDuration()*l.total.width(),r.setProgress(e,l)}}),i.bind("progress",function(){if(!n.isDefinitionSwitching){var t=0;s.buffered&&s.buffered.length>0&&s.buffered.end&&n.getDuration()&&(t=s.buffered.end(0)/n.getDuration(),t=parseInt(100*t)+"%",l.loaded.css("width",t))}}).bind("tvp:video:src",function(){n.isDefinitionSwitching||r.resetProgress()}),o.bind("tvp:control:show",function(){var t=s.currentTime/n.getDuration()*l.total.width();r.setProgress(t,l)}),e.extend(this,{resetProgress:function(){l.cur.css("width","0px"),l.loaded.css("width","0px")}})},setProgress:function(t,e){var n,i=e.handle.width(),o=t-i/2;n=e.total.height(),n=this.isRotate?e.total.height():e.total.width(),o=Math.min(o,n-i),o=Math.max(o,0),e.cur.css("width",t+"px")}})}(tvp,tvp.$),function(t,e){var n=null,i=0,o="",a="",r={calcTimer:null,times:0,changeTimes:0};e.extend(t.Html5Player||{},{isFullScreen:!1}),e.extend(t.Html5UI.fn,{buildfullscreen:function(i,o,a,r){var s=this;n=a.find(t.html5skin.elements.fullscreen),n.on("click",function(){e.os.android&&s.player.config.isHtml5UseFakeFullScreen&&o.removeClass("tvp_video_with_skin"),s.checkIsFullScreen()?s.cancelFullScreen():s.enterFullScreen()}),"onwebkitfullscreenchange"in r[0]?document.addEventListener("webkitfullscreenchange",function(){document.webkitIsFullScreen?s.enterFullScreen():s.cancelFullScreen()},!1):o.bind("webkitendfullscreen ",function(){s.cancelFullScreen()}),e(document).on("keydown",function(t){document.webkitIsFullScreen&&27==t.keyCode&&s.cancelFullScreen()});var l={enterFullScreen:function(){s.enterFullScreen()},cancelFullScreen:function(){s.cancelFullScreen()},isFakeFullscreen:function(){return s.checkIsFullScreen()}};t.Html5Player&&t.Html5Player.fn&&e.extend(t.Html5Player.fn,l),t.Html5Live&&t.Html5Live.fn&&e.extend(t.Html5Live.fn,l)},fixClassName:function(t){t?n.removeClass("tvp_fullscreen").addClass("tvp_unfullscreen"):n.removeClass("tvp_unfullscreen").addClass("tvp_fullscreen")},checkIsFullScreen:function(){return this.player&&this.player.$UILayer&&e.type(this.player.$UILayer.hasClass)&&this.player.$UILayer.hasClass("tvp_fullscreen_mode")?!0:!1},enterFullScreen:function(){this.player.videoTag&&0==this.player.videoTag.currentTime&&e.os.ipad||(top===window||top.location.href||e.os.ios)&&(this.player.config.isHtml5UseFakeFullScreen?this.allEnterFullScreen():this.enterRealFullScreen(),this.player.isFullScreen=!0,this.player.callCBEvent("onfullscreen",!0),t.bossReport.user_action_report({actions:"fullscreen",vid:this.player.curVideo.getVid()}))},cancelFullScreen:function(){this.player.config.isHtml5UseFakeFullScreen?this.allCancelFullScreen():this.cancelRealFullScreen(),this.player.isFullScreen=!1,this.player.callCBEvent("onfullscreen",!1),t.bossReport.user_action_report({actions:"exitfullscreen",vid:this.player.curVideo.getVid()})},enterRealFullScreen:function(){var t=this,n=t.$video,i=n[0];i.webkitSupportsFullscreen?i.webkitEnterFullscreen():i.webkitRequestFullScreen&&i.webkitRequestFullScreen(),(e.browser.WeChat||e.browser.MQQClient)&&e.os.android||this.fixClassName(1)},cancelRealFullScreen:function(){var t=this,e=t.$video,n=e[0];this.fixClassName(0),document.webkitExitFullscreen&&n.webkitExitFullscreen()},allCancelFullScreen:function(){var t=this.player.config.isHtml5UseFakeFullScreen,n=e.os.android||e.os.ios&&this.player.config.isiPhoneShowPlaysinline;if(t&&n)try{frameElement&&(frameElement.style.cssText=o),this.cancelFakeFullScreen()}catch(i){this.player.config.isHtml5UseFakeFullScreen=!1,this.cancelRealFullScreen()}else this.cancelRealFullScreen()},allEnterFullScreen:function(){var t=this.player.config.isHtml5UseFakeFullScreen,n=e.os.android||e.os.ios&&this.player.config.isiPhoneShowPlaysinline,i=top.innerWidth;if(t&&n)try{frameElement&&(o=frameElement.style.cssText,e(frameElement).css({position:"fixed !important",left:"0",top:"0",width:i+"px !important",height:"100%","z-index":1e3})),this.enterFakeFullScreen()}catch(a){this.player.config.isHtml5UseFakeFullScreen=!1,this.enterRealFullScreen()}else this.enterRealFullScreen()},enterFakeFullScreen:function(){if(!this.checkIsFullScreen()){this.fixClassName(1),this.$mod.trigger("tvp:bullet:enterfullscreen");var t=top.innerWidth,o=top.innerHeight,r=(Math.ceil((o-t)/2),this);a=this.player.$videomod[0].style.cssText,this.player.$videomod.find("video").off("ended.recommendshow").on("ended.recommendshow",function(){r.$mod.trigger("tvp:recommend:showtip")}),this.player.$videomod.css({position:"fixed !important",left:0,top:0,width:"100%",height:"100%","z-index":1e3}),e(frameElement).css({position:"fixed !important",width:t+"px !important",height:o+1+"px !important",top:"-1px","background-color":"#000",left:0}),this.listenOrientationChange();try{i=top.document.body.scrollTop}catch(s){}n.removeClass("tvp_fullscreen"),n.addClass("tvp_unfullscreen"),this.$UILayer.addClass("tvp_fullscreen_mode")}},cancelFakeFullScreen:function(){this.fixClassName(0),this.$mod.trigger("tvp:bullet:cancelfullscreen");try{top.document.body.scrollTop=i}catch(t){}a&&(this.player.$videomod[0].style.cssText=a),n.removeClass("tvp_unfullscreen"),n.addClass("tvp_fullscreen"),this.$UILayer.removeClass("tvp_fullscreen_mode"),this.isRotate=!1,this.unbindOritationChange()},listenOrientationChange:function(){var t=this.player,n=this,o=function(){var o=top.innerWidth,a=top.innerHeight;r.s0&&r.s1&&(90===Math.abs(top.orientation)?(o=r.s1.width,a=r.s1.height):(o=r.s0.width,a=r.s0.height)),window!==top&&e(frameElement).css({position:"fixed !important",width:o+"px !important",height:a+"px !important",top:0,"background-color":"#000",left:0}),t.$videomod.css({position:"fixed !important",width:o+"px !important",height:a+"px !important",top:0,left:0}),n.isRotate=!1,top.document.body.scrollTop=i+30,setTimeout(function(){top.document.body.scrollTop=i-30},10),n.$mod&&n.$mod.trigger&&n.$mod.trigger("tvp:recommend:orientationchange"),n.$video&&n.$video.trigger&&setTimeout(function(){n.$video.trigger("timeupdate"),n.$video.trigger("progress")},100)};try{n.setCalcValue(),e(top).off("orientationchange.fullscreen").on("orientationchange.fullscreen",function(){return e.os.ipod?void o():void(r.s0&&r.s1?o():n.androidScreenCalc(o))}),e(top.document.body).on("touchmove",function(t){t.preventDefault()}),e(document.body).on("touchmove",function(t){t.preventDefault()})}catch(a){}},androidScreenCalc:function(t){var n=this;t=t||function(){},r.times>=2||(r.times+=1,r.calcTimer=setInterval(function(){n.setCalcValue(),r.changeTimes>=1&&(clearInterval(r.calcTimer),r.calcTimer=null,setTimeout(function(){n.setCalcValue(),t()},100))},50),e.os.iphone&&setTimeout(function(){n.setCalcValue(),t()},100),setTimeout(function(){r.calcTimer&&clearInterval(r.calcTimer),n.setCalcValue(),t()},2e3))},setCalcValue:function(){var t={width:top.innerWidth,height:top.innerHeight};90===Math.abs(top.orientation)?(r.s1&&r.s1.width!==t.width&&r.changeTimes++,r.s1=t):(r.s0&&r.s0.width!==t.width&&r.changeTimes++,r.s0=t)},unbindOritationChange:function(){try{e(top).off("orientationchange"),e(top.document.body).off("touchmove"),e(document.body).off("touchmove")}catch(t){}}})}(tvp,tvp.$),function(t,e){e.extend(t.Html5UI.fn,{buildbigben:function(n,i,o,a){var r={},s=0;e.each(t.html5skin.elements.bigben,function(t,e){r[t]=a.find(e)}),o.on("tvp:progress:touchstart",function(t,i){r.main.show(),r.desc.text(e.formatSeconds(i.time)),r.bar.width(i.time/n.getDuration()*100+"%"),i.time<s?r.ffrw.addClass("tvp_ico_rw"):r.ffrw.removeClass("tvp_ico_rw"),s=i.time}).on("tvp:progress:touchend",function(){r.main.hide(),r.desc.text("")})}})}(tvp,tvp.$),function(t,e){e.extend(t.Html5UI.fn,{buildposterlayer:function(n,i,o,a){var r=a.find(t.html5skin.elements.posterlayer.main),s=r.find(t.html5skin.elements.posterlayer.img),l=this,d=function(t){if(t=t||n.curVideo.getPoster()||n.config.pic,0==t.length){var o=s.attr("data-pic");""!=o&&(t=o)}e.isString(t)&&t.length>0?(t=e.filterXSS(t),s.attr("data-pic",t).css("background-image","url("+t+")"),(!e.os.ios||e.os.ios&&e.compareVersion(e.os.version,"8.0")>-1)&&i.attr("poster","http://i.gtimg.cn/qqlive/images/20150608/black.png"),c()):p(),t&&(i.trigger("tvp:video:setposter"),s.off("load.tvp_video_showposter").one("load.tvp_video_showposter",function(){i.trigger("tvp:video:setposter:suc")}),s.off("error.tvp_video_showposter").one("error.tvp_video_showposter",function(){i.trigger("tvp:video:setposter:error")}))},c=function(){n&&n.control&&n.control.checkIsFullScreen&&!n.control.checkIsFullScreen()&&r.show(),i.one("play playing",p)},p=function(){r.hide()};n.config.isHtml5ShowPosterOnStart&&d(),e.extend(this,{setPoster:d,showPoster:c,hidePoster:p}),e.extend(n,{setPoster:d}),(e.os.iphone||e.os.ipod)&&n.config.isiPhoneShowPosterOnPause&&i.on("pause paused",function(){l.isTouching||l.setPoster()})}})}(tvp,tvp.$),function(t,e){e.extend(t.Html5UI.fn,{buildshadow:function(t,n,i,o){var a=e('<div class="tvp_shadow"></div>').appendTo(o.find(".tvp_video")),r=this;t.config.isHtml5ControlAlwaysShow||a.on("click",function(n){if(t.config&&t.config.isShortVideo&&t.config.html5ForbiddenUIFeature.indexOf("controlbar")>-1){var i=t.$video&&t.$video[0];return i&&i.pause&&i.play&&(i.paused?i.play():t.config.disableShortVideoPause===!1&&i.pause()),!1}if(r.isHidden()&&(r.videoTag.currentTime||r.overlayPlayClicked)){var o=e(r.videoTag);"1"!=o.attr("data-playing-adonend")&&(r.show(),r.beginHide(3e3))}else r.hide();n.preventDefault(),n.stopPropagation()})}})}(tvp,tvp.$),function(t,e){e.extend(t.Html5UI.fn,{buildpromotion:function(n,i,o,a){function r(n){var i={cmd:3526,val:n,itype:function(){return e.os.iPad?2:e.os.iPhone||e.os.ipod?1:e.os.android?3:4}(),url:window!=top?document.referrer:document.location.href};t.report(i)}if(e.os.ipad){var s={};e.each(t.html5skin.elements.promotion,function(t,e){s[t]=a.find(e)}),s.link.bind("click",function(){r(2)}),e.isString(n.config.iPadPromotionText)&&n.config.iPadPromotionText.length>0&&s.link.text(n.config.iPadPromotionText),s.main.show(),r(1)}}})}(tvp,tvp.$),function(t,e){function n(e,n,i,o){var a=new t.Html5LoaingAd,r=o.find(t.html5skin.elements.loadingAd.main),i=r.find(t.html5skin.elements.loadingAd.control),s=r.find(t.html5skin.elements.loadingAd.countdown),l=r.find(t.html5skin.elements.loadingAd.skip),d=r.find(t.html5skin.elements.loadingAd.more),c=r.find(t.html5skin.elements.loadingAd.adLink);n.on("tvp:player:videochange",function(){e.config.isHtml5ShowLoadingAdOnChange&&(n.attr("data-playing-loadingad","1"),a.getAdData())}),n.on("tvp:player:videoreplay",function(){e.config.isHtml5ShowLoadingAdOnStart&&e.config.isHtml5ShowLoadingAdOnReplay&&(n.attr("data-playing-loadingad","1"),a.getAdData())}),a.onEnd=function(t){t=t||{},r.addClass("tvp_none"),n.attr("data-playing-loadingad","0");var i,o=function(){var a="1"===n.attr("tvp_loadingad_ended");a?n.trigger&&n.trigger("tvp:loadingad:ended",{vid:e.curVideo.getVid(),emptyAd:!(!t||!t.noOrder)}):i=setTimeout(function(){o()},100)};setTimeout(function(){clearTimeout(i)},6e3),o(),e.callCBEvent("onh5loadingadend")},a.onStart=function(){n.attr("data-playing-loadingad","1"),r.removeClass("tvp_none"),e.callCBEvent("onh5loadingadstart")},a.create(e,{$container:r,$control:i,$countdownContainer:s,$skipLink:l,$moreLink:d,$adLink:c,$copyrightTips:r.find(t.html5skin.elements.loadingAd.copyrightTips),$qqvipSkip:r.find(t.html5skin.elements.loadingAd.qqVipSkip)})}e.extend(t.Html5UI.fn,{buildloadingAd:function(i,o,a,r){function s(){if(!i.loadingadInited){if(i.loadingadInited=!0,!i.config.isHtml5ShowLoadingAdOnStart||i.curVideo.getPay())return o.trigger&&o.trigger("tvp:loadingad:ended",i.curVideo.getVid()),void(i.curVideo.getPay()&&(i.config.isHtml5ShowLoadingAdOnStart=!1,i.config.isHtml5ShowLoadingAdOnChange=!1));if("function"!=typeof t.Html5LoaingAd){var s="//imgcache.qq.com/tencentvideo_v1/tvp/js/plugins/loadingad.js?max_age=86400";return s+="&t="+t.ts,void e.getScript(s,function(){"function"!=typeof t.Html5LoaingAd?(o.attr("data-playing-loadingad","0"),o.trigger&&o.trigger("tvp:loadingad:ended",i.curVideo.getVid())):n(i,o,a,r)})}n(i,o,a,r)}}e.browser.WeChat?(t.common.afterWeChatReady({timeout:5e3}).done(function(){s()}),e(document).off("tvp:loadingad:continue").on("tvp:loadingad:continue",s)):s()}})}(tvp,tvp.$),function(t,e){e.extend(t.Html5UI.fn,{buildverticalbullet:function(e,n,i,o){e&&e.config&&e.config.useHtml5VerticalBullet&&e.config.isHtml5UseUI&&(!e.config.isShortVideo||e.config.longVideoID)&&(e._verticalbullet=new t.VerticalBullet(e,n,i,o))}})}(tvp,tvp.$),function(t,e){function n(t,n,o,a){this.player=t,this.$video=n,this.$control=o,this.$UILayer=a,this.config={},e.extend(this.config,i),this.vid=t.config.verticalBulletID?t.config.verticalBulletID:t.config.isShortVideo&&t.config.longVideoID?t.config.longVideoID:t.curVideo.getVid(),this.isShortVideo=t.config.isShortVideo,this.init()}var i={max:1,index:0,speed:1e3,maxCount:50};n.prototype={init:function(){this.initRole(),this.initEvents()},initRole:function(){this.$bullet=this.$UILayer.find('[data-role="tvp_vertical_bullet"]')},initEvents:function(){var t=this;this.$video.on("playing.v_bullet",function(){t.hasInit?t.isPlayingAd()||(t.needReInit&&(t.initHTML(),t.needReInit=!1),t.show(),t.startMove()):t.initData()}),this.$video.on("pause.v_bullet",function(){t.isPlayingAd()||(t.hide(),t.stopMove())}),this.$video.on("ended.v_bullet",function(){t.index=0,t.needReInit=!0})},initData:function(){var t=this;this.hasInit||(this.hasInit=!0,this.requestData().done(function(){t.initHTML(),t.isPlayingAd()||(t.show(),t.startMove())}).fail(function(){t.player.dataset&&(t.player.dataset.noShortVideoData=!0)}))},initHTML:function(){if(this.data&&this.data.length){var t=this.blankData.concat(this.data.slice(0,this.config.max)),e=this.renderHTML(t);this.index=this.config.max-1,this.$bullet.html(e)}},startMove:function(){var t=this;this.stopMove(),!this.data||this.data.length<1||(this.timer=setInterval(function(){t.addNext()},this.config.speed))},stopMove:function(){this.timer&&clearInterval(this.timer),this.timer=null},show:function(){this.$bullet.removeClass("tvp_none")},hide:function(){this.$bullet.addClass("tvp_none")},addNext:function(){var t=this;!this.data||this.data.length<1||(this.$bullet.find(".tvp_out").remove(),setTimeout(function(){t.$bullet.find(".tvp_barrage_item:nth-child(1)").addClass("tvp_out"),t.$bullet.find(".tvp_barrage_item:nth-child(2)").addClass("tvp_fadeout"),t.index++;var e=t.$bullet.find(".tvp_barrage_item");if(t.index>t.data.length)return void(e&&e.length||(t.stopMove(),t.hide()));var n=t.renderHTML(t.data.slice(t.index,t.index+1));t.$bullet.append(n)},50))},renderHTML:function(t){return t&&t.length?e.tmpl(this.htmlStr,{data:t}):""},isPlayingAd:function(){var t=!1;return"1"===this.$video.attr("data-playing-loadingad")&&(t=!0),"1"===this.$video.attr("data-playing-adonend")&&(t=!0),t},blankData:[{content:""},{content:""}],htmlStr:["<% for(var i=0,len = data.length;i<len; i++) { %>",' <div class="tvp_barrage_item">',"   <% if(data[i].content) {%>",'     <span class="tvp_text"><%=tvp.$.filterXSS(data[i].content)%></span>',"   <% }%>"," </div>","<% } %>"].join(""),requestData:function(){var t=e.Deferred(),n=this;if(this.data&&this.data.length>0)return t.resolve(),t;var i="http://bullet.video.qq.com/fcgi-bin/comment/news_hotlist?vid="+n.vid;"https:"===location.protocol&&(i="https://sec.video.qq.com/p/bullet.video/fcgi-bin/comment/news_hotlist?vid="+n.vid);var o=e.Ajax||e.ajax;return o({url:i,beforeSend:function(t){t.withCredentials=!0},xhrFields:{withCredentials:!0},dataType:"html",data:{otype:"json",num:n.isShortVideo?20:50},cache:!1,timeout:8e3}).done(function(e){try{e=e&&0===e.indexOf("QZOutputJson=")?e.replace(/^QZOutputJson=/,"").replace(/\;$/,""):e.replace(/^[\w_]+\(/,"").replace(/\)$/,""),e=JSON.parse(e)}catch(i){e=""}return"string"==typeof e?void t.reject():void(e&&e.hotcomments&&e.hotcomments.length?(n.data=e.hotcomments.slice(0,n.config.maxCount),t.resolve()):t.reject())}).fail(function(){t.reject()}),t}},t.VerticalBullet=n}(tvp,tvp.$),function(t,e){var n="";t.MP4Skin={html:function(){return['<div style="background:#000000 url(http://i.gtimg.cn/qqlive/images/20121119/i1353305744_1.jpg) center center no-repeat;">','	<a style="width:100%;height:100%;display:block" class="tvp_mp4_link"></a>',"</div>"].join("")}()},t.MP4Link=function(e,n){this.config.width=t.$.filterXSS(e),this.config.height=t.$.filterXSS(n),this.$elements=null,this.$mp4linker=null},t.MP4Link.fn=t.MP4Link.prototype=new t.BaseHtml5,e.extend(t.MP4Link.fn,{write:function(n){var i=null,o=this;if(i="object"==e.type(n)&&1==n.nodeType?n:t.$.getByID(n)){this.playerid=this.config.playerid,this.playerid||(this.playerid="tenvideo_video_player_"+t.MP4Link.maxId++),this.modId=n,this.$mod=e("#"+n),this.oninited();var a=t.MP4Skin.html;videoModId="mod_"+this.playerid;var r=e('<div id="'+videoModId+'"></div>').appendTo(o.$mod);r.width(e.formatSize(this.config.width)).height(e.formatSize(this.config.height)),this.$elements=e(a).appendTo(r).css("width",o.config.width).css("height",o.config.height),this.videomod=e.getByID(videoModId),this.$mp4linker=this.$elements.find(".tvp_mp4_link"),this.callCBEvent("onwrite"),this.registerMonitor(),this.play(this.curVideo),this.checkPlayerSize&&this.checkPlayerSize()}},play:function(i){var o=this;i instanceof t.VideoInfo&&(isVidChange=i.getVid()!=n&&""!=n,o.setCurVideo(i),isVidChange&&o.callCBEvent("onchange",o.curVideo.getFullVid()),n=o.curVideo.getFullVid()),o.$mp4linker.trigger("tvp:mp4:ajaxstart",i instanceof t.VideoInfo?i.getVid():i),o.curVideo.getMP4Url().done(function(t){o.$mp4linker.trigger("tvp:mp4:ajaxsuc",t),o.$mp4linker.attr("href",t),o.$mp4linker.trigger("tvp:mp4:src",t),o.callCBEvent("onplay",o.curVideo.lastQueryVid,o.curVideo),window!=top&&o.$mp4linker.bind(e.os.hasTouch?"touchend":"click",function(e){e.preventDefault(),top.location.href=t})}).fail(function(t,e){o.showError(t,e),o.$mp4linker.trigger("tvp:mp4:ajaxerror"),o.$mp4linker.trigger("tvp:mp4:error",t,e),o.callCBEvent("onerror",t,e)}).always(function(){n=o.curVideo.lastQueryVid})},getPlayerType:function(){return"mp4"},getDuration:function(){var t=this.curVideo.getDuration();return!isNaN(t)&&t>0?t:0}}),t.MP4Link.maxId=0}(tvp,tvp.$),function(t,e){e.extend(t.MP4Link.fn,{buildmonitor:function(){if(!e.isUndefined(t.H5Monitor)){var n=this,i=null;this.$mp4linker.on("tvp:mp4:ajaxstart",function(e,o){i=null,i=new t.H5Monitor(o,n),i.addStep(1011)}).on("tvp:mp4:ajaxsuc",function(){i.reportStep(1011,{val1:1,val2:0})}).on("tvp:mp4:src",function(){i.report(4,1)}).on("click",function(){i&&e.isFunction(i.report)&&i.report(6,1)})}}})}(tvp,tvp.$),function(t,e){t.BaseFlash=function(){this.swfPathRoot="",this.flashobj=null,this.flashVarsKeyMapToCfg={}},"number"!=typeof t.BaseFlash.maxId&&(t.BaseFlash.maxId=0),t.BaseFlash.prototype=new t.BasePlayer,e.extend(t.BaseFlash.prototype,{getFlashVar:function(){return""},getFlashVarVal:function(){var t={},n=this.config;return e.each(this.flashVarsKeyMapToCfg,function(i,o){var a=o;if(a in n){var r=e.type(n[a]);"boolean"==r?t[i]=n[a]?1:0:("number"==r||"string"===r)&&(t[i]=n[a])}else t[i]=""}),t},getFlashSwfUrl:function(){var n="";if(this.config.type==t.PLAYER_DEFINE.LIVE)e.isString(this.config.liveFlashUrl)&&this.config.liveFlashUrl.length>0?n=this.config.liveFlashUrl:(n=this.swfPathRoot+this.config.liveFlashSwfType.replace(/[^\w+]/gi,"")+".swf",n+="?max_age=86400&v="+this.config.flashVersionTag||"20140615");else{e.isString(this.config.vodFlashUrl)&&this.config.vodFlashUrl.length>0?n=this.config.vodFlashUrl:(n=this.swfPathRoot+this.config.vodFlashType.replace(/[^\w+]/gi,"")+".swf",n+="?max_age=86400&v="+this.config.flashVersionTag||"20140615");var i=navigator.userAgent;i.indexOf("Maxthon")>0&&i.indexOf("Chrome")>0&&(n+=(n.indexOf("?")>0?"&":"?")+"_="+t.$.now())}if(n=e.filterXSS(n),"undefined"!=typeof window.console&&e.isFunction(window.console.warn)&&n.indexOf("TencentPlayer.swf")>0&&-1==e.inArray(document.location.hostname,["v.qq.com","film.qq.com"])){var o="您当前使用的flash播放器是腾讯视频官网专用版，如无必要请使用外贴版本";e.browser.chrome?window.console.warn("%c"+o,"background: rgba(252,234,187,1)"):window.console.warn(o)}return n},getFlashHTML:function(){var t=this.getFlashVar(),n=this.getFlashSwfUrl(),i=e.formatSize(this.config.width),o=e.formatSize(this.config.height);this.playerid||(this.playerid=this.config.playerid?this.config.playerid:"tenvideo_flash_player_"+(new Date).getTime());var a=['<param name="allowScriptAccess" value="always" />','<param name="movie" value="'+n+'" />','<param name="quality" value="high" />','<param name="allowFullScreen" value="true"/>','<param name="play" value="true" />','<param name="wmode" value="'+e.filterXSS(this.config.flashWmode)+'" />','<param name="flashvars" value="'+t+'"/>','<param name="type" value="application/x-shockwave-flash" />','<param name="pluginspage" value="http://get.adobe.com/cn/flashplayer/" />'].join("\n"),r="";return e.browser.ie?(r+=11==e.browser.version?'<object data="'+n+'" type="application/x-shockwave-flash" width="'+i+'" height="'+o+'" id="'+this.playerid+'" codebase="http://fpdownload.adobe.com/pub/shockwave/cabs/flash/swflash.cab#version=10,2,0,0">\n':'<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="'+i+'" height="'+o+'" id="'+this.playerid+'" codebase="http://fpdownload.adobe.com/pub/shockwave/cabs/flash/swflash.cab#version=10,2,0,0">\n',r+=a,r+='	<div id="tvp_flash_install" style="line-height:'+o+';background:#000000;text-align:center"><a href="http://www.adobe.com/go/getflashplayer" target="_blank" style="color:#ffffff;font-size:14px;padding:10px;">点击此处安装播放视频需要的flash插件</a></div>\n',r+="</object>"):r+='<embed wmode="'+e.filterXSS(this.config.flashWmode)+'" flashvars="'+t+'" src="'+n+'" quality="high" name="'+this.playerid+'" id="'+this.playerid+'" bgcolor="#000000" width="'+i+'" height="'+o+'" align="middle" allowScriptAccess="always" allowFullScreen="true"  type="application/x-shockwave-flash" pluginspage="http://get.adobe.com/cn/flashplayer/"></embed>',r},write:function(n){var i=null;if("object"==e.type(n)&&1==n.nodeType?(i=n,this.$mod=e("#"+n.id),this.modId=this.$mod.attr("id")||""):(i=t.$.getByID(n),this.modId=n,this.$mod=e(i)),i){var o=this.getFlashHTML(),a=e.now(),r=this.getFlashSwfUrl(),s=3544,l=this,d="mod_"+this.playerid;
this.on(t.ACTION.onFlashPlayerInited,function(){t.report({cmd:s,speed:e.now()-a,appId:l.config.appid,contentId:l.config.contentId,vid:l.curVideo.getFullVid()||l.curVideo.getChannelId(),str3:l.getPlayerType(),str4:r})}),t.report({cmd:s,appId:l.config.appid,contentId:l.config.contentId,vid:l.curVideo.getFullVid()||l.curVideo.getChannelId(),str3:l.getPlayerType(),str4:r}),window.jQuery?jQuery(i).html('<div id="'+d+'" class="tenvideo_player">'+o+"</div>"):i.innerHTML='<div id="'+d+'" class="tenvideo_player">'+o+"</div>",this.flashobj=e.browser.ie?document.getElementById(this.playerid):document.embeds[this.playerid],this.videomod=e.getByID(d);var c=this.config.height+"",p=e.getByID("tvp_flash_install");c.indexOf("%")>0&&p&&(p.style.lineHeight=i.offsetHeight)}},getPlayer:function(){return this.flashobj},listenerFlashCrash:function(){function n(){if(o){var e={ftime:(+new Date+"").slice(0,11),uin:t.$.cookie.get("uin")||t.$.cookie.get("luin"),playerverion:o.player,streamtype:o.steam,p2pvertion:o.p2p,os:o.os,flashersion:o.flash,browser:i(),browserverstion:t.$.browser.version,ua:navigator.userAgent.toLowerCase(),playtype:1===a.config.type?"live":"vod",vurl:document.URL},n=new Image(1,1);n.src="http://btrace.video.qq.com/kvcollect?BossId=3353&Pwd=1856399576&_dc="+Math.random()+"&"+t.$.param(e)}}function i(){return t.$.browser.ie?"ie":t.$.browser.chrome?"chrome":t.$.browser.firefox?"firefox":t.$.browser.safari?"safari":"other"}if(!this.timer_flash_crash&&this.flashobj&&"function"===e.type(this.flashobj.getFPInfo)){var o=this.flashobj.getFPInfo(),a=this;this.timer_flash_crash=setInterval(function(){var t;a&&a.flashobj&&"function"===e.type(a.flashobj.getFPInfo)?(t=a.flashobj.getFPInfo())&&(o=t):(clearInterval(a.timer_flash_crash),n())},15e3)}}})}(tvp,tvp.$),function(t,e){t.FlashLivePlayer=function(n,i){this.config=e.extend({},this.config),t.BaseFlash.maxId++,this.flashVarsKeyMapToCfg={showcfg:"isLiveFlashShowCfg",loadingswf:"loadingswf",share:"share",oid:"oid",apptype:"liveFlashAppType",full:"isLiveflashShowFullBtn",wmark:"liveFlashWatermark",autoplay:"autoplay"},this.swfPathRoot="http://imgcache.qq.com/minivideo_v1/vd/res/",this.config.width=e.filterXSS(n),this.config.height=e.filterXSS(i),this.loginResponse=function(){this.flashobj&&"function"!=typeof this.flashobj.loginCallback||(this.flashobj.loginCallback(t.FlashLivePlayer.flashloginParam),t.FlashLivePlayer.flashloginParam={})},window.playerInit=function(e){var n,i,o;if(e&&t.Player&&t.Player.instance){if(n=t.Player.instance[e],!n)return;o=2===n.config.type?n.curVideo.getFullVid():n.curVideo.getChannelId(),i=n.callCBEvent("ongetnextenable",o)?1:0,n.execFlashMethod("setNextEnable",i),n.trigger(t.ACTION.onFlashPlayerInited),n.callCBEvent("oninited"),n.callCBEvent("onplay",o)}},window._flash_play_error=function(e,n){var i;e&&t.Player&&t.Player.instance&&(i=t.Player.instance[e],i.callCBEvent("onerror",n))}},t.FlashLivePlayer.prototype=new t.BaseFlash,e.extend(t.FlashLivePlayer.prototype,{getChannelURl:function(t){return"http://zb.v.qq.com:1863/?progid="+t},getPlayerType:function(){return"liveflash"},getFlashVar:function(){var n="",i="TenVideo_FlashLive_",o=this.getFlashVarVal(),a=window!=top?document.referrer:document.location.href,r="";n+="vid="+this.curVideo.getChannelId(),n+="&vurl="+this.getChannelURl(this.curVideo.getChannelId()),n+="&sktype="+(this.curVideo.getIsLookBack()?"vod":"live"),r="&",n+=r,n+="funCnlInfo="+i+"GetChannelInfo",n+="&funTopUrl="+i+"GetTopUrl",n+="&funLogin="+i+"IsLogin",n+="&funOpenLogin="+i+"OpenLogin",n+="&funSwitchPlayer="+i+"SwitchPlayer",n+="&host="+encodeURIComponent(a),n+="&txvjsv=2.0",e.each(o,function(t,i){(e.isString(i)&&i.length>0||"number"==e.type(i))&&(n+="&"+t+"="+e.filterXSS(i))});for(var s in this.config.liveFlashExtVars)n+=["&",encodeURIComponent(s),"=",encodeURIComponent(this.config.liveFlashExtVars[s])].join("");return n+="&p="+t.livehub.g_flashp2p||0},play:function(e){if(this.flashobj){if(e=e||this.curVideo,!e instanceof t.VideoInfo)throw new Error("传入的对象不是tvp.VideoInfo的实例");var n=!!e.getIsLookBack(),i=e.getChannelId(),o=this.getChannelURl(i),a=t.livehub.g_flashp2p||0;""!=i&&("undefined"!=typeof this.flashobj.setSkinType&&this.flashobj.setSkinType(n?"vod":"live"),"undefined"!=typeof this.flashobj.loadAndPlayVideoFromVID&&this.flashobj.loadAndPlayVideoFromVID(o,i,e.getLiveReTime()||"","",a),this.callCBEvent("onplay",e.getChannelId()),this.setCurVideo(e),this.callCBEvent("onchange",e.getChannelId()))}},stop:function(){this.flashobj&&(e.isUndefined(this.flashobj.stopVideo)||this.flashobj.stopVideo())}}),t.FlashLivePlayer.ADTYPE={WEI_DIAN_TAI:"weidiantai",WEI_DIAN_SHI:"weidianshi",LIVE:"live",IN_LIVE:"inlive"},window.thisplay=function(n,i){var o;i&&i.id&&t.Player&&t.Player.instance&&(o=t.Player.instance[i.id]||{},o.isStartPlay=!0,o.instance&&(o.instance.isStartPlay=!0),"function"==typeof o.callCBEvent&&o.callCBEvent("onplaying",o.getCurVideo().getChannelId(),i),"function"===e.type(o.listenerFlashCrash)&&o.listenerFlashCrash.call(o))},window.toggleFakeFullScreen=function(e){var n,i,o;return e&&e.id&&t.Player&&t.Player.instance?(n=t.Player.instance[e.id]||{},n.playerid?(i=t.$("#"+n.playerid),i&&i.length?(o=i.parent()[0],e.enter?(n._cache_flash_style=i[0].style.cssText,n._cache_flash_parent_style=i.parent()[0].style.cssText,i.css({width:"100%",height:"100%"}).parent().css({position:"fixed",top:0,left:0,width:"100%",height:"100%","z-index":n.config.flashFakeFullscreenZindex||9999}),$j("html,body").css({overflow:"hidden"}),n._cache_flash_isfullscreen=!0,"function"===t.$.type(n.onFlashFakeFullScreenChange)&&n.onFlashFakeFullScreenChange.call(n,{isFull:1,flash:i}),!0):(i[0].style.cssText=n._cache_flash_style,i.parent()[0].style.cssText=n._cache_flash_parent_style,$j("html,body").css({overflow:"auto"}),n._cache_flash_isfullscreen=!1,"function"===t.$.type(n.onFlashFakeFullScreenChange)&&n.onFlashFakeFullScreenChange.call(n,{isFull:0,flash:i}),!0)):!1):!1):!1},window.toggleFakeFullScreen=function(e){var n,i,o;return e&&e.id&&t.Player&&t.Player.instance?(n=t.Player.instance[e.id]||{},n.playerid?(i=t.$("#"+n.playerid),i&&i.length?(o=i.parent()[0],e.enter?(n._cache_flash_style=i[0].style.cssText,n._cache_flash_parent_style=i.parent()[0].style.cssText,i.css({width:"100%",height:"100%"}).parent().css({position:"fixed",top:0,left:0,width:"100%",height:"100%","z-index":n.config.flashFakeFullscreenZindex||9999}),$j("html,body").css({overflow:"hidden"}),n._cache_flash_isfullscreen=!0,"function"===t.$.type(n.onFlashFakeFullScreenChange)&&n.onFlashFakeFullScreenChange.call(n,{isFull:1,flash:i}),!0):(i[0].style.cssText=n._cache_flash_style,i.parent()[0].style.cssText=n._cache_flash_parent_style,$j("html,body").css({overflow:"auto"}),n._cache_flash_isfullscreen=!1,"function"===t.$.type(n.onFlashFakeFullScreenChange)&&n.onFlashFakeFullScreenChange.call(n,{isFull:0,flash:i}),!0)):!1):!1):!1},window.TenVideo_FlashLive_GetChannelInfo=function(){return t.livehub.g_curCnlInfo},window.TenVideo_FlashLive_GetTopUrl=function(){var t="";try{t=top.location.href}catch(e){t=document.location.href}return t},window.TenVideo_FlashLive_IsLogin=function(){return t.common.getUin()>1e4},window.TenVideo_FlashLive_OpenLogin=function(e){t.FlashLivePlayer.flashloginParam=e||{},t.common.openLogin()},window.TenVideo_FlashLive_SwitchPlayer=e.noop}(tvp,tvp.$),tvp.$.noop,tvp.$.noop,tvp.$.noop,tvp.$.noop,tvp.$.noop,!function(t,e){var n="",i=-1,o=null;t.FlashPlayer=function(n,i){this.config=e.extend({},this.config),o=this,this.flashVarsKeyMapToCfg={cid:"coverId",tpid:"typeId",showend:"isVodFlashShowEnd",showcfg:"isVodFlashShowCfg",searchbar:"isVodFlashShowSearchBar",loadingswf:"loadingswf",share:"isVodFlashShowShare",pic:"pic",oid:"oid",skin:"vodFlashSkin",shownext:"isVodFlashShowNextBtn",list:"vodFlashListType",autoplay:"autoplay"},this.swfPathRoot="http://imgcache.qq.com/tencentvideo_v1/player/",this.swfPathRoot=t.common.get_request_url("swf_root"),t.BaseFlash.maxId++,this.isStartPlay=!1,this.getPlayerType=function(){return"flash"},this.config.width=t.$.filterXSS(n),this.config.height=t.$.filterXSS(i),window.__flashplayer_ismax=function(t){o.callCBEvent("onfullscreen",t)},window.__tenplay_popwin=function(){t.$.isFunction(o.onflashpopup)&&o.callCBEvent("onflashpopup")},window._showPlayer=function(){o.showPlayer()},window._hidePlayer=function(){o.hidePlayer()}},t.FlashPlayer.fn=t.FlashPlayer.prototype=new t.BaseFlash,e.extend(t.FlashPlayer.fn,{play:function(o){function a(t){var n={vid:t.getVidList()||t.getIdx(),duration:t.getDuration()||"",start:d,end:c,history:t.getHistoryStart()||0,vstart:s,vend:l,title:t.getTitle()||"",exid:p,pay:t.getPay(),cdntype:t.getCDNType(),bulletid:e.isFunction(t.getBulletId)?t.getBulletId():""};return n}if(!this.flashobj)throw new Error("未找到视频播放器对象，请确认flash播放器是否存在");if(e.isUndefined(o)&&"function"==typeof this.flashobj.setPlaytime)return void(-1==i?"function"==typeof this.flashobj.loadAndPlayVideoV2&&this.flashobj.loadAndPlayVideoV2(a(this.getCurVideo())):(this.flashobj.setPlaytime(i),i=-1,this.isStartPlay=!0));if(!o instanceof t.VideoInfo)throw new Error("传入的对象不是tvp.VideoInfo的实例");var r=n!=o.getFullVid();this.setCurVideo(o),r&&this.callCBEvent("onchange",this.curVideo.getFullVid()),n=this.curVideo.getFullVid(),this.isStartPlay=!1;var s=0,l=0,d=0,c=0;0==o.getIdx()?(s=o.getPrefix()||0,l=o.getEndOffset()||0):(d=o.getTagStart(),c=o.getTagEnd());var p=0==o.getIdx()?0:"k"+o.getIdx();if(this.curVideo.getVidList()!=o.getVidList()||0==o.getIdx()){var u=a(o);0==this.config.starttips&&(u.t=o.getHistoryStart()||0),"function"==typeof this.flashobj.loadAndPlayVideoV2&&(o&&o.getConnectionPlayType&&(u.tpnext=o.getConnectionPlayType()),this.flashobj.loadAndPlayVideoV2(u))}else o.getTagEnd()-o.getTagStart()>0&&this.flashobj.attractionUpdate(o.getTagStart(),o.getTagEnd(),p);this.isStartPlay=!0,this.callCBEvent("onplay",o.getFullVid()),"function"==typeof this.flashobj.setNextEnable&&this.flashobj.setNextEnable(this.callCBEvent("ongetnextenable",this.curVideo.getFullVid())?1:0)},pause:function(){o.isStartPlay&&this.flashobj&&"function"==typeof this.flashobj.getPlaytime&&"function"==typeof this.flashobj.pauseVideo&&(i=this.flashobj.getPlaytime(),this.flashobj.pauseVideo(),this.isStartPlay=!1)},getFlashVar:function(){var n="",i=this.getFlashVarVal();if(n+="vid="+this.curVideo.getVidList(),this.curVideo.getTagEnd()-this.curVideo.getTagStart()>0&&(n+="&attstart="+t.$.filterXSS(this.curVideo.getTagStart()),n+="&attend="+t.$.filterXSS(this.curVideo.getTagEnd())),this.curVideo.getDuration()>0&&(n+="&duration="+(this.curVideo.getDuration()||"")),this.curVideo.getHistoryStart()>0&&(n+="&history="+t.$.filterXSS(this.curVideo.getHistoryStart())),this.curVideo.getTstart()>0&&(n+="&t="+t.$.filterXSS(this.curVideo.getTstart())),0==this.curVideo.getIdx()&&(this.curVideo.getPrefix()>0||this.curVideo.getTail()>0)){var o=this.curVideo.getPrefix(),a=this.curVideo.getEndOffset();(o>0||a)&&(n+="&vstart="+t.$.filterXSS(o),n+="&vend="+t.$.filterXSS(a))}t.$.each(i,function(i,o){(e.isString(o)&&o.length>0||"number"==e.type(o))&&(n+="&"+i+"="+t.$.filterXSS(o))}),this.curVideo.getPay()&&(n+="&pay="+(e.isTrue(this.curVideo.getPay())?1:0)),this.curVideo.getIdx()&&(n+="&exid=k"+t.$.filterXSS(this.curVideo.getIdx())),this.curVideo.getCDNType()>0&&(n+="&cdntype="+this.curVideo.getCDNType());for(var r in this.config.vodFlashExtVars)n+=["&",encodeURIComponent(r),"=",encodeURIComponent(this.config.vodFlashExtVars[r])].join("");return e.isFunction(this.curVideo.getBullet)&&this.curVideo.getBullet()===!0&&(n+="&bullet=1",e.isFunction(this.curVideo.getBulletId)&&(n+="&bulletid="+this.curVideo.getBulletId())),this.curVideo.getTitle().length>0&&(n+="&title="+encodeURIComponent(this.curVideo.getTitle())),n},getPlaytime:function(){return this.flashobj&&"function"==typeof this.flashobj.getPlaytime?this.flashobj.getPlaytime():-1},setPlaytime:function(t,e){return this.flashobj&&"function"==typeof this.flashobj.setPlaytime?this.flashobj.setPlaytime(t,e):void 0},showPlayer:function(){if(this.flashobj){var t=""+this.config.width,e=""+this.config.height;t.indexOf("px")<0&&(t=parseInt(t)+"px"),e.indexOf("px")<0&&(e=parseInt(e)+"px"),this.flashobj.style.width=t,this.flashobj.style.height=e}},hidePlayer:function(){this.flashobj&&(this.flashobj.style.width="1px",this.flashobj.style.height="1px")}}),window.__tenplay_onMessage=function(e,n){if(t.Player&&t.Player.instance&&e){var i=t.Player.instance[e]||{},o="";switch(parseInt(n,10)){case 1:o="onpause";break;case 3:o="onresume";break;case 4:o="onvolumechange"}o&&"function"==typeof i.callCBEvent&&i.callCBEvent(o)}},window.thisplay=function(n,i){var o;i&&i.id&&t.Player&&t.Player.instance&&(o=t.Player.instance[i.id]||{},o.isStartPlay=!0,o.instance&&(o.instance.isStartPlay=!0),"function"==typeof o.callCBEvent&&o.callCBEvent("onplaying",o.getCurVid(),i),"function"===e.type(o.listenerFlashCrash)&&o.listenerFlashCrash.call(o))},window.toggleFakeFullScreen=function(e){var n,i,o;return e&&e.id&&t.Player&&t.Player.instance?(n=t.Player.instance[e.id]||{},n.playerid?(i=t.$("#"+n.playerid),i&&i.length?(o=i.parent()[0],e.enter?(n._cache_flash_style=i[0].style.cssText,n._cache_flash_parent_style=i.parent()[0].style.cssText,i.css({width:"100%",height:"100%"}).parent().css({position:"fixed",top:0,left:0,width:"100%",height:"100%","z-index":n.config.flashFakeFullscreenZindex||9999}),$j("html,body").css({overflow:"hidden"}),n._cache_flash_isfullscreen=!0,"function"===t.$.type(n.onFlashFakeFullScreenChange)&&n.onFlashFakeFullScreenChange.call(n,{isFull:1,flash:i}),!0):(i[0].style.cssText=n._cache_flash_style,i.parent()[0].style.cssText=n._cache_flash_parent_style,$j("html,body").css({overflow:"auto"}),n._cache_flash_isfullscreen=!1,"function"===t.$.type(n.onFlashFakeFullScreenChange)&&n.onFlashFakeFullScreenChange.call(n,{isFull:0,flash:i}),!0)):!1):!1):!1},window.playerInit=function(e){var n,i,o;if(e&&t.Player&&t.Player.instance){if(n=t.Player.instance[e],!n)return;o=2===n.config.type?n.curVideo.getFullVid():n.curVideo.getChannelId(),i=n.callCBEvent("ongetnextenable",o)?1:0,n.execFlashMethod("setNextEnable",i),n.trigger(t.ACTION.onFlashPlayerInited),n.callCBEvent("oninited"),n.callCBEvent("onready"),n.callCBEvent("onplay",o)}},window._flash_play_error||(window._flash_play_error=function(e,n){var i;e&&t.Player&&t.Player.instance&&(i=t.Player.instance[e],i.callCBEvent("onerror",n))}),window.attrationstop=window.nextplay=function(e,n){var i,o;if(n&&n.id&&t.Player&&t.Player.instance)i=t.Player.instance[n.id]||{};else if(t.Player&&t.Player.instance)for(o in t.Player.instance)if(t.Player.instance.hasOwnProperty(o)){i=t.Player.instance[o];break}if(i instanceof t.Player){i.callCBEvent("onended",e);var a=i.callCBEvent("ongetnext",e);return a?void i.play(a):void i.callCBEvent("onallended")}},window.__adldstart=function(e){var n;if(e&&t.Player&&t.Player.instance){if(n=t.Player.instance[e],!n)return;n.callCBEvent("onadplay")}}}(tvp,tvp.$),function(t,e){t.livehub={g_flashp2p:!1,iretcode:0,g_curCnlInfo:{},stepReport:function(n,i){var o={cmd:3545,val:n};"object"==e.type(i)&&(o=e.extend(o,{speed:i.delay,int5:i.code,vid:i.lid}),i.config&&(o=e.extend(o,{contentId:i.config.contentId,appId:i.config.appid}))),t.report(o)},FlashChecker:function(n){var i=this;this.cnlId="",this.extParam={},this.onError=e.noop,this.onCanFlash=e.noop,this.onCanHTML5=e.noop,this.onCanOCX=e.noop,this.onComplete=e.noop,this.onGetCnlId=e.noop;var o=function(e,i){i=i||{},i.config=n,t.livehub.stepReport(e,i)};this.onSuccess=function(n){n&&0==n.iretcode?(t.livehub.iretcode=n.iretcode,t.livehub.g_flashp2p=n.flashp2p?!0:!1,t.debug("get channel info:flashid="+n.flashid+",p2pid="+n.p2pid+",flashp2p="+n.flashp2p),i.cnlId=""+n.flashid||n.p2pid||"",i.onGetCnlId(""+i.cnlId,!1),t.livehub.getCurChannelInfo(i.cnlId,i.extParam),n.flashid?(o(5),i.onCanFlash(i.cnlId)):e.os.windows&&n.p2pid?(o(6),i.onCanOCX(i.cnlId)):(o(7,{code:n.iretcode}),i.onError(n.iretcode))):(o(8,{code:n.iretcode}),i.onError(500))},this.send=function(){if(o(1),t.common.isUseHtml5())return o(2),i.onCanHTML5(i.cnlId),void i.onComplete();var n=e.now();e.ajax({url:"http://info.zb.qq.com",data:{cmd:1,cnlid:i.cnlId||""},dataType:"jsonp"}).done(function(t,a){a=e.now()-n,o(3,{delay:a}),i.onSuccess(t),i.onComplete()}).fail(function(t,a){a=e.now()-n,o(4,{delay:a}),i.onError(),i.onComplete()})}},getCurChannelInfo:function(n,i){var o=t.livehub.g_curCnlInfo;i&&"object"==e.type(i)?(o.cnlId=i.cnlId,i.channelname&&(o.cnlName=i.channelname),i.currentname&&i.currenttime&&(o.prmInfo=i.currenttime+"|"+i.currentname)):o={}}}}(tvp,tvp.$),function(t,e){function n(n,i,o){var a=e.now(),s=a-r,l={cmd:3529,val:n,str4:i,speed:0>s?e.now()-a:s};r=a,"object"==e.type(o)&&e.extend(l,o),t.report(l)}function o(n,i){var o=n+"Defer";if(t[o])return t[o];var a=e.Deferred();t[o]=a;var r="//imgcache.qq.com/tencentvideo_v1/tvp/js/",l=n.toLowerCase();"OcxPlayer"==n&&"undefined"!=typeof QQLive&&"undefined"!=typeof QQLive.DEFINE&&(l="ocxplayerlite");var d=r+"module/"+l+".js?max_age=86400&v="+t.ts;if("function"==typeof t[n])a.resolve();else{var c=new t.RetCode(100123),p=e.now();c.begin(),i(1),e.getScript(d,function(){var o=e.now()-p;if("function"!=typeof t[n])throw c.reportErr(11),i(2,11,o),new Error(s[1]);i(2,0,o),c.reportSuc(),a.resolve()})}return a}function a(t){return"string"==e.type(t)&&/html5|mp4/i.test(t)}var r=e.now(),s=["未指明播放器内核","您当前使用的统一播放器JS文件不包含指定的播放器内核","video未初始化"],l=function(n,i){function r(){var t=e.Deferred();switch(m.playerType){case"flash":w="FlashPlayer";break;case"html5":u();break;case"ocx":w="OcxPlayer";break;case"mp4":w="MP4Link";break;default:s()}return t.resolve(),t}function s(){var e=navigator.platform.toLowerCase(),n=navigator.userAgent.toLowerCase(),i=t.version.getFlashMain(),o=/ipad|ipod|iphone|lepad_hls|IEMobile|WPDesktop/gi.test(n),a=(/MacIntel/gi.test(e),/ipad|ipod|iphone|playstation/gi.test(e));return t.common.isEnforceMP4()?void(w="MP4Link"):o||a||t.$.os.android?void(t.common.isSupportMP4()||t.common.isInUseH5()?u():w="MP4Link"):t.$.os.Mac&&"film.qq.com"===location.hostname?void(w="FlashPlayer"):t.$.os.Mac&&(10>i||!i)&&t.common.isSupportMP4()?void u():void(w="FlashPlayer")}function d(n){if(n.getChannelId()){var i=n.getChannelId();if("object"==e.type(y[i])&&e.isFunction(y[i].done))return y[i];y[i]=e.Deferred();var o=new t.livehub.FlashChecker(m),a=!0;return o.cnlId=n.getChannelId(),o.extParam=n.getChannelExtParam(),o.onGetCnlId=function(t,e){n.setChannelId(t),n.setIsLookBack(!!e)},o.onCanFlash=function(){w="FlashLivePlayer"},o.onCanHTML5=function(){f()},o.onCanOCX=function(){w="OcxPlayer"},o.onError=function(){c(),a=!1},o.onComplete=function(){p(),a?y[i].resolve():y[i].reject()},o.send(),y[i]}}function c(){t.common.isLiveUseHTML5()?f():w=e.os.android?"FlashLivePlayer":"OcxPlayer"}function p(){switch(m.playerType){case"flash":w="FlashLive";break;case"html5":f();break;case"flashLive":w="FlashLivePlayer";break;case"ocx":w="OcxPlayer"}}function u(){$=!0,w=m.isHtml5UseUI?"Html5Player":"Html5Tiny"}function f(){w=m.isHtml5UseUI?"Html5Live":"Html5LiveTiny"}function h(t){for(var e=!1,n=document.getElementsByTagName("link")||[],i=0,o=n.length;o>i&&!(e=n[i]&&n[i].href&&(n[i].href.indexOf(t)>0||-1!=n[i].href.indexOf("player_inews.css")));)i++;return e}function v(){function i(){if(!r){r=!0;var e=new t[w];e.init(n),g.resolve(e,w)}}var o=null,r=!1,s=e.inArray(w,x),l=m.cssPath+(n.HTML5CSSName||"player.css");(s>-1&&e.isString(n.HTML5CSSName)&&n.HTML5CSSName.length>0||a(w))&&!h(l)?(o=setTimeout(function(){n.isHtml5UseUI=!1,w=I[s],i()},5e3),l+=-1===l.indexOf("?")?"?t="+t.ts:"&t="+t.ts,e.loadCss(l).done(function(){clearTimeout(o),o=null,i()})):i()}var g=e.Deferred(),m={},y={},w="FlashPlayer",_=["未指明播放器内核","您当前使用的统一播放器JS文件不包含指定的播放器内核","video未初始化"],b=["FlashPlayer","FlashLivePlayer","MP4Link","OcxPlayer"],x=["Html5Player","Html5Live"],$=!1,I=["Html5Tiny","Html5LiveTiny"];if(b=b.concat(x),b=b.concat(I),e.extend(m,n),e.isUndefined(n.isHTML5UseUI)||(m.isHtml5UseUI=n.isHTML5UseUI),!n.video instanceof t.VideoInfo)throw new Error(_[2]);return n.video.setCurPlayer(i),l.checkLivePlayer=d,e.when(n.type==t.PLAYER_DEFINE.VOD?r():d(n.video)).then(function(){var a="",r=function(e,i,o){t.report({cmd:3531,val:e,val2:i||0,str3:a,speed:o||0,contentId:n.contentId||"",appId:n.appid||0})};if(!w)throw new Error(_[0]);if(e.inArray(w,b)<0)throw new Error(_[1]);n.type==t.PLAYER_DEFINE.VOD&&$&&i&&i.trigger&&i.trigger(t.ACTION.onVodH5Init),"function"!=typeof t[w]?o(w,r).done(function(){v.call(i)}):v.call(i)}),g},d={player:"playerType",showcfg:["isVodFlashShowCfg","isLiveFlashShowCfg"],searchbar:["isVodFlashShowSearchBar"],showend:["isVodFlashShowEnd"],tpid:["typeId"],cid:["coverId"],flashshownext:["isVodFlashShowNextBtn"],loadingswf:"loadingswf",wmode:"flashWmode",flashskin:["vodFlashSkin"],extvars:["vodFlashExtVars"],swftype:["vodFlashType"],swfurl:["vodFlashUrl","liveFlashUrl"]};t.Player=function(i,o){this.sessionId=e.createGUID(),n(1,this.sessionId),this.instance=null,this.config={},this._oldcfg={},e.extend(this.config,t.defaultConfig),this.setting("width",i),this.setting("height",o)},t.Player.fn=t.Player.prototype=new t.BasePlayer,e.extend(t.Player.fn,{setting:function(t,e){this.config[t]=e},output:function(t){this.setting("modId",t),this.create(this.config)},create:function(o){var a=this;a.config=e.extend({},a.config,o),n(2,this.sessionId,{contentId:a.config.contentId||"",appId:a.config.appid||0});var r=function(){l(a.config,a).done(function(i,r){try{n(3,a.sessionId,{vid:i.curVideo.getFullVid()||i.curVideo.getChannelId(),str3:i.getPlayerType(),contentId:a.config.contentId||"",appId:a.config.appid||0})}catch(s){}a.instance=i,a.instance.instance=a;for(var d in a.instance)"instance"!=d&&("on"==d.substr(0,2)&&e.isFunction(a[d])&&a[d]!=t.$.noop||(a[d]=a.instance[d]));i.callCBEvent("onwrite"),a.config.type==t.PLAYER_DEFINE.LIVE&&(a.play=function(n){e.isString(n)?(a.config.video.setChannelId(n),n=a.config.video):n instanceof t.VideoInfo&&e.when(l.checkLivePlayer(n)).then(function(){a.instance instanceof t[r]?a.instance.play(n):(o.video=n,l(o))})}),t.Player.instance[a.playerid]=a}).always(function(){function n(t,n){try{var i="build"+t;return e.isFunction(a[i])?(a[i].call(a,n),!0):!1}catch(o){}}if(e.each(a.config.plugins,function(t,i){if(i&&t in a.config.pluginUrl){var o,r=e.isPlainObject(i)?i:{};if("AppRecommend"===t&&a.config.plugins.adonend)return;if(!n(t,r)){o=t;var s=a.config.libpath+a.config.pluginUrl[o];e.isString(s)&&""!=e.trim(s)&&e.getScript(s,function(){n(t,r)})}}}),window.console&&i){var o={jQuery:"jq",Zepto:"zepto",jq:"jqmobi"};for(var r in o)if("function"==typeof window[r]){if("jQuery"===r&&"function"!=typeof jQuery.Deferred)break;console.warn("\n"+t.name+"提示：\n您当前页面使用了"+r+"\n建议您引用"+t.name+" for "+r+"专用版，更轻更快更精简\nJS地址://imgcache.qq.com/tencentvideo_v1/tvp/js/tvp.player_v2_"+o[r]+".js\n\n")}}})},s=function(){var n,i=e.Deferred(),o="//v.qq.com/iframe/tvp.config.js";if(t.config)return i.resolve(),i;var a=parseInt(100*Math.random(),10)+1,r=100;return 100-r>a?(i.reject(),i):(n=e.getScript(o,function(){return t.config?void i.resolve():void i.reject()}),n&&"function"===e.type(n.fail)&&n.fail(function(){i.reject()}),setTimeout(function(){i.reject()},4e3),i)};s().done(function(){try{t.config&&t.config.defaultConfig&&e.extend(a.config,t.config.defaultConfig)}catch(n){}r()}).fail(function(){r()})},addParam:function(n,i){t.report({cmd:3546,val:1}),"config"==n&&"object"==e.type(i)?e.extend(this.config,i):this._oldcfg[n]=i},setCurVideo:function(e){t.report({cmd:3546,val:2}),this.config.video=e,e&&e instanceof t.VideoInfo&&e.setCurPlayer(this)},write:function(n){t.report({cmd:3546,val:3}),this.config.modId=n;var i=1==this._oldcfg.type?1:2,o=this;e.each(this._oldcfg,function(n,a){n in d?e.isArray(d[n])?2==i?o.config[d[n][0]]=a:1==i&&d[n].length>=2&&(o.config[d[n][1]]=a):e.isString(d[n])&&(o.config[d[n]]=a):n in t.defaultConfig&&(o.config[n]=a)}),delete this._oldcfg,this.create(this.config)}}),t.create=l}(tvp,tvp.$),tvp.Player.instance={},function(t,e){function n(t){var n=t.t?t.t.curVideo:!1,o=e.extend({lid:n?n.getChannelId():"",pageText2:t.text2},i,t);return this.op=o,this.init(o),this}var i={pluginName:"AppBanner",isAutoReport:!0,isAndroid:/android/i.test(navigator.userAgent.toLowerCase()),btnTexts:["下载","打开","升级"],btnText:"下载腾讯视频，观看更多",btnText2:"下载微视客户端，发现更多精彩",appTextName:{weishi:"微视客户端",qqlive:"腾讯视频"},style:"none",isResetWords:!1,downloader:!0,range:[1,2],tpl:['<div class="tvp_app_banner">','<a data-action="applink" data-role="appbannerlink" data-status="down" data-downloadurl="${url}" data-url="${openUrl}" ${iframe} class="tvp_app_btn">','<div class="tvp_progress">','<div class="tvp_progress_current" data-role="appbannerbtnprogress"></div>',"</div>",'<div class="tvp_btn_text" data-role="appbannerbtntext" data-text="${btnText}">','<div class="tvp_app_logo" style="background-image:url(http://i.gtimg.cn/qqlive/images/20150722/tvp_app_logo.png)"></div>',"</div>","</a>","</div>"].join("")};e.extend(n.prototype,{init:function(t){var n=this;this.initDefer=e.Deferred(),this.initStyle(t),this.getAppInfo(t).done(function(){n.initRoles(t),n.fixTextAndUrl(t)})},initStyle:function(t){"none"!=t.style&&e("head").append(t.style)},initRoles:function(t){var n=t.modId?e("#"+t.modId):t.mod;this.$mod=n,this.fixTpl(),this.$box=n,this.$text1=n.find("[data-role=appbannertext1]"),this.$text2=n.find("[data-role=appbannertext2]"),this.$btn=n.find("[data-role=appbannerlink]"),this.$btnText=n.find("[data-role=appbannerbtntext]"),this.$progress=n.find("[data-role=appbannerbtnprogress]"),this.$btn.attr("data-promotionId",t.promotionId||140),this.fixStyle(),this.$box.show()},getAppInfo:function(n){function i(i){i=i||t.app.config.defaultName;var o=t.app.getPackageInfo();n=e.extend(n,{appName:i,logoClass:o[i].logoClass,text1:o[i].text1,text2:o[i].text2})}if(n.loadAppInfoDefer)return n.loadAppInfoDefer;var o=e.Deferred();return n.loadAppInfoDefer=o,n.pay&&n.cid?(i(n.appName),o.resolve()):n.appName&&n.extraApp?(i(n.appName),o.resolve()):n.lid?(i(n.appName),o.resolve()):n.vid&&(n.appName="",i(n.appName),o.resolve()),o},fixResult:function(){var n=this.op,i=this,o=[],a=e.Deferred();return this.getAppInfo(n).done(function(){o[0]=(new Date).getTime(),t.app.check(n).done(function(e){o[1]=(new Date).getTime(),i.info=e,i.info.speed=o.length>1?o[1]-o[0]:0,i.initDefer&&i.initDefer.done(function(e){var o={},r=function(){i.showtips(),i.bindTap(),a.resolve(),o.rmdword&&o.alginfo&&o.tab_id&&(i.rcmd_show_report=function(e){i.rcmd_show_report_done||(i.rcmd_show_report_done=!0,t.bossReport.rcmdTextReport(1,o.tab_id,o.alginfo,e))}),i.$text2&&0!==i.$text2.length||i.rcmd_show_report&&i.rcmd_show_report(2)};if(n.lid)return n.recmdText=i.op.text,void r();if(e||i.op.noRecmd)return void r();var s=t.common.recomdTextById(n.vid);return"object"==typeof s&&s.rmdword&&"string"==typeof s.rmdword?(i.op.recmdText=s.rmdword,o=s,void r()):void(s&&s.done&&s.done(function(){var e=t.common.recomdText[n.vid];e&&e.rmdword&&(i.op.recmdText=e.rmdword,o=e),r()}))})})}),a},fixTpl:function(){var t=this.op;t.btnText===i.btnText&&"weishi"===t.appName&&(t.btnText=t.btnText2);var n=e.formatTpl(t.tpl,{text1:e.filterXSS(t.btnText+t.text1),text2:e.filterXSS(t.pageText2||t.text2),btnText:e.filterXSS(t.btnText),url:"javascript:;",iframe:window!=top?'target="_parent"':""});this.$mod.append(n)},fixStyle:function(){(e.os.android&&window.screen.width>480||e.os.iphone&&window.screen.width<=320)&&this.$box.addClass("tvp_fixRight"),this.op.appName&&this.op.logoClass&&this.$box.addClass(this.op.logoClass),0===this.$text1.length&&this.$mod.width()===window.innerWidth&&this.$mod.css({width:this.$btn.width()-30+"px"})},report:function(n){var i=this,o=this.op,a=o.reportParams?o.reportParams.int5:0,r={cmd:0==n?3534:3535,vid:o.vid,appId:o.appId,contentId:o.contentId,val:o.contentType,speed:i.info.speed,int5:a||0,ctype:i.info.hasApp,int6:o.promotionId||140,str7:e.getUrlParam("mmuin"),str8:o.t?o.t.config.nettype:0,_:(new Date).getTime()};t.report(r)},stepReport:function(n,i){var o=this,a={cmd:3537,int5:n,str4:o.info.hasApp?3:1,str8:e.getUrlParam("mmuin"),val:1,_t_:+new Date},r=i.t;a.int6=this.getCurPromotionId(i),t.app.report(a,r)},getCurPromotionId:function(e){var n,i=e.t;return!n&&e.downloadBtn&&(n=e.downloadBtn.attr("data-promotionId")),!n&&e.downloadUrl&&(n=t.$.getUrlParam("confid",e.downloadUrl)),!n&&e.promotionId&&(n=e.promotionId),!n&&i&&i.AppBanner&&i.AppBanner.op&&(n=i.AppBanner.op.promotionId),n||140},canCheckApp:function(){var e=t.app.pageType;return 1!==e&&2!==e?!1:top===window||top.location.href?!0:!1},showtips:function(){var t,n,i=this.op,o=this.info;o.hasApp>0?i.btnText=i.btnTexts[o.hasApp]:"",i.recmdText&&i.btnText.indexOf("，")>-1?i.btnText=i.btnText.split("，")[0]+"，"+i.recmdText:i.recmdText&&this.$text2&&this.$text2.text(i.recmdText),this.canCheckApp()?(t=i.btnText,n=i.btnText):(t="到",n=this.$text2&&this.$text2.length?"去App看":i.btnText.replace(/^\u4e0b\u8f7d/,"到")),i.text1=t+i.text1,this.$text1.text(i.text1),this.$text2&&this.$text2.length?this.$btnText.text(n):this.$btnText.attr("data-text",n),e.os.ios?this.$btn.attr("href",o.url):this.$btn.attr("data-downloadurl",o.url),this.$btn.attr("data-url",o.openUrl),i.isAutoReport&&this.report(0),1==o.hasApp&&this.fixDownloadStatus(5)},rewriteText:function(t){var e=this.op,n=t?e.btnTexts[1]:e.btnTexts[0],i=this.$text1,o=this.$btnText;i.html(n+e.text1),o.html(n)},fixDownloadStatus:function(n){var o,a="下载",r=this.op,s=i.appTextName[r.appName];switch(s||(s=i.appTextName[t.app.config.defaultName]),o="weishi"===r.appName?"发现更多精彩":r.recmdText?r.recmdText:"观看更多",n){case 1:a="下载",this.$btn.attr("data-status","down");break;case 2:a="正在下载",this.$btn.attr("data-status","downloading"),e.browser.MQQClient&&this.$box.addClass("tvp_promote_banner_noauto");break;case 3:a="继续下载",this.$btn.attr("data-status","pause");break;case 4:a="安装",this.$btn.attr("data-status","install");break;case 5:a="打开",this.$btn.attr("data-status","open"),this.$btn.attr("href",this.$btn.attr("data-url")),this.$progress.css("width","100%")}a+=s+"，"+o,n>1&&this.op.isResetWords?this.$btnText.attr("data-text",a):1===n&&this.$btnText.attr("data-text",this.op.btnText)},bindTap:function(){function n(){t.app.checkCanDownloader(i.info.hasApp,o,{t:o.t,downloadInstance:i,downloadBox:i.$box,downloadBtn:i.$btn,downloadProgress:i.$progress,downloaderCallback:o.downloaderCallback,range:o.range,appName:o.appName,downloadMd5:o.md5}),e.each(["tvp:appdownload:downloading","tvp:appdownload:complete","tvp:appdownload:fail","tvp:appdownload:pause","tvp:appdownload:afterInstall"],function(t,n){i.$btn&&e.isFunction(i.$btn.on)&&i.$btn.on(n,function(){o.t.$video&&e.isFunction(o.t.$video.trigger)&&o.t.$video.trigger(n)})})}var i=this,o=this.op;this.$btn.on(e.os.hasTouch?"touchend":"click",function(){i.report(1),i.info.hasApp?i.stepReport(7,o):e.os.ios&&i.stepReport(2,o);var n,a=t.common.recomdText[i.op.vid];n=i.$text2&&0!==i.$text2.length?4:2,"object"==typeof a&&a.rmdword&&a.alginfo&&a.tab_id&&t.bossReport.rcmdTextReport(2,a.tab_id,a.alginfo,n)}),1!=i.info.hasApp&&(t.app.bindTryOpenAppBanner&&t.app.bindTryOpenAppBanner(i),e.os.android&&!o.downloadUrl&&(o.downloadUrl=t.app.getDownloadUrl(!1,o.appName)),e.os.android&&t.app.getAppMd5(o.promotionId,o.appName).done(function(t){t&&t.md5&&(o.md5=t.md5,t.url?o.downloadUrl=t.url:"",t.url&&i.$btn.attr("data-downloadurl",t.url),n())}))},checkDoQQliveConfig:function(e){var n=[t.APPID.wechatPublic];return n.indexOf(e)>-1?!0:!1},fixTextAndUrl:function(n){var o=this,a=this.checkDoQQliveConfig(n.appId);if(!a)return void o.initDefer.resolve();if(n.appName!==t.app.config.defaultName)return void o.initDefer.resolve();if(n.lid||!n.vid)return void o.initDefer.resolve();var r="//v.qq.com/json/tvp/appbanner/index/"+n.vid.substr(0,1)+".js";r+="?time="+(new Date).valueOf();var s="//v.qq.com/json/tvp/appbanner/"+n.vid+".js";s+="?time="+(new Date).valueOf();var l=e.Deferred();e.ajax({url:r,dataType:"jsonp",jsonpCallback:"appbannerCallback"}).done(function(t){var i=!1;e.isArray(t)&&t.indexOf&&t.indexOf(n.vid)>-1&&(i=!0),l.resolve(i)
}).fail(function(){l.resolve(!1)}),setTimeout(function(){l.resolve(!1)},5e3),l.done(function(a){return a?void e.ajax({url:s,dataType:"jsonp",jsonpCallback:"appbannerDetailCallback"}).done(function(a){if(!a)return void o.initDefer.resolve();if(o.initDefer.resolve(a.text2),!n.pageText2&&a.text2&&(o.op.text2=a.text2,o.$text2.html(a.text2)),a.text1&&a.text1.substr(0,2)!==i.btnTexts[0]&&a.text1.substr(0,2)!==i.btnTexts[1]&&(o.op.text1=a.text1,o.$text1.html(a.text1)),a.type&&(!n.pay||!n.cid)){var r={appName:n.appName,openType:parseInt(a.type)};switch(r.openType){case 6:r.cid=a.jumpid,r.vid2=a.vid2;break;case 5:r.openUrl=a.url;break;case 4:r.cid=a.jumpid,r.pay=!0;break;case 3:r.tid=a.tid;break;case 2:r.vid=a.vid2||n.vid;break;case 1:r.vid=a.vid2||n.vid}t.app.check(n).done(function(n){r.version=n.version;var i=t.app.getOpenUrl(r);i&&(o.$btn.attr("data-url",i),1==n.hasApp?o.$btn.attr("href",i):e.os.iphone&&r.pay&&r.cid&&o.$btn.attr("href",i))})}}):void o.initDefer.resolve()})}}),e.extend(e,{createAppBanner:function(t){t.appId=t.appId||t.appid,!t.appId&&t.t&&t.t.config&&(t.appId=t.t.config.appid||t.t.config.appId),t.promotionId=t.promotionId||140;var i=e.Deferred(),o=new n(t);return t.t&&1==t.appBannerType&&(t.t.AppBanner=o),o.fixResult().done(function(){o.info.hasApp?o.stepReport(6,t):e.os.ios&&o.stepReport(1,t),i.resolve(o)}),i}})}(tvp,tvp.$),function(t,e){e.extend(t.Player.fn,{buildAppBanner:function(n){if(!t.$.browser.IEMobile&&t.app&&t.app.isSupportApp&&(!this.config.plugins||!this.config.plugins.AppFollow)){var i=this,o=i.$mod,a=e(i.videomod),r="mod_down_"+i.playerid;i.AppBanner||(o.append('<div id="'+r+'" class="tenvideo_button" data-role="appbannerbox"></div>'),a.bind("tvp:resize",function(){o.find("#"+r).width(e.formatSize(n.width||i.config.width))}),a.trigger&&a.trigger("tvp:resize"),n.btnText&&(n.noRecmd=!0),n=e.extend(n,{t:i,appBannerType:1,modId:r,vid:i.curVideo.getVid(),appName:n.appName,openId:n.openId,extraApp:n.extraApp,text2:n.text||n.downloadText,appId:i.config.appid||i.config.appId,contentId:i.config.contentId,contentType:i.config.contentType||window.newsType||0,isResetWords:!0,isAutoReport:!0}),e.createAppBanner(n))}}})}(tvp,tvp.$),function(t,e){function n(t){this.userop=t;var n=e.extend({},i,t);return this.op=n,this.init(n),this}var i={pluginName:"AppBannerOnPause",pauseClass:"tvp_onpause",downloader:!0,range:[1,2],bannerTpl:['<div style="z-index:10" data-role="appbannerbox" class="tvp_app_download_onpause" style="display:none">','   <a data-action="applink" data-role="appbannerlink" class="tvp_download_app" href="${url}" ${iframe}>','		<i class="tvp_icon_logo"></i>','		<span class="tvp_download_app_wording">','			<span data-role="appbannertext1" class="tvp_download_app_title">${text1}</span>','			<span data-role="appbannertext2" class="tvp_download_app_desc">${text2}</span>',"		</span>",'		<span class="tvp_btn_download_btn" data-role="appbannerbox">','			<i class="tvp_btn_progress" data-role="appbannerbtnprogress" style="width:0px"></i>','			<span data-role="appbannerbtntext" class="tvp_btn_download_btn_text">${btnText}</span>',"		</span>","	</a>","</div>"].join("")};e.extend(n.prototype,{init:function(t){var n=t.t,i=this;this.op=e.extend(t,{$mod:n.$UILayer,eventType:"pause",currentTime:0,pausetime:t.pausetime?parseInt(t.pausetime):5}),e.when(i.getAppBanner()).done(function(){i.fillBanner()})},fixUI:function(){},checkShow:function(){var e=this.op,n=e.t,i=n.$video,o=i[0],a=parseInt(n.getDuration(),10),r=parseInt(Math.max(e.currentTime,o.currentTime),10);return t.debug("curTime:"+r),t.debug("duration:"+a),t.debug("op.pausetime:"+e.pausetime),r>e.pausetime&&a-r>5?!0:!1},initEvent:function(){function n(){var n=e.os.ios?400:30;setTimeout(function(){s.paused&&i.checkShow()&&(i.fixShow(1),t.$.isFunction(i.AppBanner.rcmd_show_report)&&i.AppBanner.rcmd_show_report(4))},n)}var i=this,o=this.op,a=o.t,r=a.$video,s=r[0],l=null;this.AppBanner.$btn.on("click",function(){clearTimeout(l)}),r.on("pause paused",function(){var t=a.instance&&a.instance.control&&a.instance.control.isTouching;t||n()}),r.on("timeupdate",function(){s.currentTime&&(o.currentTime=s.currentTime)}),r.on("play playing",function(){clearTimeout(l),i.fixShow(0)})},fixShow:function(n){t.debug("call fixShow:"+n);var i=this,o=this.op,a=o.$mod;if("function"!=typeof o.t.hasDurationLimit||!o.t.hasDurationLimit())if(n){if(a.addClass(o.pauseClass),i.AppBanner&&i.AppBanner.report(0),e.os.android&&this.AppBanner&&this.AppBanner.$btn){var r=this.AppBanner.$btn,s=r.attr("href");r.attr("href","javascript:;"),setTimeout(function(){r.attr("href",s)},500)}}else a.removeClass(o.pauseClass)},getCss:function(){var t=e.Deferred();return e.loadPluginCss(i.pluginName).done(function(){t.resolve()}),t},getAppBanner:function(){var t=this.op.t,n=t.config.libpath+t.config.pluginUrl.AppBanner,i=e.Deferred();return e.createAppBanner?i.resolve():e.getScript(n,function(){i.resolve()}),i},fillBanner:function(){var t=this,n=this.op,i=e.extend({},t.userop,{style:"none",isAutoReport:!1,reportParams:{int5:2},t:n.t,vid:n.vid,tpl:n.bannerTpl,btnText:"下载",mod:n.$mod});e.createAppBanner(i).done(function(e){t.AppBanner=e,t.fixUI(),t.initEvent()})}}),e.extend(e,{createAppBannerOnPause:function(t){var i=e.Deferred(),o=new n(t);return i.resolve(o),i}})}(tvp,tvp.$),function(t,e){e.extend(t.Player.fn,{buildAppBannerOnPause:function(n){if(!t.$.browser.IEMobile&&!(this.flashobj||t.app&&!t.app.isSupportApp||!this.$videomod||e.os.android&&e.browser.MQQ&&!e.browser.WeChat)&&this.config.isHtml5UseUI){var i=this,o=e.extend({},n||{},{t:i,vid:i.curVideo.getVid(),lid:i.curVideo.getChannelId()});e.createAppBannerOnPause(o)}}})}(tvp,tvp.$),function(t){tvp.modeHide=function(e,n){function i(){h.off("click.tvp_mode_hide").on("click.tvp_mode_hide",function(){var e;if(l=f.getPlayer(),e=l?t(l).attr("src"):f.$mod.find("a").attr("href")){if(!tvp.common.isSupportMP4()&&!tvp.common.isUseHtml5())return void(window.location.href=e);p.show(),setTimeout(function(){u.isend?(u.isend=!1,f.play()):l.play(),a(),setTimeout(function(){l.play()},100),o()},5)}})}function o(){u.isInit||(u.isInit=!0,t(l).on("ended",function(){f.cancelFullScreen()}).on("playing",function(){document.webkitIsFullScreen||l.webkitDisplayingFullscreen||c}).on("webkitendfullscreen",function(){r()}),t(document).on("webkitfullscreenchange fullscreenchange",function(){r()}))}function a(){s()?f.enterFullScreen():l.webkitEnterFullscreen()}function r(){l&&(document.webkitIsFullScreen||l.webkitDisplayingFullscreen||c||f.isFakeFullscreen&&f.isFakeFullscreen()||(l.pause(),p.hide()))}function s(){return tvp.$.os.android?tvp.$.browser.MQQ?!1:tvp.$.compareVersion(tvp.$.os.version,"4.4")>-1?!1:!0:!1}var l,d,c,p=t("#"+n.modId),u=new tvp.VideoInfo,f=new tvp.Player,h=t(e.btn);d={width:"100%",height:window.innerHeight,video:u,modId:n.modId,isHtml5UseUI:!0,isHtml5UseFakeFullScreen:s(),isiPhoneShowPlaysinline:!1,onwrite:function(){i()},onfullscreen:function(t){t=c,c||r()}},t.extend(d,n),n.type=n.type||2,1===n.type?(d.type=1,u.setChannelId(n.lid)):(d.type=2,u.setVid(n.vid)),f.create(d)}}(tvp.$),tvp.filename="tvp.player_v2_mobile.js","function"==typeof define&&define("tvp",[],function(){return tvp}),t.tvp=tvp,"undefined"!=typeof QQLive&&(t.QQLive=QQLive)}(this);