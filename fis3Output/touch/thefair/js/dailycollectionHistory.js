require(["widget/jsbridge"],function(e){function t(){(0>o||!s)&&(o=(new Date).getMonth()+1,s=(new Date).getFullYear()),l(),c()}function a(e){var e=e?e:[],t=r(s,o);if(t){$(".calendar-box").html("");for(var a=1;t>=a;a++){for(var c="",l="",i=0;i<e.length;i++)if(e[i].day==a){c="active",l=e[i].url;break}$(".calendar-box").append('<span class="day-item"><a class="day-numb '+c+'" href="'+(l?l:"javascript:void(0);")+'">'+a+"</a></span>")}var u=n(o)+"月";$(".date-info .month").html(u),$(".date-info .year").html(s),t>=31?$(".calendar-box").addClass("long"):$(".calendar-box").removeClass("long")}}function n(e){switch(e-=1){case 0:return"一";case 1:return"二";case 2:return"三";case 3:return"四";case 4:return"五";case 5:return"六";case 6:return"七";case 7:return"八";case 8:return"九";case 9:return"十";case 10:return"十一";case 11:return"十二"}}function r(e,t){return e&&t>=0?new Date(e,t,0).getDate():null}function c(){$(".calendar-area .prev-month-btn").on("click",function(){o-=1,0>o&&(s--,o=11),l()}),$(".calendar-area .next-month-btn").on("click",function(){o+=1,o>=12&&(s++,o=0),l()})}function l(){d||(d=!0,$.ajax({url:"/v1/collection/get_daily_collection_history_list",type:"get",data:{year:s,month:o,collection_id:f},dataType:"json",success:function(e){0==e.code?(i=e.result.data,a(i)):alert(e.message.text),d=!1},error:function(e){alert(e.responseText),d=!1}}))}var o=null,s=null,i=[],u=e,d=!1,f=$("#collection_id").val();u.title&&u.title.setStatus("hidden"),t()});