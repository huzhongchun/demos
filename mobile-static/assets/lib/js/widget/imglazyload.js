!function(e){var t=[];e.fn.imglazyload=function(n){function i(e){var t=d?window:c.offset(),i=t[f.win[0]],r=t[f.win[1]];return i>=e[f.img[0]]-n.threshold-r&&i<=e[f.img[0]]+e[f.img[1]]}function r(i){var r=e(i),o={},a=r;h||(e.each(r.get(0).attributes,function(){~this.name.indexOf("data-")&&(o[this.name]=this.value)}),a=e("<img />").attr(o)),r.trigger("startload"),a.on("load",function(){a.css({opacity:1}),!h&&r.replaceWith(a),r.trigger("loadcomplete"),a.off("load")}).on("error",function(){var n=e.Event("error");n.defaultPrevented||t.push(i),a.off("error").remove()}).attr("src",r.attr(n.urlName))}function o(){var n,o,a,c;for(n=t.length;n--;)o=e(c=t[n]),a=o.offset(),e(c).css({opacity:0,"-webkit-transition":"all 400ms ease"}),i(a)&&(l.call(t,n,1),r(c))}function a(){!h&&u&&e(t).append(u)}var l=Array.prototype.splice,n=e.extend({threshold:0,container:window,urlName:"data-url",placeHolder:"",eventName:"scrollStop",innerScroll:!1,isVertical:!0},n),c=e(n.container),s=n.isVertical,d=e.isWindow(c.get(0)),f={win:[s?"scrollY":"scrollX",s?"innerHeight":"innerWidth"],img:[s?"top":"left",s?"height":"width"]},u=e(n.placeHolder).length?e(n.placeHolder):null,h=e(this).is("img");return!d&&(f.win=f.img),t=Array.prototype.slice.call(e(t.reverse()).add(this),0).reverse(),e.isFunction(e.fn.imglazyload.detect)?(a(),this):(e(document).ready(function(){a(),o(),setTimeout(function(){o()},500)}),!n.innerScroll&&e(window).on(n.eventName+" ortchange",function(){o()}),e.fn.imglazyload.detect=o,this)}}(Zepto);