$(function(){var i=Jumei.addModule("vip",{init:function(){this.getNeedMoudleFunc(),this.addEventListenerFunc()},getNeedMoudleFunc:function(){var i=this,t=Jumei.getModule("ui.dialog");i.dialogObj=new t({title:"消息",btn:1,ok:"确定",content:'<div class="tips-area clearfloat"><div class="tips-mes">您已经是老用户了</div></div>'})},addEventListenerFunc:function(){var i=this;$(".submit-btn").tap(function(){var t=$.trim($(".input-boxs input")[0].value);t?$.ajax({url:"/activity/vip/input_code",type:"post",data:{code:t},dataType:"json",success:function(t){if(t)switch(t.state){case 0:i.showDialogFunc("邀请码错误，请重新输入");break;case 1:i.showDialogFunc("现金券兑换成功"),$(".ui-dialog-ok").html("查看我的现金券"),$(".ui-dialog-ok").tap(function(){location.href="jumeimall://page/promocard-list"});break;case 2:i.showDialogFunc("您已经兑换过了，每个人只有一次兑换机会"),$(".ui-dialog-ok").html("我知道了"),$(".ui-dialog-ok").tap(function(){try{JMWebView.close()}catch(i){}});break;case 3:location.href="/activity/vip/has_regist"}},error:function(){i.showDialogFunc("网络似乎有问题，请重试！")}}):(i.showDialogFunc("请输入邀请码！"),$(".input-boxs input")[0].value="")})},showDialogFunc:function(i){var t=this;$(".tips-mes").html(i),setTimeout(function(){t.dialogObj.show()},50)},firstStateCheckFunc:function(){var i=this;0==$("#state")[0].value&&(i.showDialogFunc(),$(".ui-dialog-ok").tap(function(){location.href="jumeimall://page/promocard-list"}))}});i.init()});