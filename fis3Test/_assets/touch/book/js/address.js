require(["book/js/public","book/js/citys"],function(e,a){var t=a;$(".submit-btn").on("click",function(){if($(this).hasClass("active"))return!1;var e=$(this).data(),a=this,t=$('.address-area select[name="receiver_state"]').val(),r=$('.address-area select[name="receiver_city"]').val(),i=$('.address-area select[name="receiver_district"]').val(),s=$('.address-area textarea[name="receiver_address"]').val();return t&&r&&i&&s?($(this).addClass("active"),void $.ajax({type:"post",url:"/book/user/update_address",data:{receiver_state:t,receiver_city:r,receiver_district:i,receiver_address:s,receiver_name:e.receiver_name,mobile:e.mobile,uid:e.uid,order_id:e.order_id},dataType:"json",success:function(e){0==e.code?(alert("修改成功，下次发货将使用新地址"),window.location.href="/book/home/index"):alert(e.message.text),$(a).removeClass("active")},error:function(e){var t=JSON.parse(e.responseText);alert(t.message.text),$(a).removeClass("active")}})):(alert("请填完所有必填项"),!1)});var r=$(".hide-state-value").val(),i=$(".hide-city-value").val(),s=$(".hide-district-value").val();$('select[name="receiver_state"]').on("change",function(){var e=$(this).val(),a=$(this).find('option[value="'+e+'"]').data("city");$('select[name="receiver_city"]').html("");for(var t=0;t<a.length;t++){var r=a[t],s="";i&&i==r.name&&(s="selected");var c='<option value="'+r.name+'" '+s+">"+r.name+"</option>",n=$(c).data("area",r.area);$('select[name="receiver_city"]').append(n)}$('select[name="receiver_city"]').trigger("change")}),$('select[name="receiver_city"]').on("change",function(){var e=$(this).val(),a=$(this).find('option[value="'+e+'"]').data("area");$('select[name="receiver_district"]').html("");for(var t=0;t<a.length;t++){var r=a[t],i="";s&&s==r&&(i="selected");var c='<option value="'+r+'" '+i+">"+r+"</option>";$('select[name="receiver_district"]').append(c)}});for(var c=0;c<t.length;c++){var n=t[c],v="";r&&r==n.name&&(v="selected");var o='<option value="'+n.name+'" '+v+">"+n.name+"</option>",l=$(o).data("city",n.city);$('select[name="receiver_state"]').append(l)}$('select[name="receiver_state"]').trigger("change")});