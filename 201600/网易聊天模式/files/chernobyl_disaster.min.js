function initStart() {
    var t = !0;
    t && $(".start_btn").one("click", function() {
        $(this).removeClass("run_startbtn"),
            t = !1,
            $(".lead_msg").css("color", "#a9a5a4"),
        iskMobile() || $(".start_btn").css("margin-left", "-20px");
        var a = $(".lead_btn").innerWidth() - $(".start_btn").position().left - $(".start_btn").innerWidth();
        $(this).css({
            background: "#dedede",
            color: "#777778",
            transform: "translate(" + a + "px)"
        }),
            creatItemMeg(startData, function() {
                creatQus(0)
            })
    })
}
function creatEle(t) {
    if ($(".chernobyl_disaster_content").animate({
            scrollTop: $(".chernobyl_disaster_content")[0].scrollHeight
        }, 1e3),
        void 0 == t)
        return !1;
    var a, e = t.match(imgReg), s = t.match(videoReg);
    t.match(audioReg);
    e ? (t = '<img class="pic" src="http://img2.cache.netease.com/f2e/news/chernobyl_disaster/images/' + t + '" data-bigpic="http://img2.cache.netease.com/f2e/news/chernobyl_disaster/images/b' + t + '" height="150">',
        a = $('<div class="box"><p class="run_lf no_bg">' + t + "</p></div>")) : s ? (t = '<video preload="auto" class="video" controls="controls" poster="http://img2.cache.netease.com/cnews/2016/4/25/2016042517200229dda.jpg" src="' + t + '"></video>',
        a = $('<div class="box"><p class="run_lf no_bg">' + t + "</p></div>")) : (t = t,
        a = $('<div class="box"><p class="run_lf">' + t + "</p></div>")),
        $(".chernobyl_disaster_content").append(a)
}
function creatItemMeg(t, a) {
    for (var e = [], s = 0; s < t.length; s++)
        e.push(t[s]);
    var n = null ;
    if (0 == e.length)
        return clearInterval(n),
            !1;
    var i = e.shift();
    creatEle(i),
        n = setInterval(function() {
            var t = e.shift();
            creatEle(t),
            e.length || (clearInterval(n),
            a && a())
        }, 1600)
}
function creatQus(t) {
    if (void 0 == t || null == t)
        return !1;
    var a = data[t].answer1.txt
        , e = data[t].answer2.txt
        , s = "";
    s = "" != a && "" != e ? $('<a href="javascript:;" data-idx="0" data-id="' + t + '" class="qus_one qus_item1 btn">' + data[t].answer1.txt + '</a><a href="javascript:;" data-idx="1" data-id="' + t + '" class="qus_one qus_item2 btn">' + data[t].answer2.txt + "</a>") : $('<a href="javascript:;" data-idx="0" data-id="' + t + '" class="qus_one qus_item1 btn">' + data[t].answer1.txt + "</a>"),
        s.eq(0).css({
            position: "absolute",
            top: $(".chernobyl_disaster_content")[0].scrollHeight + 20
        }),
        s.eq(1).css({
            position: "absolute",
            top: $(".chernobyl_disaster_content")[0].scrollHeight + 80
        }),
        $(".chernobyl_disaster_content").append(s),
        setTimeout(function() {
            $(".qus_one").addClass("rise_up")
        }, 1400)
}
initStart();
var imgReg = /jpg|gif/gi, videoReg = /mp4/gi, audioReg = /mp3/gi, scrollT, winH = $(window).height(), winW = $(window).width();
$(document).on("click", ".qus_one", function(t) {
    t.stopPropagation();
    var a = $(this).siblings(".qus_one");
    a.removeClass("rise_up"),
        setTimeout(function() {
            a.remove()
        }, 1e3);
    var e = $(this).html()
        , s = $('<div class="box txr box_r"><p class="run_rg">' + e + "</p></div>");
    $(".chernobyl_disaster_content").append(s);
    var n = s.find(".run_rg").offset();
    parseInt(s.find(".run_rg").css("width"));
    scrollT = $(".chernobyl_disaster_content").scrollTop(),
        $(this).css({
            position: "absolute",
            background: "#dedede",
            color: "#777778",
            top: n.top + scrollT
        });
    var i = parseInt($(this).attr("data-idx"))
        , o = $(this).attr("data-id");
    $(this).removeClass("qus_one");
    var r = "";
    switch (i) {
        case 0:
            r += "answer1";
            break;
        case 1:
            r += "answer2"
    }
    void 0 !== o && creatItemMeg(data[o][r].result, function() {
        creatQus(data[o][r].nextid)
    })
}),
    $(document).on("click", ".pic", function(t) {
        $(".chernobyl_disaster_content")[0].style.WebkitOverflowScrolling = "auto",
            t.stopPropagation();
        $(this);
        $(".loading").css("display", "block");
        var a = new Image;
        a.src = $(this).attr("data-bigpic"),
            a.onload = function() {
                $(a).css("width", "100%");
                var t, e = a.height, s = a.width;
                t = iskMobile() ? e * winW / s : 500 * e / s;
                var n = $('<div class="mask"><div class="close">\xd7</div><div class="maskimg"></div></div>');
                $(".chernobyl_disaster_wrap").append(n),
                    $(".maskimg").html(a),
                winH > t && $(a).css({
                    "margin-top": -t / 2,
                    top: "50%"
                }),
                    n.css("opacity", 1),
                    $(".loading").css("display", "none"),
                    n.click(function() {
                        n.remove(),
                            $(".chernobyl_disaster_content")[0].style.WebkitOverflowScrolling = "touch"
                    })
            }
    }),
    $(document).on("click", ".again_read", function(t) {
        window.location.reload()
    }),
    $(document).on("click", ".go_page", function(t) {
        return location.href = "http://t.c.m.163.com/qiernuovr/?__newsapp_target=_blank",
            !1
    });
