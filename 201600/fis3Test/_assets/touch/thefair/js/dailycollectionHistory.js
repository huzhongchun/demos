require(["widget/jsbridge"],function(e){function a(){(0>l||!s)&&(l=(new Date).getMonth()+1,s=(new Date).getFullYear()),o(),c()}function n(e){var e=e?e:[],a=r(s,l);if(a){$(".calendar-box").html("");for(var n=1;a>=n;n++){for(var c="",o="",i=0;i<e.length;i++)if(e[i].day==n){c="active",o=e[i].url;break}$(".calendar-box").append('<span class="day-item"><a class="day-numb '+c+'" href="'+(o?o:"javascript:void(0);")+'">'+n+"</a></span>")}var u=t(l)+"月";$(".date-info .month").html(u),$(".date-info .year").html(s),a>=31?$(".calendar-box").addClass("long"):$(".calendar-box").removeClass("long")}}function t(e){switch(e-=1){case 0:return"一";case 1:return"二";case 2:return"三";case 3:return"四";case 4:return"五";case 5:return"六";case 6:return"七";case 7:return"八";case 8:return"九";case 9:return"十";case 10:return"十一";case 11:return"十二"}}function r(e,a){return e&&a>=0?new Date(e,a,0).getDate():null}function c(){$(".calendar-area .prev-month-btn").on("click",function(){l-=1,0>l&&(s--,l=11),o()}),$(".calendar-area .next-month-btn").on("click",function(){l+=1,l>=12&&(s++,l=0),o()})}function o(){d||(d=!0,$.ajax({url:"/v1/collection/get_daily_collection_history_list",type:"get",data:{year:s,month:l,collection_id:f},dataType:"json",success:function(e){0==e.code?(i=e.result.data,n(i)):alert(e.message.text),d=!1},error:function(e){alert(e.responseText),d=!1}}))}var l=null,s=null,i=[],u=e,d=!1,f=$("#collection_id").val();u.toolbar&&u.toolbar.setShare("hidden"),a()});