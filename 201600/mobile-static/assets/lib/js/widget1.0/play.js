Jumei.widget("ui.play",{init:function(t){this.options={audioObj:null,currentId:-1,playList:[{name:"cat",url:"http://images.jumei.com/mobile/act/music/xiaopingguo.mp3"},{name:"cat",url:"http://images.jumei.com/mobile/act/music/cat.mp3"}],playIndex:0,loop:!1,volume:1},this._super.call(this,t)},_create:function(){var t=$("<audio id='ai'></audio>");this.options.audioObj=t[0],this.setLoop(this.options.loop),this.setVolume(this.options.volume)},setVolume:function(t){this.options.audioObj.volume=t},setLoop:function(t){this.options.audioObj.loop=t},clearList:function(){this.options.playList.length=0,this.options.currentId=-1},add:function(t,i){this.options.playList.push({name:t,url:i})},remove:function(t){delete this.options.playList[t]},play:function(t){var i=null;return null!=(i=this.options.playList[t])&&(4==this.options.audioObj.readyState&&this.options.currentId==t?this.options.audioObj.play():(this.options.currentId=t,this.pause(),this.options.audioObj.src=i.url,$(this.options.audioObj).bind("canplaythrough",function(){this.play()}))),i},pause:function(){this.options.audioObj.pause()},isEmptyPlayList:function(){return 0==this.options.playList.length},_playStep:function(t){if(this.isEmptyPlayList())return null;if(null==this.options.currentId)return this.play(this.options.playList[0]);var i=this.options.currentId;return 1==t?i=i<this.options.playList.length-1?i+1:0:-1==t&&(i=i>0?i-1:this.options.playList.length-1),this.play(i)},playNext:function(){return this._playStep(1)},playPri:function(){return this._playStep(-1)}});