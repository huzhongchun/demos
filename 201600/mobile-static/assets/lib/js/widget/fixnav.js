Jumei.widget("ui.fixnav",{init:function(){this.options={data:[],height:null},this.tpl='<div id="nav" class="fixedtop"><ul class="navigation clearfloat" style="-webkit-transform-origin: 0px 0px; width: 320px;"></ul></div>'},_create:function(){var t="";if($("#nav").length<=0){$(this.element).html(this.tpl);for(var i=0;i<this.options.data.length;i++)t+='<li><a index="'+this.options.data[i].linkid+'">'+this.options.data[i].title+"</a></li>";$(".navigation").html(t),this.bindEvent()}},bindEvent:function(){var t=this,i=null,n=1,o=function(t,i){if(i>t)for(var n=500;n>=0;n-=5)!function(){var o=n;setTimeout(function(){0>=o?window.scrollTo(0,t):window.scrollTo(0,i-o/500*(i-t))},o)}();else for(var n=0;500>=n;n+=5)!function(){var o=n;setTimeout(function(){window.scrollTo(0,i+o/500*(t-i))},o)}()},e=function(i){var n=a($("#"+i)[0]).top,e=0;e=null==t.options.height?$(t.element).height():t.options.height,n=(n-e)*Jumei.scale;var l=0;l=$(window).scrollTop(),l*=Jumei.scale,o(n,l)},a=function(t){for(var i=0,n=0,o=t;o.offsetParent;)i+=o.offsetLeft,n+=o.offsetTop,o=o.offsetParent;return{left:i,top:n}};$(document).on("touchstart",function(){i=$(window).scrollTop()}),$(window).scroll(function(){var t=$(window).scrollTop();t>i?1==n&&setTimeout(function(){$(".fixedtop").addClass("fixedhide"),n=0},100):0==n&&setTimeout(function(){$(".fixedtop").removeClass("fixedhide"),n=1},100)}),$(".navigation a").on("click",function(t){t.preventDefault();var i=$(this).attr("index");e(i)})}});