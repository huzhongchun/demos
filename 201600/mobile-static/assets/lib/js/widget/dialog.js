Jumei.widget("ui.dialog",{init:function(){this.options={element:"element",width:300,height:200,content:"聚美提示您！",title:"提示",type:2,ok:"确定",cancel:"取消",init:function(){},successCallback:null,cancelCallback:function(){}},this.tpl='<div id="container-dialog"><div id="bg"></div><div id="flagBox"><div id="titleBox"><div><%=title%></div><div class="close"></div></div><div id="contentBox"><%=content%></div><div id="buttonBox"><div class="cancel"><%=cancel%></div><div class="determine"><%=ok%></div></div></div></div>'},_create:function(){var t=Jumei.parseTpl(this.tpl,this.options),i=this,e=this.options;$("#container-dialog").remove(),$("#wrapper").append(t);var n=$("#buttonBox");1==e.type?n.html('<div class="determine" style="border-left: none;width: 100%;">'+e.ok+"</div>"):0==e.type&&n.hide(),e.init();var o=$("#container-dialog .cancel,#container-dialog .close");o&&o.click(function(){return i._setClose(),e.cancelCallback(),!1}),$(window).resize(function(){i._setBg(),i._setFlag()});var c=$("#container-dialog .determine");c&&c.click(function(){if("function"==typeof e.successCallback)var t=e.successCallback();return 0!=t&&i._setClose(),!0}),i._setBg(),i._setFlag(),i._initScroll()},_initScroll:function(){$("#bg").on("touchmove",function(t){t.stopPropagation(),t.preventDefault()}),$(document).on("touchmove","#container-dialog",function(t){t.preventDefault()})},_setBg:function(){var t=this,i=$("#bg");t.windowHeight=$(window).height(),t.windowWidth=document.documentElement&&document.documentElement.clientWidth||document.body.clientWidth||window.innerWidth,i.css("opacity",.8)},_setFlag:function(){var t=this.options,i=$("#flagBox");i.width(t.width);var e=this.getScrollTop()/window.Jumei.scale,n=(this.windowWidth/window.Jumei.scale-i.width())/2,o=(this.windowHeight-i.height())/2+e;n=n,o=o,i.css({left:n+"px",top:o+"px"})},_setClose:function(){var t=$("#container-dialog");t.remove()},getScrollTop:function(){var t=0;return document.documentElement&&document.documentElement.scrollTop?t=document.documentElement.scrollTop:document.body&&(t=document.body.scrollTop),t}});