!function(window){function parseContentType(e){return e&&(e=e.split(";",2)[0]),e&&(e==htmlType?"html":e==jsonType?"json":scriptTypeRE.test(e)?"script":xmlTypeRE.test(e)&&"xml")||"text"}function isObject(e){return"object"==typeof e}function isPlainObject(e){return isObject(e)&&!isWindow(e)&&e.__proto__==Object.prototype}function isFunction(e){return"function"==typeof e}function extend(e,t,n){for(key in t)n&&(isPlainObject(t[key])||isArray(t[key]))?(isPlainObject(t[key])&&!isPlainObject(e[key])&&(e[key]={}),isArray(t[key])&&!isArray(e[key])&&(e[key]=[]),extend(e[key],t[key],n)):void 0!==t[key]&&(e[key]=t[key])}function appendQuery(e,t){return(e+"&"+t).replace(/[&?]{1,2}/,"?")}function paramObjString(e){var t=[];if(isObject(e))for(var n in e){var i=e[n];isObject(i)&&(i=JSON.stringify(i)),t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}return t.join("&").replace(/%20/g,"+")}function serializeData(e){return e.processData&&e.data&&"object"==typeof e.data&&(e.data=paramObjString(e.data)),!e.data||e.type&&"GET"!=e.type.toUpperCase()||(e.url=appendQuery(e.url,e.data)),e}var scriptTypeRE=/^(?:text|application)\/javascript/i,xmlTypeRE=/^(?:text|application)\/xml/i,jsonType="application/json",htmlType="text/html",blankRE=/^\s*$/;!function(e){var t=0,n=0,i=[];e.TF={extend:function(e){var t,n=[];for(var i in arguments)n.push(arguments[i]);return"boolean"==typeof e&&(t=e,e=n.shift()),n.forEach(function(n){extend(e,n,t)}),e},ajaxSetting:{},loadCache:{},xhr:function(){return new XMLHttpRequest},setAjaxSetting:function(e){var t=this.extend({url:e.url,type:e.type||"GET",dataType:e.dataType||"json",async:void 0==e.async?!0:e.async,data:e.data||null,beforeSend:e.beforeSend||null,success:e.success||null,error:e.error||null,processData:void 0==e.processData?!0:e.processData,requestHeaders:{},accepts:{script:"text/javascript, application/javascript",json:"application/json",xml:"application/xml, text/xml",html:"text/html",text:"text/plain"}},e);return serializeData(t)},ajax:function(e){var t=this.setAjaxSetting(e),n=this;if("jsonp"==t.dataType.toLowerCase())return t.url=appendQuery(t.url,"__callback=?"),n.ajaxJSONP(t),!1;var i=this.xhr(),a=t.accepts[t.dataType],o={};a&&(o.Accept=a,a.indexOf(",")>-1&&(a=a.split(",",2)[0]),i.overrideMimeType&&i.overrideMimeType(a)),(t.contentType||t.contentType!==!1&&t.data&&"GET"!=t.type.toUpperCase())&&(o["Content-Type"]=t.contentType||"application/x-www-form-urlencoded"),t.headers=this.extend(o,t.requestHeaders||{}),i.onreadystatechange=function(){if(4==i.readyState)if(i.status>=200&&i.status<300||304==i.status){t.dataType=t.dataType||parseContentType(i.getResponseHeader("content-type"));var e=i.responseText,a=null;try{"script"==t.dataType?(1,eval)(e):"xml"==t.dataType?e=i.responseXML:"json"==t.dataType&&(e=blankRE.test(e)?null:n.parseJSON(e))}catch(o){a=o}a?n.ajaxError(a,"parsererror",i,t):n.ajaxSuccess(e,i,t)}else n.ajaxError(null,i,t)},i.open(t.type,t.url,t.async);for(var r in o)i.setRequestHeader(r,o[r]);return i.setRequestHeader("X_TAOO_HEADER","TAOO,0.5,0.5"),i.send(t.data?t.data:null),i},ajaxSuccess:function(e,t,n){var i=n.success;isFunction(i)&&i.call(this,e,t,n)},ajaxError:function(e,t,n){var i=n.error;isFunction(i)&&i.call(e,t,n)},ajaxJSONP:function(a){var o=this;if(!("type"in a))return _thsi.ajax(a);if(!o.loadCache[a.url]){o.loadCache[a.url]=a.url;var r="jsonp"+ ++t,s=document.createElement("script");s.setAttribute("id","script"+ ++n),i[r]=n;var l,c=function(){clearTimeout(l);var t=document.getElementById("script"+i[r]);t.parentNode.removeChild(t),delete e[r],delete i[r]},d=function(t){c(),t&&"timeout"!=t||(e[r]=function(){}),o.ajaxError({status:t||"abort"},p,a)},p={abort:d};e[r]=function(e){c(),o.ajaxSuccess(e,p,a)},s.onerror=function(){d("error")},s.src=a.url.replace(/=\?/,"="+r),document.getElementsByTagName("head")[0].appendChild(s),a.timeout>0&&(l=setTimeout(function(){d("timeout")},a.timeout))}},getScript:function(e,t){var n=this;n.ajax({url:e,type:"get",dataType:"script",success:function(e){isFunction(t)&&t(e)}})},getJson:function(e,t){var n=this;n.ajax({url:e,type:"get",dataType:"json",success:function(e){isFunction(t)&&t(e)}})},appendChild:function(e,t){if(e){var n=document.getElementById(e);if(n){var i=n.innerHTML;return n.innerHTML=i+t,n}return!1}return!1}}}(window),function(window){window.BigPipe={argsCheck:function(e){if(!e.pid)throw"nodeId is necessary"},g:function(e){return"string"==typeof e?document.getElementById(e):e},IE:function(){return/msie/i.test(navigator.userAgent)},getStyle:function(e,t){var n;try{n=document.defaultView.getComputedStyle(e,null)}catch(i){n=e.currentStyle}return e.style[t]||n[t]},cssLoader:function(e){var t=e.css.length;if(e.onCssComplete=e.onCssComplete?e.onCssComplete:function(){},1>t)e.onCssComplete();else{for(var n=0;t>n;n++){var i=document.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("charset","utf-8"),i.setAttribute("href",e.css[n]),document.getElementsByTagName("head")[0].appendChild(i);var a=document.createElement("div");a.id=e.load_ID,a.style.display="none",a.style.width="40px",document.body.appendChild(a)}var o=setInterval(function(){40==parseInt(BigPipe.getStyle(BigPipe.g(e.load_ID),"width"))&&(clearInterval(o),e.onCssComplete(),document.body.removeChild(a))},50)}},jsLoader:function(e){var t=e.js.length,n=this;if(e.onJsComplete=e.onJsComplete?e.onJsComplete:function(){},1>t)e.onJsComplete();else for(var i=0;t>i;i++){var a=null;i==t-1&&(a=function(){e.onJsComplete(),console.log("Last script has loaded!")}),n.loadScript(e.js[i],a)}},loadScript:function(e,t,n){var i=this,a=document.createElement("script");a.setAttribute("charset","utf-8"),i.IE()?a.onreadystatechange=function(){("loaded"==a.readyState.toLowerCase()||"complete"==a.readyState.toLowerCase())&&isFunction(t)&&t.call(this)}:a.onload=function(){console.log(t),isFunction(t)&&t.call(this)},a.onerror=function(){isFunction(n)&&n.call(this)},a.setAttribute("src",e),document.getElementsByTagName("head")[0].appendChild(a)},ajaxPipeLoader:function(e){if("undefined"==typeof e.url)return!1;var t=e.url.replace(/#.*$/,"");t+=-1!=t.indexOf("?")?"&__aj=1":"?__aj=1";var n=[],i=[];if(e.pl instanceof Array)for(var a in e.pl){var o=e.pl[a];if("undefined"==typeof o.pid)return!1;"undefined"==typeof o.did&&(o.did=null),"function"==typeof o.loading?o.loading:"undefined"!=typeof o.loading&&isNaN(o.loading)||(o.loading=1),n[a]=o.pid,i[a]=o.did,1==o.loading&&BigPipe.autoLoading(null==o.did?o.pid:o.did)}else{if("object"!=typeof e.pl)return!1;if("undefined"==typeof e.pl.pid)return!1;"undefined"==typeof e.pl.did&&(e.pl.did=null),"function"==typeof e.pl.loading?e.pl.loading:"undefined"==typeof e.pl.loading&&"undefined"==typeof e.pl.callback&&(e.pl.loading=1),n[0]=e.pl.pid,i[0]=e.pl.did,1==e.pl.loading&&BigPipe.autoLoading(null==e.pl.did?e.pl.pid:e.pl.did)}n.length==i.length&&(t+="&__pl="+encodeURIComponent(n.join("|")),t+="&__d="+encodeURIComponent(i.join("|"))),t+="undefined"!=typeof e.callback?"function"==typeof e.callback?"&__no_cb=1":"&__cb="+encodeURIComponent(e.callback):"&__cb=BigPipe.onPageletArrive",t+="&__t="+(new Date).getTime(),"function"==typeof e.callback?TF.getJson(t,function(t){e.callback(t)}):TF.getScript(t)},autoLoading:function(id,delay){var div=BigPipe.g(id),loadingTpl='<div class="bigpipe-loading-box"><img src="http://resource.thefair.net.cn/touch/thefair/images/loading.gif" title="http://resource.thefair.net.cn/touch/thefair/images/loading.gif"></div>';null!=div&&"undefined"!=typeof div.innerHTML&&("undefined"==typeof delay?div.innerHTML=loadingTpl:eval("BigPipe_loadingHandle_"+id+" = setTimeout(function(){div.innerHTML = loadingTpl;}, "+delay+");"))},onPageletArrive:function(json){var arriveTime=(new Date).getTime();BigPipe.argsCheck(json);var cssJson={css:json.css,load_ID:json.pid+"css",onCssComplete:function(){"undefined"!=typeof json.content&&(eval("typeof(BigPipe_loadingHandle_"+json.pid+") !='undefined' && clearTimeout(BigPipe_loadingHandle_"+json.pid+");"),document.getElementById(json.pid)?document.getElementById(json.pid).innerHTML=json.content:"")}};BigPipe.cssLoader(cssJson);var jsJson={js:json.js,onJsComplete:function(){BigPipe.pageletLog(json.pid+":"+arriveTime)}};BigPipe.jsLoader(jsJson)},pageletLog:function(){!/msie/i.test(navigator.userAgent)}}}(window)}(window);