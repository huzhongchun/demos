!function(e){if(tvp={},tvp.lastModify="2016-06-12 11:31:33",tvp.ts=tvp.lastModify.replace(/\D/g,""),tvp.ver="$V2.0Build7850$",tvp.dataset={openLazy:!0},tvp.name="腾讯视频统一播放器","undefined"==typeof window.DEBUG&&(window.DEBUG=1),window.FILEPATH="//imgcache.qq.com/tencentvideo_v1/tvp/js/",top!=window)try{tvp.topurl=top.location.href}catch(t){}tvp.log=function(e){if(window.DEBUG&&null!=document.getElementById("tvp_debug_console")){var t=document.getElementById("tvp_debug_console");t.innerHTML+=e+" | "}else window.console&&window.console.log("["+tvp.log.debugid++ +"] "+e)},tvp.debug=function(e){window.DEBUG||-1!==tvp.log.isDebug||(tvp.log.isDebug="true"==tvp.$.getUrlParam("debug")?1:0),(window.DEBUG||tvp.log.isDebug)&&tvp.log(e)},tvp.log.isDebug=-1,tvp.log.debugid=1,tvp.DEVICE={aphone:1,iphone:2,ipad:3,other:0},tvp.PLATFORM={wechat:1,mqq:2,qqbrowser:3,other:0},tvp.APPID={wechatPublic:1e4,news:10001,qqmusic:10007},tvp.ACTION={onVodH5Init:"tvp:vodhtml5:beforeInit",onFlashPlayerInited:"tvp:flash:inited"},function(e){function t(t,n,o){var i=e.Event(n);return e(t).trigger(i,o),!i.isDefaultPrevented()}function n(e,n,o,i){return e.global?t(n||w,o,i):void 0}function o(t){t.global&&0===e.active++&&n(t,null,"ajaxStart")}function i(t){t.global&&!--e.active&&n(t,null,"ajaxStop")}function r(e,t){var o=t.context;return t.beforeSend.call(o,e,t)===!1||n(t,o,"ajaxBeforeSend",e,t)===!1?!1:void n(t,o,"ajaxSend",e,t)}function a(e,t,o,i){var r=o.context,a="success";o.success.call(r,e,a,t),i&&i.resolveWith(r,e,a,t),n(o,r,"ajaxSuccess",t,o,e),c(a,t,o)}function s(e,t,o,i,r){var a=i.context;i.error.call(a,o,t,e),r&&r.rejectWith(a,o,t,e),n(i,a,"ajaxError",o,i,e||t),c(t,o,i)}function c(e,t,o){var r=o.context;o.complete.call(r,t,e),n(o,r,"ajaxComplete",t,o),i(o)}function d(){}function l(e){return e&&(e=e.split(";",2)[0]),e&&(e==x?"html":e==I?"json":b.test(e)?"script":q.test(e)&&"xml")||"text"}function p(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function u(t){t.processData&&t.data&&"string"!=e.type(t.data)&&(t.data=e.param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()||(t.url=p(t.url,t.data),t.data=void 0)}function f(t,n,o,i){return e.isFunction(n)&&(i=o,o=n,n=void 0),e.isFunction(o)||(i=o,o=void 0),{url:t,data:n,success:o,dataType:i}}function v(t,n,o,i){var r,a=e.isArray(n),s=e.isPlainObject(n);e.each(n,function(n,c){r=e.type(c),i&&(n=o?i:i+"["+(s||"object"==r||"array"==r?n:"")+"]"),!i&&a?t.add(c.name,c.value):"array"==r||!o&&"object"==r?v(t,c,o,n):t.add(n,c)})}if(!(e.ajaxJSONP&&e.getJSON&&e.get&&e.post)){var h,g,m=0,w=window.document,y=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,b=/^(?:text|application)\/javascript/i,q=/^(?:text|application)\/xml/i,I="application/json",x="text/html",_=/^\s*$/,k=w.createElement("a");k.href=window.location.href,e.active=0,e.ajaxJSONP=function(t,n){if(!("type"in t))return e.Ajax(t);var o,i,c=t.jsonpCallback,d=(e.isFunction(c)?c():c)||"jsonp"+ ++m,l=w.createElement("script"),p=window[d],u=function(t){e(l).triggerHandler("error",t||"abort")},f={abort:u};return n&&n.promise(f),e(l).on("load error",function(r,c){clearTimeout(i),e(l).off().remove(),"error"!=r.type&&o?a(o[0],f,t,n):s(null,c||"error",f,t,n),window[d]=p,o&&e.isFunction(p)&&p(o[0]),p=o=void 0}),r(f,t)===!1?(u("abort"),f):(window[d]=function(){o=arguments},l.src=t.url.replace(/\?(.+)=\?/,"?$1="+d),w.head.appendChild(l),t.timeout>0&&(i=setTimeout(function(){u("timeout")},t.timeout)),f)},e.ajaxSettings={type:"GET",beforeSend:d,success:d,error:d,complete:d,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:I,xml:"application/xml, text/xml",html:x,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},e.Ajax=function(t){var n,i,c=e.extend({},t||{}),f=e.Deferred&&e.Deferred();for(h in e.ajaxSettings)void 0===c[h]&&(c[h]=e.ajaxSettings[h]);o(c),c.crossDomain||(n=w.createElement("a"),n.href=c.url,n.href=n.href,c.crossDomain=k.protocol+"//"+k.host!=n.protocol+"//"+n.host),c.url||(c.url=window.location.toString()),(i=c.url.indexOf("#"))>-1&&(c.url=c.url.slice(0,i)),u(c);var v=c.dataType,m=/\?.+=\?/.test(c.url);if(m&&(v="jsonp"),c.cache!==!1&&(t&&t.cache===!0||"script"!=v&&"jsonp"!=v)||(c.url=p(c.url,"_="+Date.now())),"jsonp"==v)return m||(c.url=p(c.url,c.jsonp?c.jsonp+"=?":c.jsonp===!1?"":"callback=?")),e.ajaxJSONP(c,f);var y,b=c.accepts[v],q={},I=function(e,t){q[e.toLowerCase()]=[e,t]},x=/^([\w-]+:)\/\//.test(c.url)?RegExp.$1:window.location.protocol,S=c.xhr(),C=S.setRequestHeader;if(f&&f.promise(S),c.crossDomain||I("X-Requested-With","XMLHttpRequest"),I("Accept",b||"*/*"),(b=c.mimeType||b)&&(b.indexOf(",")>-1&&(b=b.split(",",2)[0]),S.overrideMimeType&&S.overrideMimeType(b)),(c.contentType||c.contentType!==!1&&c.data&&"GET"!=c.type.toUpperCase())&&I("Content-Type",c.contentType||"application/x-www-form-urlencoded"),c.headers)for(g in c.headers)I(g,c.headers[g]);if(S.setRequestHeader=I,S.onreadystatechange=function(){if(4==S.readyState){S.onreadystatechange=d,clearTimeout(y);var t,n=!1;if(S.status>=200&&S.status<300||304==S.status||0==S.status&&"file:"==x){v=v||l(c.mimeType||S.getResponseHeader("content-type")),t=S.responseText;try{"script"==v?(1,eval)(t):"xml"==v?t=S.responseXML:"json"==v&&(t=_.test(t)?null:e.parseJSON(t))}catch(o){n=o}n?s(n,"parsererror",S,c,f):a(t,S,c,f)}else s(S.statusText||null,S.status?"error":"abort",S,c,f)}},r(S,c)===!1)return S.abort(),s(null,"abort",S,c,f),S;if(c.xhrFields)for(g in c.xhrFields)S[g]=c.xhrFields[g];var j="async"in c?c.async:!0;S.open(c.type,c.url,j,c.username,c.password);for(g in q)C.apply(S,q[g]);return c.timeout>0&&(y=setTimeout(function(){S.onreadystatechange=d,S.abort(),s(null,"timeout",S,c,f)},c.timeout)),S.send(c.data?c.data:null),S},e.get=function(){return e.Ajax(f.apply(null,arguments))},e.post=function(){var t=f.apply(null,arguments);return t.type="POST",e.Ajax(t)},e.getJSON=function(){var t=f.apply(null,arguments);return t.dataType="json",e.Ajax(t)},e.fn.load=function(t,n,o){if(!this.length)return this;var i,r=this,a=t.split(/\s/),s=f(t,n,o),c=s.success;return a.length>1&&(s.url=a[0],i=a[1]),s.success=function(t){r.html(i?e("<div>").html(t.replace(y,"")).find(i):t),c&&c.apply(r,arguments)},e.Ajax(s),this};var S=encodeURIComponent;e.param=function(t,n){var o=[];return o.add=function(t,n){e.isFunction(n)&&(n=n()),null==n&&(n=""),this.push(S(t)+"="+S(n))},v(o,t,n),o.join("&").replace(/%20/g,"+")}}}(Zepto),function(){function e(e){return e instanceof Array}if("object"!=typeof tvp||!tvp.$||!tvp.$.Deferred){var t,n,o,i,r,a,s,c,d,l,p,u,f,v=[].slice;r="1.3.2",n="pending",i="resolved",o="rejected",d=function(e,t){return null!=e?e.hasOwnProperty(t):void 0},p=function(e){return d(e,"length")&&d(e,"callee")},c=function(t){return p(t)?c(Array.prototype.slice.call(t)):e(t)?t.reduce(function(t,n){return e(n)?t.concat(c(n)):(t.push(n),t)},[]):[t]},a=function(e,t){return 0>=e?t():function(){return--e<1?t.apply(this,arguments):void 0}},u=function(e,t){return function(){var n;return n=[e].concat(Array.prototype.slice.call(arguments,0)),t.apply(this,n)}},s=function(e,t,n){var o,i,r,a,s;for(a=c(e),s=[],i=0,r=a.length;r>i;i++)o=a[i],s.push(o.call.apply(o,[n].concat(v.call(t))));return s},t=function(){var e,r,a,d,l,p;return p=n,d=[],l=[],e=[],a={},this.promise=function(r){var u,f;return r=r||{},r.state=function(){return p},f=function(e,t){return function(){return p===n&&t.push.apply(t,c(arguments)),e()&&s(arguments,a),r}},r.done=f(function(){return p===i},d),r.fail=f(function(){return p===o},l),r.always=f(function(){return p!==n},e),u=function(e,n){var o,i;return o=new t,i=function(e,t,n){return e(n?function(){return t(n.apply(null,c(arguments)))}:function(){return t.apply(null,c(arguments))})},i(r.done,o.resolve,e),i(r.fail,o.reject,n),o},r.pipe=u,r.then=u,r},this.promise(this),r=function(t,o,i){return function(){return p===n&&(p=t,a=arguments,s([o,e],a,i)),this}},this.resolve=r(i,d),this.reject=r(o,l),this.resolveWith=function(){var e,t;return t=arguments[0],e=2<=arguments.length?v.call(arguments,1):[],r(i,d,t).apply(null,e)},this.rejectWith=function(){var e,t;return t=arguments[0],e=2<=arguments.length?v.call(arguments,1):[],r(o,l,t).apply(null,e)},this},f=function(){var e,n,o,i,r,s,d,l;for(i=new t,n=c(arguments),o=a(n.length,i.resolve),r=0,d=n.length;d>r;r++)e=n[r],e.done(o);for(s=0,l=n.length;l>s;s++)e=n[s],e.fail(function(e,t){return i.reject(e,t)});return i.promise()},l=function(e){return e.Deferred=function(){return new t},e.ajax=u(e.ajax,function(e,n){var o,i;return null==n&&(n={}),i=new t,o=function(e,t){return u(e,function(){var e,n;return n=arguments[0],e=2<=arguments.length?v.call(arguments,1):[],n&&n.apply(null,e),t.apply(null,e)})},n.success=o(n.success,i.resolve),n.error=o(n.error,i.reject),e(n),i.promise()}),e.when=f},"undefined"!=typeof exports?(exports.Deferred=function(){return new t},exports.when=f,exports.installInto=l):(this.Deferred=function(){return new t},this.Deferred.when=f,this.Deferred.installInto=l,this.DeferedClass=t),tvp.Deferred.installInto("undefined"!=typeof Zepto?Zepto:jq)}}.call(tvp);var n=!1;"undefined"!=typeof Zepto&&Zepto._tvp?(tvp.$=Zepto,n=!0):(tvp.$={},n=!1),function(){return n?void 0:"function"==typeof window.Zepto?void(tvp.$=window.Zepto):"function"==typeof window.jQuery&&"function"==typeof window.jQuery.Deferred?(tvp.$=window.jQuery,void(!tvp.$.os&&"undefined"!=typeof Zepto&&Zepto.__detect&&Zepto.__detect.call(tvp.$,navigator.userAgent))):void("function"==typeof window.jq&&(tvp.$=window.jq,!tvp.$.os&&"undefined"!=typeof Zepto&&Zepto.__detect&&Zepto.__detect.call(tvp.$,navigator.userAgent)))}(),function(){"undefined"==typeof document.DOCUMENT_NODE&&(document.DOCUMENT_NODE=9)}(),function(e){function t(e){var t=this.os={},n=this.browser={},o=e.match(/WebKit\/([\d.]+)/),i=e.match(/(Android)(\s+|\/)([\d.]+)/),r=e.match(/(Android)(\s+)N/),a=e.match(/(iPad).*OS\s([\d_]+)/),s=!a&&e.match(/(iPhone\sOS)\s([\d_]+)/),c=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),d=c&&e.match(/TouchPad/),l=e.match(/Kindle\/([\d.]+)/),p=e.match(/Silk\/([\d._]+)/),u=e.match(/(BlackBerry).*Version\/([\d.]+)/),f=e.match(/(BB10).*Version\/([\d.]+)/),v=e.match(/(RIM\sTablet\sOS)\s([\d.]+)/),h=e.match(/PlayBook/),g=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),m=e.match(/Firefox\/([\d.]+)/);(n.webkit=!!o)&&(n.version=o[1]),i&&(t.android=!0,t.version=i[3]),r&&(t.android=!0,t.version="N"),s&&(t.ios=t.iphone=!0,t.version=s[2].replace(/_/g,".")),a&&(t.ios=t.ipad=!0,t.version=a[2].replace(/_/g,".")),c&&(t.webos=!0,t.version=c[2]),d&&(t.touchpad=!0),u&&(t.blackberry=!0,t.version=u[2]),f&&(t.bb10=!0,t.version=f[2]),v&&(t.rimtabletos=!0,t.version=v[2]),h&&(n.playbook=!0),l&&(t.kindle=!0,t.version=l[1]),p&&(n.silk=!0,n.version=p[1]),!p&&t.android&&e.match(/Kindle Fire/)&&(n.silk=!0),g&&(n.chrome=!0,n.version=g[1]),m&&(n.firefox=!0,n.version=m[1]),t.tablet=!!(a||h||i&&!e.match(/Mobile/)||m&&e.match(/Tablet/)),t.phone=!(t.tablet||!(i||s||c||u||f||g&&e.match(/Android/)||g&&e.match(/CriOS\/([\d.]+)/)||m&&e.match(/Mobile/)))}t.call(e,navigator.userAgent)}(tvp.$),function(e){function t(t){var n=t.match(/MQQBrowser\/(\d+\.\d+)/i),o=t.match(/QQ\/(\d+\.(\d+)\.(\d+)\.(\d+))/i)||t.match(/V1_AND_SQ_([\d\.]+)/),i=t.match(/MicroMessenger\/((\d+)\.(\d+))\.(\d+)/)||t.match(/MicroMessenger\/((\d+)\.(\d+))/),r=t.match(/Mac\sOS\sX\s(\d+\_\d+)/),a=t.match(/Windows(\s+\w+)?\s+?(\d+\.\d+)/),s=t.match(/MiuiBrowser\/(\d+\.\d+)/i),c=t.match(/MI-ONE/),d=t.match(/MI PAD/),l=t.match(/UCBrowser\/(\d+\.\d+(\.\d+\.\d+)?)/)||t.match(/\sUC\s/),p=t.match(/IEMobile(\/|\s+)(\d+\.\d+)/)||t.match(/WPDesktop/),u=t.match(/(ipod).*\s([\d_]+)/i),f=t.match(/(ipad).*\s([\d_]+)/i),v=t.match(/(iphone)\sos\s([\d_]+)/i),h=t.match(/Chrome\/(\d+\.\d+)/),g=t.match(/qqnews\/(\d+\.\d+\.\d+)/i),m=t.match(/qnreading\/(\d+\.\d+\.\d+)/i),w=t.match(/LieBaoFast\/(\d+\.\d+\.\d+)/i),y=t.match(/com\.douban\.frodo\/(\d+\.\d+\.\d+)/i),b=t.match(/QQLiveBrowser\/(\d+\.\d+\.\d+)/i),q=t.match(/MIDP-([\d\.]+)/i),I=t.match(/Mozilla.*Linux.*Android.*AppleWebKit.*Mobile Safari/),x=t.match(/(android)\s([\d\.]+)/i);if(e.browser=e.browser||{},e.os=e.os||{},window.ActiveXObject){var _=6;(window.XMLHttpRequest||t.indexOf("MSIE 7.0")>-1)&&(_=7),(window.XDomainRequest||t.indexOf("Trident/4.0")>-1)&&(_=8),t.indexOf("Trident/5.0")>-1&&(_=9),t.indexOf("Trident/6.0")>-1&&(_=10),e.browser.ie=!0,e.browser.version=_}else t.indexOf("Trident/7.0")>-1&&(e.browser.ie=!0,e.browser.version=11);x&&(this.os.android=!0,this.os.version=x[2]),q&&(this.os.android=!0),u&&(this.os.ios=this.os.ipod=!0,this.os.version=u[2].replace(/_/g,".")),f&&(this.os.ios=this.os.ipad=!0,this.os.version=f[2].replace(/_/g,".")),v&&(this.os.iphone=this.os.ios=!0,this.os.version=v[2].replace(/_/g,".")),a&&(this.os.windows=!0,this.os.version=a[2]),r&&(this.os.Mac=!0,this.os.version=r[1]),t.indexOf("lepad_hls")>0&&(this.os.LePad=!0),d&&(this.os.MIPAD=!0),n&&(this.browser.MQQ=!0,this.browser.version=n[1]),o&&(this.browser.MQQClient=!0,this.browser.version=o[1]),i&&(this.browser.WeChat=!0,this.browser.version=i[1]),s&&(this.browser.MIUI=!0,this.browser.version=s[1]),l&&(this.browser.UC=!0,this.browser.version=l[1]||0/0),p&&(this.browser.IEMobile=!0,this.browser.version=p[2]),I&&(this.browser.AndriodBrowser=!0),c&&(this.browser.M1=!0),h&&(this.browser.Chrome=!0,this.browser.version=h[1]),g&&(this.browser.qqnews=!0,this.browser.version=g[1]),m&&(this.browser.kuaibao=!0,this.browser.version=m[1]),w&&(this.browser.liebao=!0,this.browser.version=w[1]),y&&(this.browser.douban=!0,this.browser.version=y[1]),b&&(this.browser.qqlive=!0,this.browser.version=b[1]),this.os.windows&&(this.os.win64="undefined"!=typeof navigator.platform&&"win64"==navigator.platform.toLowerCase()?!0:!1);var k={iPad7:"iPad; CPU OS 7",LePad:"lepad_hls",XiaoMi:"MI-ONE",SonyDTV:"SonyDTV",SamSung:"SAMSUNG",HTC:"HTC",VIVO:"vivo"};for(var S in k)this.os[S]=-1!==t.indexOf(k[S]);e.os.phone=e.os.phone||/windows phone/i.test(t),this.os.getNumVersion=function(){return parseFloat(e.os.version,"10")},this.os.hasTouch="ontouchstart"in window,this.os.hasTouch&&this.os.ios&&this.os.getNumVersion()<6&&(this.os.hasTouch=!1),e.browser.WeChat&&e.browser.version<5&&(this.os.hasTouch=!1),e.extend(e.browser,{getNumVersion:function(){return parseFloat(e.browser.version,"10")},isFFCanOcx:function(){return e.browser.firefox&&e.browser.getNumVersion()>=3?!0:!1},isCanOcx:function(){return!(!e.os.windows||!e.browser.ie&&!e.browser.isFFCanOcx()&&!e.browser.webkit)},isNotIESupport:function(){return!!e.os.windows&&(!!e.browser.webkit||e.browser.isFFCanOcx())}}),e.userAgent={},e.extend(e.userAgent,e.os),e.extend(e.userAgent,e.browser),e.userAgent.browserVersion=e.browser.version,e.userAgent.osVersion=e.os.version,delete e.userAgent.version}t.call(e,navigator.userAgent)}(tvp.$),function(e){var t={getByID:function(e){return document.getElementById(e)},noop:function(){},isString:function(t){return"string"===e.type(t)},isUndefined:function(t){return"undefined"===e.type(t)},now:function(){return(new Date).getTime()},getISOTimeFormat:function(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1,o=e.getDate(),i=e.getHours(),r=e.getMinutes(),a=e.getSeconds();return[[t,10>n?"0"+n:n,10>o?"0"+o:o].join("-"),[10>i?"0"+i:i,10>r?"0"+r:r,10>a?"0"+a:a].join(":")].join(" ")},formatSeconds:function(e){e=parseInt(e);var t=parseInt(e/60),n=t>=60?parseInt(t/60):0,o=e%60,i="";return t>=60&&(t%=60),n>0&&(i+=10>n?"0"+n:n,i+=":"),i+=10>t?"0"+t:t,i+=":",i+=10>o?"0"+o:o},formatSecondsWithText:function(e){var t=this.formatSeconds(e),n=t.split(":"),o="";switch(n.length){case 1:o=n[0]+"秒";break;case 2:o=n[0]+"分"+n[1]+"秒";break;case 3:o=n[0]+"小时"+n[1]+"分"+n[2]+"秒";break;default:o=t}return o},formatFileSize:function(e){return e=parseInt(e,10),e=e/1024/1024,e=e.toFixed(1),e+"M"},getHost:function(){var e=window.location.hostname||window.location.host,t=location.host.split(".");return t.length>1&&(e=t.slice(t.length-2).join(".")),e},getUrlParam:function(e,t){t=t||document.location.toString();var n=new RegExp("(^|&|\\\\?)"+e+"=([^&]*)(&|$|#)"),o=null;return o=t.match(n),o?o[2]:""},setUrlParam:function(e,t,n){n=n||location.href;var o,i,r=new RegExp("[\\?&#]"+e+"=([^&#]+)","gi"),a=n.match(r),s="{key"+(new Date).getTime()+"}";if(o=a&&a.length>0?a[a.length-1]:"",i=e+"="+t,o){var c=o.charAt(0);n=n.replace(o,s),n=n.replace(s,t?c+i:"")}else t&&(n+=n.indexOf("?")>-1?"&"+i:"?"+i);return n},filterXSS:function(t){return e.isString(t)?t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&apos;"):t},createGUID:function(e){e=e||32;for(var t="",n=1;e>=n;n++){var o=Math.floor(16*Math.random()).toString(16);t+=o}return t},newGuid:function(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return[e(),e(),e(),e(),e(),e(),e(),e()].join("")},formatSize:function(e){var t=""+e;return t.indexOf("%")>0?t:t.indexOf("px")>0?t:/^\d+$/.test(t)?t+"px":t},compareVersion:function(e,t){e=String(e).split("."),t=String(t).split(".");try{for(var n=0,o=Math.max(e.length,t.length);o>n;n++){var i=isFinite(e[n])&&Number(e[n])||0,r=isFinite(t[n])&&Number(t[n])||0;if(r>i)return-1;if(i>r)return 1}}catch(a){return-1}return 0},isTrue:function(e){return!!tvp.$.filterXSS(e)},loadPluginCss:function(t){var n="",o=tvp.defaultConfig.pluginCssUrl;return t in o&&(n=tvp.defaultConfig.cssPath+o[t]),e.loadCss(n)},getData:function(e){var t;if(window.localStorage)try{t=window.localStorage[e]}catch(n){}return t},setData:function(e,t){if(window.localStorage){try{window.localStorage[e]=t}catch(n){}return!0}},delData:function(e){if(window.localStorage){try{window.localStorage.removeItem(e)}catch(t){}return!0}},formatTpl:function(t,n){if(t&&"object"===e.type(n)){for(var o in n)for(var i="${"+o+"}";t.indexOf(i)>-1;)t=t.replace(i,n[o]);return t}},loadCss:function(t){var n=e.Deferred(),o=!1;if(t){for(;t.indexOf("../")>=0;)t=t.replace("../","");t=e.filterXSS(t);var i=document,r=i.getElementsByTagName("head")[0]||i.documentElement,a=r.getElementsByTagName("base")[0],s=i.createElement("link");s.rel="stylesheet",s.href=t,s.onload=s.onerror=function(){s.onload=s.onerror=null,o=!0,n.resolve()},setTimeout(function(){o||n.resolve()},2500),a?r.insertBefore(s,a):r.appendChild(s)}else n.reject();return n}};e.extend(e,t)}(tvp.$),function(e){e.cookie={set:function(e,t,n,o,i){if(i){var r=new Date,a=new Date;a.setTime(r.getTime()+36e5*i)}return document.cookie=e+"="+t+"; "+(i?"expires="+a.toGMTString()+"; ":"")+(o?"path="+o+"; ":"path=/; ")+(n?"domain="+n+";":"domain="+window.location.host+";"),!0},get:function(e){var t=new RegExp("(?:^|;+|\\s+)"+e+"=([^;]*)"),n=document.cookie.match(t);return n?n[1]:""},del:function(e,t,n){var o=new Date;o.setTime(o.getTime()-1),document.cookie=e+"=; expires="+o.toGMTString()+";"+(n?"path="+n+"; ":"path=/; ")+(t?"domain="+t+";":"domain="+window.location.host+";")}}}(tvp.$),tvp=tvp||{},tvp.common={isUseHtml5:function(){var e=navigator.userAgent,t=null;if(/ipad|ipod|iphone|lepad_hls|IEMobile|WPDesktop/gi.test(e))return!0;if(tvp.$.os.android){if(tvp.common.isSupportMP4())return!0;if(tvp.$.browser.MQQ&&tvp.$.browser.getNumVersion()>=4.2)return!0;if(-1!=e.indexOf("MI2"))return!0;if(tvp.$.os.version>="4"&&(t=e.match(/MicroMessenger\/((\d+)\.(\d+))\.(\d+)/))&&t[1]>=4.2)return!0;if(tvp.$.os.version>="4.1")return!0}return!1},isInUseH5:function(){var e=navigator.userAgent,t=null;if(tvp.$.os.android){if(tvp.$.browser.MQQ&&tvp.$.browser.getNumVersion()>=4.2)return!0;if(-1!=e.indexOf("MI2"))return!0;if(tvp.$.os.version>="4"&&(t=e.match(/MicroMessenger\/((\d+)\.(\d+))\.(\d+)/))&&t[1]>=4.2)return!0;if(tvp.$.os.version>="4.1")return!0}},isUseHLS:function(){return tvp.$.os.ios?!0:void 0},isMac:function(){var e=/Macintosh/gi.test(navigator.userAgent);return e},isLiveUseHTML5:function(){return tvp.$.os.ios?!0:tvp.$.os.ipad?!0:tvp.$.os.android&&tvp.common.isSupportM3u8()?!0:!1},isSupportM3u8:function(){var e=document.createElement("video"),t=["application/x-mpegURL","audio/mpegurl","vnd.apple.mpegURL","application/vnd.apple.mpegURL"],n=!1;return"function"==typeof e.canPlayType&&tvp.$.each(t,function(t,o){return e.canPlayType(o)?void(n=!0):void 0}),e=null,tvp.$.os.android&&(tvp.$.os.version>="4"&&tvp.$.browser.Chrome&&(n=!0),tvp.$.browser.M1&&(n=!1),/V8 Build/.test(navigator.userAgent)&&(n=!1),tvp.$.browser.MQQ&&tvp.$.browser.getNumVersion()>=4.2&&(n=!0)),n},isSupportMP4:function(){var e=document.createElement("video");if("function"==typeof e.canPlayType){if("probably"==e.canPlayType('video/mp4; codecs="mp4v.20.8"'))return!0;if("probably"==e.canPlayType('video/mp4; codecs="avc1.42E01E"')||"probably"==e.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"'))return!0}return!1},isSupportSVG:function(){return document.implementation&&tvp.$.isFunction(document.implementation.hasFeature)?document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"):!1},isEnforceMP4:function(){if(tvp.$.os.android){if(tvp.$.browser.firefox)return!0;if(tvp.$.browser.chrome)return!1;if(tvp.$.os.version>="4.0"&&tvp.$.browser.MQQ&&tvp.$.browser.version<"4.0")return!0}return!1},getUin:function(e){var t=tvp.$.cookie.get("skey"),n=tvp.$.cookie.get("lskey"),o="",i=0,r=!1;return"undefined"==typeof isLeak&&"undefined"!=typeof e&&(isLeak=e),isLeak="undefined"==typeof isLeak?!1:!0,r=!!isLeak&&""!=n,r||""!=t?(o=tvp.$.cookie.get("uin"),""==o&&r&&(o=tvp.$.cookie.get("luin")),i=parseInt(o.replace(/^o0*/g,""),10),isNaN(i)||1e4>=i?0:i):0},getSKey:function(e){var t=tvp.$.cookie.get("skey"),n=tvp.$.cookie.get("lskey"),o="";return o=e?""!=t&&""!=n?t:t||n:t},getToken:function(e){var t=this.getSKey(e),n=this.time33(t);return n},time33:function(e){for(var t=0,n=e.length,o=5381;n>t;++t)o+=(o<<5)+e.charAt(t).charCodeAt();return 2147483647&o},openLogin:function(){},getVideoSnap:function(e,t){var n,o,i=1e8;if(e.indexOf("_")>0){var r=e.split("_");e=r[0],t=parseInt(r[1])}for(var a=4294967296,s=0,c=0;c<e.length;c++){var d=e.charCodeAt(c);s=32*s+s+d,s>=a&&(s%=a)}return o=s%i,void 0==t&&(t=0),n=0==t?["http://vpic.video.qq.com/",o,"/",e,"_160_90_3.jpg"].join(""):["http://vpic.video.qq.com/",o,"/",e,"_","160_90_",t,"_1.jpg"].join("")},getVideoSnapMobile:function(e,t){t=t||0;var n=["496_280"],o="http://shp.qpic.cn/qqvideo_ori/0/{vid}_{index}/0";return o.replace("{vid}",e).replace("{index}",n[t])},picerr:function(){},getDeviceId:function(){var e=tvp.DEVICE.other;return tvp.$.os.iphone?e=tvp.DEVICE.iphone:tvp.$.os.ipad?e=tvp.DEVICE.ipad:tvp.$.os.android&&tvp.$.os.phone&&(e=tvp.DEVICE.aphone),e},getPlatformId:function(){var e=tvp.PLATFORM.other;return tvp.$.browser.WeChat?e=tvp.PLATFORM.wechat:tvp.$.browser.MQQClient?e=tvp.PLATFORM.mqq:tvp.$.browser.MQQ&&(e=tvp.PLATFORM.qqbrowser),e},getParams:function(e){for(var t,n,o=e.indexOf("?"),i=e.substring(o+1),r=/\w+=[^&]+/g,a={};null!==(t=r.exec(i));)n=t[0].split("="),n.length>=2&&(a[n.shift()]=n.join("="));return a},recomdTextById:function(e){if(e){if(this.recomdText||(this.recomdText={}),this.recomdText[e]&&"string"==typeof this.recomdText[e])return this.recomdText[e];var t,n=tvp.$.Deferred(),o=this,i=50;return i=0,i&&100*Math.random()>i?(n.resolve(),n):(t=tvp.common.get_request_url("like")+"?callback=?",tvp.$.ajax({url:t,dataType:"jsonp",jsonpCallback:"tvp_request_like_callback_"+parseInt(1e6*Math.random()),data:{id:e,uin:0,playright:7,msgtype:103,otype:"json",tablist:9}}).done(function(t){t&&t.rmdword?(o.recomdText[e]=t,n.resolve()):n.resolve()}).fail(function(){n.resolve()}),setTimeout(function(){n.resolve()},5e3),n)}},get_hostname_fromUrl:function(e){if(e){var t=document.createElement("a");return t.href=e,t.hostname}},get_css_path:function(){return"//imgcache.qq.com/tencentvideo_v1/vstyle/mobile/v2/style/"},get_js_path:function(){return"//imgcache.qq.com/tencentvideo_v1/tvp/"},get_request_url:function(e){var t={getinfo:["http://h5vv.video.qq.com/getinfo","https://sec.video.qq.com/p/h5vv.video/getinfo"],edugetvinfo:["http://sv.video.qq.com/edugetvinfo","https://sec.video.qq.com/p/sv.video/edugetvinfo"],mvgetinfo:["http://sv.video.qq.com/mvgetinfo","https://sec.video.qq.com/p/sv.video/mvgetinfo"],getinfoInews:["http://h5wx.video.qq.com/getinfo?callback=?&","https://sec.video.qq.com/p/h5wx.video/getinfo?callback=?&"],getvinfo:["http://h5vv.video.qq.com/getvinfo","https://sec.video.qq.com/p/h5vv.video/getvinfo"],getkey:["http://h5vv.video.qq.com/getkey","https://sec.video.qq.com/p/h5vv.video/getkey"],mvgetkey:["http://sv.video.qq.com/mvgetkey","https://sec.video.qq.com/p/sv.video/mvgetkey"],getkeyInews:["http://h5wx.video.qq.com/getkey?callback=?&","https://sec.video.qq.com/p/h5wx.video/getkey?callback=?&"],limit_conf:["http://v.qq.com/iframe/limit_conf.js","https://v.qq.com/iframe/limit_conf.js"],zb:["http://info.zb.video.qq.com","https://sec.video.qq.com/p/info.zb/video/"],swf_root:["http://imgcache.qq.com/tencentvideo_v1/player/","https://imgcache.qq.com/tencentvideo_v1/player/"],rmd_mobile:["http://like.video.qq.com/fcgi-bin/rmd_mobile","https://sec.video.qq.com/p/like.video/fcgi-bin/rmd_mobile"],like:["http://like.video.qq.com/fcgi-bin/like","https://sec.video.qq.com/p/like.video/fcgi-bin/like"],dataout_ex:["http://sns.video.qq.com/fcgi-bin/dlib/dataout_ex","https://sec.video.qq.com/p/sns.video/fcgi-bin/dlib/dataout_ex"],get_dtype:["http://h5vv.video.qq.com/getdtype","https://sec.video.qq.com/p/h5vv.video/getdtype"]};return"https:"===window.location.protocol?t[e][1]:t[e][0]},get_chid:function(){var e="";return/(.*\.)3g\.qq\.com$/i.test(document.location.hostname)?e=13:tvp.$.browser.qqlive?e=0:/(.*\.)?v\.qq\.com$/i.test(document.location.hostname)?e=0:tvp.$.browser.WeChat?e=3:tvp.$.browser.MQQClient?e=10:tvp.$.browser.qqnews&&(e=2),e},get_stdfrom:function(){var e="view.inews.qq.com"===location.host,t=tvp.$;return t.os.iphone||t.os.ipod?e?"v3110":"v3010":t.os.ipad?e?"v4110":"v4010":t.os.android?t.os.tablet?"v6010":e?"v5110":"v5010":t.browser.IEMobile?"v7010":"v1010"},get_platform:function(){var e=tvp.$;return e.os.iphone?1:e.os.ipad?2:e.os.android?3:4},is_mqq_buluo:function(){return!tvp.$.browser.MQQClient||"xiaoqu.qq.com"!==window.location.hostname&&"buluo.qq.com"!==window.location.hostname?!1:!0},getPageType:function(){return tvp.app?tvp.app.pageType:tvp.$.browser.WeChat?1:tvp.$.browser.MQQClient?2:tvp.$.browser.MQQ?3:0},getPosition:function(e){for(var t=e.offsetLeft,n=e.offsetTop,o=e.offsetParent;null!==o;)t+=o.offsetLeft,n+=o.offsetTop,o=o.offsetParent;return{x:t,y:n}},afterWeChatReady:function(e){function t(){n.resolve()}var n=tvp.$.Deferred(),o=e.timeout||5e3;return tvp.$.browser.WeChat?"undefined"!=typeof WeixinJSBridge&&WeixinJSBridge.on?t():(document.addEventListener("WeixinJSBridgeReady",function(){t()}),setTimeout(function(){t()},o)):t(),n}},tvp.version=function(){function e(e){if(t(e))return e;if(/\d+/i.test(e)){var n=parseInt(e/1e4/100,10),o=parseInt(e/1e4,10)-100*n,i=parseInt(e,10)-(100*n*1e4+1e4*o),r=n+"."+o+"."+i;return r}return e}function t(e){return/^(\d+\.){2}\d+(\.\d+)?$/.test(e)}var n,o="0.0.0.0",i="0.0.0",r=new Image,a=!1,s=!1;return"film.qq.com"==document.location.host&&(s=!0),{getOcx:function(t){if(tvp.$.isUndefined(t)&&(t=!0),t&&"0.0.0.0"!=o)return o;var i;if(tvp.$.browser.ie)try{i="IE begin",n=new ActiveXObject(QQLive.config.PROGID_QQLIVE_INSTALLER),"undefined"!=typeof n.getVersion?(o=n.GetVersionByClsid(QQLive.config.OCX_CLSID),i="get actObj.GetVersionByClsid:"+o):i="no function:actObj.GetVersionByClsid"}catch(c){s&&!a&&(a=!0)&&(r.src="http://btrace.video.qq.com/collect?sIp=&iQQ="+tvp.common.getUin()+"&sBiz=IE&sOp="+encodeURIComponent(navigator.userAgent)+"&iSta=0&iTy=2432&iFlow=&sUrl="+encodeURIComponent(location.toString())+"&sRef="+encodeURIComponent(document.referrer)+"&sMsg="+encodeURIComponent(c.message)+"&sStep="+encodeURIComponent(i)+"&_="+Math.random())}else if(tvp.$.browser.isNotIESupport()){i="no IE begin";var d,l=navigator.plugins;if(tvp.$.isUndefined(l.namedItem)||(i="plugs.namedItem",d=l.namedItem("腾讯视频")),!d){i="no plugs.namedItem:tencentvideo";for(var p=0,u=l.length;u>p;p++)if(l[p]&&"腾讯视频"==l[p].name||"npQQLive.dll"==l[p].filename){d=l[p];break}}if(d)if(tvp.$.isUndefined(d.version)){i="plug.description:"+d.description;var f,v=d.description;f=v.match(/version:((\d+\.){3}(\d+)?)/),f&&(o=f[1])}else i="plug.version:"+d.version,o=d.version;else i="no plugs[i].filename:npQQLive.dll"}return parseInt(o,10)||s&&!a&&(a=!0)&&(r.src="http://btrace.video.qq.com/collect?sIp=&iQQ="+tvp.common.getUin()+"&sBiz="+(tvp.$.browser.ie?"IE":"NOIE")+"&sOp="+encodeURIComponent(navigator.userAgent)+"&iSta=0&iTy=2432&iFlow=&sUrl="+encodeURIComponent(location.toString())+"&sRef="+encodeURIComponent(document.referrer)+"&sMsg="+o+"&sStep="+encodeURIComponent(i)+"&_="+Math.random()),o=e(o)},getFlash:function(){if("0.0.0"!=i)return i;var e,t=null,n=null,o=[],c="Shockwave Flash",d=navigator,l="application/x-shockwave-flash";if(tvp.$.browser.ie)try{e="IE begin",t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),e="new ActiveXObject",t&&(n=t.GetVariable("$version"),e="swf.GetVariable",n&&(n=n.split(" ")[1].split(","),o=[parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10)]))}catch(p){s&&!a&&(a=!0)&&(r.src="http://btrace.video.qq.com/collect?sIp=&iQQ="+tvp.common.getUin()+"&sBiz=IE&sOp="+encodeURIComponent(navigator.userAgent)+"&iSta=1&iTy=2432&iFlow=&sUrl="+encodeURIComponent(location.toString())+"&sRef="+encodeURIComponent(document.referrer)+"&sMsg="+encodeURIComponent(p.message)+"&sStep="+encodeURIComponent(e)+"&_="+Math.random())}else tvp.$.isUndefined(d.plugins)||"object"!=typeof d.plugins[c]||(e="no IE begin",n=d.plugins[c].description,e="plugins[S].description",n&&(tvp.$.isUndefined(d.mimeTypes)||!d.mimeTypes[l]||d.mimeTypes[l].enabledPlugin)?(e="parse description",n=n.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),o[0]=parseInt(n.replace(/^(.*)\..*$/,"$1"),10),o[1]=parseInt(n.replace(/^.*\.(.*)\s.*$/,"$1"),10),o[2]=/[a-zA-Z]/.test(n)?parseInt(n.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0):e="no mimeTypes or disable");return i=o.join("."),parseInt(i,10)||s&&!a&&(a=!0)&&(r.src="http://btrace.video.qq.com/collect?sIp=&iQQ="+tvp.common.getUin()+"&sBiz="+(tvp.$.browser.ie?"IE":"NOIE")+"&sOp="+encodeURIComponent(navigator.userAgent)+"&iSta=1&iTy=2432&iFlow=&sUrl="+encodeURIComponent(location.toString())+"&sRef="+encodeURIComponent(document.referrer)+"&sMsg="+i+"&sStep="+encodeURIComponent(e)+"&_="+Math.random()),i},getFlashMain:function(){return parseInt(tvp.version.getFlash().split(".")[0],10)}}}(),function(e,t){var n={qqlive:{text1:"腾讯视频客户端",text2:"可观看更多视频",md5Cgi:"http://mcgi.v.qq.com/commdatav2?cmd=39&otype=json&confid=${id}",md5Cgi_https:"https://sec.video.qq.com/p/mcgi.v/commdatav2?cmd=39&otype=json&confid=${id}",payUrl:"http://film.qq.com/weixin/detail/${index}/${cid}.html",scheme:"tenvideo2://",logoClass:"",openUrl:"tenvideo2://?action=5&video_id=${vid}",liveOpenUrl:"tenvideo2://?action=8&channel_id=${lid}",ipadDownloadUrl:"https://itunes.apple.com/cn/app/teng-xun-shi-pinhd/id407925512?mt=8",iphoneDownloadUrl:"http://itunes.apple.com/cn/app/id458318329?mt=8",aphoneDownloadUrl:"http://mcgi.v.qq.com/commdatav2?cmd=4&confid=140&platform=aphone",VIA:"ANDROIDQQ.QQLIVE",appId:"100730521",downloadId:"TencentVideo",taskName:"TencentVideo",packageName:t.os.iphone?"com.tencent.live4iphone":"com.tencent.qqlive",packageUrl:"tenvideo2://can_open_me_if_install_and_regeister_this_scheme"},weishi:{text1:"微视客户端",text2:"发现更多精彩",logoClass:"tvp_download_app_solo_weishi",md5Cgi:"http://www.weishi.com/api/packdata.php?confid=${id}",scheme:t.os.iphone?" weishiiosscheme://":"weishiandroidscheme://",openUrl:t.os.iphone?" weishiiosscheme://detail?tweetid=${id}":"weishiandroidscheme://detail?tweetid=${id}",iphoneDownloadUrl:"http://www.weishi.com/download/index.php?pgv_ref=weishi.shipin.xinwenfenxiang",aphoneDownloadUrl:"http://www.weishi.com/download/index.php?pgv_ref=weishi.shipin.xinwenfenxiang",ipadDownloadUrl:"",VIA:"ANDROIDQQ.WEISHI",appId:"1101083114",downloadId:"TencentWeishi",taskName:"TencentWeishi",packageName:t.os.iphone?"com.tencent.microvision":"com.tencent.weishi",packageUrl:t.os.iphone?"weishiiosscheme://can_open_me_if_install_and_regeister_this_scheme":"weishiandroidscheme://can_open_me_if_install_and_regeister_this_scheme"},yyb:{packageName:"com.tencent.android.qqdownloader"}};
e.app={config:{defaultName:"qqlive",QQApiUrl:"http://pub.idqqimg.com/qqmobile/qqapi.js",mqqApiUrl:"//res.imtt.qq.com/browser_lightapp/QQBrowserApi/getCryptext/browser_interface_getCryptext.js"},loadQQClientDefer:!1,loadDownloaderDefer:!1,loadMqqDefer:!1,getDownloadUrl:function(o,i){return i=i||e.app.config.defaultName,o=t.os.iphone?n[i].iphoneDownloadUrl:o||n[i].aphoneDownloadUrl,o=t.os.ipad?n[i].ipadDownloadUrl:o},getPayUrl:function(e){var o=t.formatTpl(n.qqlive.payUrl,{index:e.slice(0,1),cid:e});return o},getOpenUrl:function(o){var i={},r=!1;if(!o)return r;if(o.appName&&o.appName!==e.app.config.defaultName)return r=o.openId?n[o.appName].openUrl.replace("${id}",o.openId):n[o.appName].scheme;switch(o.lid?i.channel_id=o.lid:o.cid?i.cover_id=o.cid:o.tid?i.topic_id=o.tid:o.vidArray||!o.vid?i.video_id="${vid}":o.vid&&(i.video_id=o.vid),o.vid2&&(i.video_id=o.vid2),o.openType){case 6:o.cid&&(i.action=1);break;case 2:i.action=o.lid?8:7;break;case 3:i.action=o.lid?8:o.tid?6:5;break;case 4:o.cid&&(i.action=1);break;default:i.action=o.lid?8:o.cid?1:5}if(o.promotionId&&(i.from=o.promotionId+"_"+(o.contentId?o.contentId:"")),i.action=i.action||5,r=n.qqlive.scheme+"?"+decodeURIComponent(t.param(i)),(o.cid||o.h5Url)&&parseInt(o.pay)){var a=o.cid?e.app.getPayUrl(o.cid):o.h5Url;t.os.iphone?(r=a,o.openUrl=r):o.version&&parseInt(o.version)<5852&&(r=a)}return r!==a&&o.openUrl&&(r=t.filterXSS(o.openUrl),r.indexOf("from")<0&&r.indexOf("?")>-1&&o.promotionId&&(r+="&from="+o.promotionId+"_"+(o.contentId?o.contentId:""))),r},getPackageInfo:function(){return n},pageType:function(){return t.browser.WeChat?1:t.browser.MQQClient?2:t.browser.MQQ?3:0}(),isSupportApp:function(){return t.os.iphone||t.os.ipod||t.os.ipad?!0:t.os.android?!0:!1}(),unbindTryOpenAppBanner:function(e){e?e.noTryOpen=!0:""},bindTryOpenAppBanner:function(n){if(n&&!([2,3].indexOf(e.app.pageType)>-1||1===e.app.pageType&&(window!==top&&top.location.href||window===top))){var o=e.$.os.hasTouch?"touchend":"click",i=n.$btn,r=i.attr("data-url"),a=!1,s=function(){var t=navigator.userAgent;return e.$.os.android||e.$.os.ios?-1!=t.indexOf("qqnews/")?!1:e.$.os.android&&a?!1:/^http|https/g.test(r)?!1:!0:!1};if(!s())return!1;i.bind("touchend click",function(e){n.noTryOpen||e.preventDefault()});var c=!1;i.bind("touchstart",function(){c=!1}).bind("touchmove",function(){c=!0}),i.bind(o,function(o){if(o.preventDefault(),!c){var i,r=o.target;i="a"===r.tagName.toLowerCase()?t(r):t(r).parents("a"),n.noTryOpen||e.app.tryOpenAppBanner(i)}})}},tryOpenAppBanner:function(t){if(t.length){var n=t.attr("href"),o=t.attr("data-url"),i=function(){location.href=n},r=function(){if(e.$.os.ios&&e.$.compareVersion(e.$.os.version,"9.0")>-1)try{window.location.href=o}catch(t){}else{var t=document.createElement("iframe");t.style.cssText="width:1px;height:1px;position:fixed;top:0;left:0;opacity:0;",t.src=o,document.body.appendChild(t)}};r();var a=(new Date).valueOf();setTimeout(function(){var e=(new Date).valueOf();1550>e-a&&i()},1500)}},loadMqqAPI:function(){if(e.app.loadMqqDefer)return e.app.loadMqqDefer;var n=t.Deferred();if(e.app.loadMqqDefer=n,window.x5)n.resolve();else{var o=this.config.mqqApiUrl;t.getScript(o,function(){window.x5?n.resolve():n.reject()})}return setTimeout(function(){n.reject()},5e3),n},invokeQQBrowserAPI:function(n){function o(){if(window.x5&&x5.ios&&x5.ios.getMobileAppSupport){var e={scheme:n.packageInfo.packageUrl};x5.ios.getMobileAppSupport(e,function(e){i.resolve(e&&1==e.isSupportApp?1:0)},function(){i.resolve(0)})}else i.resolve(0);setTimeout(function(){i.resolve(0)},300)}if(!t.os.iphone&&window.QQApi&&QQApi.checkAppInstalled)return this.invokeQQClientAPI(n);var i=t.Deferred();if(!t.os.iphone&&window.x5mtt&&window.x5mtt.isApkInstalled){var r=window.x5mtt.isApkInstalled('{"packagename": '+n.packageInfo.packageName+"}");i.resolve(-1!=r?1:0)}else t.os.iphone&&parseInt(t.os.version)>5?e.app.loadMqqAPI().done(function(){o()}).fail(function(){i.resolve(0)}):i.resolve(0);return setTimeout(function(){i.resolve(0)},3e3),i},getQQBrowserSignKey:function(n,o){var i=e.app,r=i.pageType,a=new t.Deferred,s=this.loadMqqAPI();return 3!=r?void a.resolve(0):(s.done(function(){if(!window.x5||!e.$.os.ios)return void a.resolve(0);if(!x5.ios||!x5.ios.getBrowserSignature)return void a.resolve(0);var t={vid:n};o&&(t.timestamp=parseInt((new Date).valueOf()/1e3)),x5.ios.getBrowserSignature(t,function(e){a.resolve(e&&e.key&&e.ver&&e.platform?{key:e.key,ver:e.ver,platform:e.platform}:0)},function(){a.resolve(0)})}),s.fail(function(){a.resolve(0)}),a)},mqqBuoLuoAuth:function(e){var n,o=t.Deferred();try{window.getBrowserSignature(e,function(e){if(e&&e.data)try{var t=JSON.parse(e.data);t&&t.result&&t.result.token&&(n=t.result.token)}catch(i){}o.resolve(n)}),setTimeout(function(){o.reject()},5e3)}catch(i){o.reject()}return o},kuaiBaoAppAuth:function(e,n){var o=t.Deferred(),i="undefined"!=typeof n?n+"":parseInt(+new Date/1e3)+"",r="TVP_KUAIBAO_CB_"+i.substr(-4,4);window[r]=function(e){var t;try{t=JSON.parse(e)}catch(n){}o.resolve(t)};var a=function(){var t={method:"getCKey",types:["string","string","string"],args:[e,i,r],instanceName:"TencentNewsScriptControllerJsInterface"},n="jsbridge://get_with_json_data?json="+encodeURIComponent(JSON.stringify(t))+"&_t="+i,o=new Image;o.src=n},s=function(){var t=function(){window.getBrowserSignature(e,i,r)};"function"==typeof window.getBrowserSignature?t():document.addEventListener("TencentNewsJSInjectionComplete",function(){t()})};return t.os.ios?s():t.os.android&&a(),setTimeout(function(){o.reject()},1e4),o},loadQQClientAPI:function(){if(e.app.loadQQClientDefer)return e.app.loadQQClientDefer;var n=t.Deferred();if(e.app.loadQQClientDefer=n,window.mqq||window.QQApi)n.resolve();else{var o=this.config.QQApiUrl;t.getScript(o,function(){n.resolve()})}return setTimeout(function(){n.reject()},3e3),n},invokeQQClientAPI:function(e){function n(){!i&&window.QQApi&&QQApi.checkAppInstalled?QQApi.checkAppInstalled(r,function(e){e&&0!=e?(e=e.split("."),e=e[e.length-1],o.resolve(1,e)):o.resolve(0)}):window.mqq&&mqq.app&&mqq.app.isAppInstalled?mqq.app.isAppInstalled(r,function(e){o.resolve(e?1:0)}):o.resolve(0)}var o=t.Deferred(),i=t.os.iphone,r=i?e.packageInfo.packageUrl:e.packageInfo.packageName;return this.loadQQClientAPI().done(function(){n()}).fail(function(){o.resolve(0)}),setTimeout(function(){o.resolve(0)},5e3),o},getAppMd5:function(o,i){o=o||140,i=i||e.app.config.defaultName;var r,a=t.Deferred();r="https:"===window.location.protocol?n[i].md5Cgi_https:n[i].md5Cgi;var s=r.replace("${id}",o);return t.ajax({url:s,dataType:"jsonp",jsonpCallback:"tvp_request_getmd5_callback_"+parseInt(1e6*Math.random())}).then(function(e){a.resolve(e&&e.data?e.data:e)}),a},report:function(n,o){var i={};o=o&&o.curVideo?o:!1,o&&(i={vid:o.curVideo.getVid()||o.curVideo.getChannelId(),appId:o.config.appid||o.config.appId,contentId:o.config.contentId}),n&&(n=t.extend(n,i),e.report(n),3537===n.cmd&&e.bossReport&&e.bossReport.appReportShowClick&&e.bossReport.appReportShowClick(n,o))},invokeWeChatAPI:function(e){var n=t.Deferred(),o=this;return window!=top&&(WeixinJSBridge=top.WeixinJSBridge),WeixinJSBridge.invoke||n.resolve(0),o.getNetworkTypeInWechat().done(function(t){e&&e.t&&e.t.config&&(e.t.config.nettype=t)}),t.os.iphone?WeixinJSBridge.invoke("getInstallState",e.packageInfo,function(e){var t=e.err_msg;n.resolve(t.indexOf("get_install_state:yes")>-1?1:0)}):WeixinJSBridge.invoke("getInstallState",e.packageInfo,function(e){var t=e.err_msg;if(t.indexOf("get_install_state:yes")>-1){var o=t.split("yes_"),i=0;o.length>=2&&(i=parseInt(o[1],10)),i=isNaN(i)?0:i,n.resolve(1,i)}else n.resolve(0)}),setTimeout(function(){n.resolve(0)},6e3),n},getNetworkTypeInWechat:function(){var e=t.Deferred();return WeixinJSBridge.invoke("getNetworkType",{},function(t){var n=-1;t&&t.err_msg&&("network_type:fail"===t.err_msg&&(n=0),"network_type:wifi"===t.err_msg&&(n=1),"network_type:edge"===t.err_msg&&(n=2),"network_type:wwan"===t.err_msg&&(n=3)),e.resolve(n)}),e},check:function(o){var i=e.app,r=i.pageType,a=t.Deferred();if(o=o||{},o.appName=o.appName||e.app.config.defaultName,o.packageInfo=n[o.appName],1==r){var s=window==top?document:top.document;if(top.WeixinJSBridge)i.invokeWeChatAPI(o).then(function(e,t){a.resolve(i.buildResult(e,o,t))});else try{s.addEventListener("WeixinJSBridgeReady",function(){i.invokeWeChatAPI(o).then(function(e,t){a.resolve(i.buildResult(e,o,t))})})}catch(c){a.resolve(i.buildResult(0,o))}}else if(3==r)try{i.invokeQQBrowserAPI(o).then(function(e,t){a.resolve(i.buildResult(e,o,t))})}catch(c){a.resolve(i.buildResult(0,o))}else if(2==r)try{i.invokeQQClientAPI(o).then(function(e,t){a.resolve(i.buildResult(e,o,t))})}catch(c){a.resolve(i.buildResult(0,o))}else a.resolve(i.buildResult(0,o));return a},createDownloader:function(t){this.loadDownloaderAPI().done(function(){new e.AppDownloader(t)})},loadDownloaderAPI:function(){if(e.app.loadDownloaderDefer)return e.app.loadDownloaderDefer;var n=t.Deferred();e.app.loadDownloaderDefer=n;var o="";return 1==this.pageType&&(o=e.defaultConfig.libpath+e.defaultConfig.pluginUrl.AppDownloadClickWechat),2==this.pageType&&(o=e.defaultConfig.libpath+e.defaultConfig.pluginUrl.AppDownloadClickMqq),o||n.reject(),t.downloadClick_wechat||t.downloadClick_mqq?n.resolve():(t.getScript(o,function(){n.resolve()}),setTimeout(function(){n.reject()},3e3)),n},checkCanDownloader:function(e,n,o){function i(){t.downloadClick_wechat&&o&&t.downloadClick_wechat(o),t.downloadClick_mqq&&o&&t.downloadClick_mqq(o),r.resolve(1)}var r=t.Deferred();if(t.os.iphone||t.os.ipad||!n||1==e)return r.resolve(0),r;var a=!1,s=!1,c=/android/i.test(navigator.userAgent.toLowerCase());return!c||1==e||!n.downloader||n.downloadUrl&&!n.md5||!n.downloadUrl&&n.md5?(r.resolve(0),r):(t.isArray(n.range)&&t.each(n.range,function(e,t){1==t&&(a=!0),2==t&&(s=!0)}),n.downloaderCallback||(a=!0,s=!0),t.browser.WeChat&&a||t.browser.MQQClient&&s?this.loadDownloaderAPI().done(function(){i()}).fail(function(){r.resolve(0)}):r.resolve(0),r)},buildResult:function(n,o,i){var r="",a=this.pageType,s=t.os.iphone;o.version=i;var c=e.app.getOpenUrl(o),d=this;return s&&!o.openUrl&&(1==a&&(c+="&callback=weixin%3A%2F%2F&sender=%e5%be%ae%e4%bf%a1"),2==a&&(c+="&callback=mqqapi%3A%2F%2F&sender=%E6%89%8B%E6%9C%BAQQ"),3==a&&(c+="&callback=mqqbrowser%3A%2F%2F&sender=QQ%E6%B5%8F%E8%A7%88%E5%99%A8")),r=1==n?c:t.os.iphone&&parseInt(o.pay)&&o.cid?e.app.getPayUrl(o.cid):d.getDownloadUrl(o.downloadUrl,o.appName),{hasApp:n,pageType:a,os:s,version:i,openUrl:c,liveOpenUrl:c,url:r}}}}(tvp,tvp.$),tvp.PLAYER_DEFINE={LIVE:1,VOD:2},tvp.defaultConfig={video:null,width:600,height:450,autoplay:!1,autoplayAfterLoadingad:!0,loadingadAutoplay:!1,isSkipLoadingAd:!1,skipLoadingAdTime:5,loadingadChid:"",skipLoadingAdText:"你可在{$sec}秒后关闭广告",skipLoadingAdCloseText:"关闭广告",adForbiddenTitle:"应版权方要求，好莱坞会员无法跳过该剧广告",adForbiddenText:"为了给腾讯视频用户提供更多优质美剧，应版权方(华纳)要求，好莱坞会员在观看华纳美剧时无法跳过广告（《吸血鬼日记》《破产姐妹》《无耻之徒》等）。我们会为会员用户继续争取免广告权益，请您继续支持，谢谢!",mute:!1,html5loop:!1,disableShortVideoPause:!1,volume:50,modId:"mod_player",playerid:"",coverId:"",typeId:0,pic:"",type:tvp.PLAYER_DEFINE.VOD,playerType:"auto",loadingswf:"",oid:"",share:!0,isHtml5UseHLS:"auto",isShowDurationLimit:!0,isHtml5AutoBuffer:!1,isHtml5UseAirPlay:!0,isHtml5ControlAlwaysShow:!1,html5Preload:"none",html5VodUIFeature:["controlbar","tips","title","meta","playpause","progress","timepanel","definition","volume","fullscreen","overlay","bigben","posterlayer","shadow","promotion","loadingAd","adonend","bullet","preview","verticalbullet"],html5LiveUIFeature:["controlbar","tips","playpause","fullscreen","overlay","posterlayer","shadow","bullet","loadingAd"],html5LiveFrontShow:["liveDownloader"],html5FeatureExtJS:{adonend:"//imgcache.qq.com/tencentvideo_v1/tvp/js/plugins/adonend.js?max_age=86400"},html5ForbiddenUIFeature:[],isHtml5UseUI:!0,HTML5CSSName:"",isHtml5ShowPosterOnStart:!0,isHtml5ShowPosterOnEnd:!1,isHtml5ShowPosterOnChange:!0,isiPhoneShowPosterOnPause:!1,isiPhoneShowPlaysinline:!0,isHtml5ShowPlayBtnOnPause:!0,isHtml5UseFakeFullScreen:!tvp.$.os.ios,isIOSVideoOffset:!0,isHtml5ShowLoadingAdOnStart:!tvp.$.os.phone,isHtml5ShowLoadingAdOnChange:!tvp.$.os.phone,isHtml5ShowLoadingAdOnReplay:!0,specialVideoFileDomain:"",flashWmode:"direct",vodFlashUrl:"",vodFlashType:"TPout",vodFlashExtVars:{},vodFlashListType:2,vodFlashSkin:"",isVodFlashShowCfg:!0,isVodFlashShowEnd:!0,isVodFlashShowSearchBar:!0,isVodFlashShowNextBtn:!0,liveFlashUrl:"",liveFlashSwfType:"TencentPlayerLive",isLiveFlashShowConfigBtn:!0,isLiveflashShowFullBtn:!0,isLiveFlashShowCfg:!0,liveFlashWatermark:"",liveFlashAppType:"",liveFlashExtVars:{},flashVersionTag:"20140714",ocxControlBar:"",ocxControlHeight:60,ocxSkin:"",isOcxShowPauseBtn:!1,isOcxHideControl:!1,plugins:{AppBanner:!1,AppRecommend:!1,AppDownloadOnPause:!1,AppBannerOnPause:!1,AppFollow:!1},pluginUrl:{AppBanner:"js/plugins/appbanner.js?v="+tvp.ts,AppFollow:"js/plugins/appfollow.js?v="+tvp.ts,AppRecommend:"js/plugins/apprecommend.js?v="+tvp.ts,AppRecommendBanner:"js/plugins/apprecommendbanner.js?v="+tvp.ts,AppDownloadOnPause:"js/plugins/appdownloadonpause.js?v="+tvp.ts,AppBannerOnPause:"js/plugins/appbanneronpause.js?v="+tvp.ts,AppDownloadClickWechat:"js/plugins/appdownloadclickwechat.js?v="+tvp.ts,AppDownloadClickMqq:"js/plugins/appdownloadclickmqq.js?v="+tvp.ts},cssPath:tvp.common.get_css_path(),pluginCssUrl:{},libpath:tvp.common.get_js_path(),noLimitBtn:!1,isContinuePlay:!0,h5VodBullet:!1,h5LiveBullet:!1,caseSetting:{},limitSetting:{downloader:!0},useLimitCase1UI:!0,definition:{fhd:"蓝光1080P",shd:"超清720P",hd:"高清480P",sd:"流畅270P"},isShortVideo:!1,longVideoID:"",useHtml5VerticalBullet:!1,verticalBulletID:"",flashFakeFullscreenZindex:9999,livepid:""},function(e){tvp=tvp||{},tvp.fastclick=function(t){var n=e(t),o={},i=e.os.hasTouch;i&&(n.attr("data-fastclick",1),n.on("touchstart",function(e){e=i?e.touches[0]:e,o.start=+new Date,o.tar=e.target,o.x1=e.pageX,o.y1=e.pageY}).on("touchend",function(t){if(t.preventDefault(),t&&t.changedTouches&&t.changedTouches.length){t=t.changedTouches[0];var n,i,r;return o.end=+new Date,o.x2=t.pageX,o.y2=t.pageY,n=Math.abs(o.x2-o.x1),i=Math.abs(o.y2-o.y1),r=o.end-o.start,30>n&&30>i&&300>r?(e(o.tar).trigger("fastclick"),!1):void 0}}))}}(tvp.$),function(e){var t=function(e,n){return function(o,i){var r=/\s/.test(o)?function(e){var t,o=[n],i=[[]];for(t in e)o.push(t),i.push(e[t]);return new Function(o,r.$).apply(e,i).join("")}:e[o]=e[o]||t(document.getElementById(o).innerHTML);return r.$=r.$||n+".push('"+o.replace(/\\/g,"\\\\").replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join(n+".push('").split("\r").join("\\'")+"');return "+n,i?r(i):r}}({},"$"+ +new Date);e.tmpl=t}(tvp.$),function(e){"undefined"==typeof e.getScript&&(e.getScript=function(e,t){var n=document.createElement("script"),o=document.getElementsByTagName("head")[0],i=/^(?:loaded|complete|undefined)$/;n.async="async",n.src=e,n.charset="utf-8",t&&(n.onload=n.onerror=n.onreadystatechange=function(){i.test(n.readyState)&&(n.onload=n.onerror=n.onreadystatechange=null,window.DEBUG||o.removeChild(n),n=null,t())}),o.appendChild(n)})}(tvp.$),tvp.report=function(){function e(){return 0==s.length?(r=!0,void(a=null)):(clearTimeout(i),n(s.splice(0,1)),void(r=!1))}function t(e){return tvp.dataset.openLazy?e&&e.toLowerCase&&e.toLowerCase().indexOf("bossid=2865")>-1?!1:!0:(c&&c.length&&(s=c.concat(s),c=[]),!1)}function n(n){clearTimeout(i),n&&"array"===tvp.$.type(n)&&n.length&&(n=n[0]),t(n)?c.push(n):(a=document.createElement("img"),a.onerror=e,a.src=n),setTimeout(e,1e3)}function o(e){return e&&/^(?:ht|f)tp(?:s)?\:\/\/(?:[\w\-\.]+)\.\w+/i.test(e)?null==a?(n(e),void(r=!1)):r?(n(e),void(r=!1)):void s.push(e):void 0}var i,r=!0,a=null,s=[],c=[];return tvp.$.browser.WeChat?tvp.$(document).off("tvp:report:continue").on("tvp:report:continue",e):(tvp.dataset.openLazy=!1,e()),function(e){if(tvp.$.isString(e))return void o(e);if("object"==tvp.$.type(e)){var t,n={deviceId:"int1",platformId:"int2",appId:"int3",speed:"int4",contentId:"str1",fileName:"str2"},i={cmd:-1,url:window!=top?document.referrer:document.location.href,ver:tvp.ver.replace(/\$/g,""),ua:navigator.userAgent,int1:tvp.common.getDeviceId(),int2:tvp.common.getPlatformId(),int3:0,int4:0,str1:"",str2:tvp.filename},r="http://rcgi.video.qq.com/web_report?";for(t in n)t in e&&(e[n[t]]=e[t],delete e[t]);e=tvp.$.extend(i,e),r+=tvp.$.param(e),o(r)}}}(),tvp.ajax=function(e){function t(e,t){e=e||{},t=String(t);var n,o=/([\d\w_]+)/g;for(o.lastIndex=0;null!==(n=o.exec(t))&&(e=e[n[0]],void 0!==e&&null!==e););return e}function n(e){return e=e.slice(0,e.indexOf("?")),e=e.split("/"),{host:e[2],path:"/"+e.slice(3).join("/")}}function o(e,t,o,i){var r="http://c.isdspeed.qq.com/code.cgi",a=n(e);tvp.report(r,{domain:a.host,cgi:a.path,type:t,code:o,time:i})}function i(n,i){if("object"==e.type(n)&&n.url&&"string"==typeof n.url){"object"==typeof i&&(i=e.extend({key:"suc",value:0},i));var r=e.Deferred(),a=e.now(),s=0,c=e.extend({dataType:"jsonp"},n);return e.ajax(c).done(function(c){var d=c&&"object"==typeof i?t(c,i.key):0;s=e.now()-a,c&&"undefined"!=typeof d&&d==i.value?(o(n.url,1,d,s),r.resolve(c,s)):(o(n.url,3,d,s),r.resolve(c,s))}).fail(function(t){s=e.now()-a,o(n.url,2,900,s),r.reject(t,s)}),r}}return i}(tvp.$),tvp.reportErr=function(e,t){t=t||"tvperror";var n="http://rcgi.video.qq.com/report/jsbossrep?block="+t+"&ret=-1&level=4&msg=";e=[location.href,navigator.userAgent,tvp.filename,tvp.ver,e].join("|"),e=encodeURIComponent(e),n+=e,tvp.report(n)},tvp.bossReport={rcmdTextReport:function(e,t,n,o){var i,r,a,s,c,d;o=o||0,a=window.navigator.userAgent.toLowerCase(),r=a.indexOf("qzone")>-1,c=tvp.app.pageType,d=tvp.common.getUin(),s=1===c?2:2===c?4:r?6:-1,i={oper:e,iplat:s,tab:t,rlist:n,host:location.hostname,url:top.location.href||window.location.href,rtype:0,ptype:21,uin:d,int1:o,int2:tvp.common.getDeviceId()};var l="http://btrace.video.qq.com/kvcollect?BossId=2745&Pwd=0&_dc="+Math.random();l+="&"+tvp.$.param(i),tvp.report(l)},window_error:function(){},play_report:function(e){if(e&&!tvp.$.isEmptyObject(e)){var t="http://btrace.video.qq.com/kvcollect?BossId=2865&Pwd=1698957057&_dc="+Math.random();t+="&"+e.join("&"),tvp.report(t)}},user_action_report:function(e){var t={sop:e.actions,url:e.url||top.location.href,platform:tvp.common.getDeviceId(),vid:e.vid},n="http://btrace.video.qq.com/kvcollect?BossId=2797&Pwd=219856622&_dc="+Math.random();n+="&"+tvp.$.param(t),tvp.report(n)},apprecommend_report:function(e){var t,n=tvp.app.pageType,o=window.navigator.userAgent.toLowerCase(),i=o.indexOf("qzone")>-1;t=1===n?2:2===n?4:i?6:-1;var r={oper:e.oper,tab:e.tab_id,vid:e.vid,rlist:e.rlist,page:e.page,url:top.location.href||window.location.href,iplat:t,ptype:21,rtype:1},a="http://btrace.video.qq.com/kvcollect?BossId=2745&Pwd=0&_dc="+Math.random();a+="&"+tvp.$.param(r),tvp.report(a)},report_bullet_switch:function(e){e=e||{};var t=tvp.$;if(e.platform=t.os.android?1:t.os.iphone?2:t.os.ipad?3:4,e.url=window.location.href,"undefined"!==t.type(e.user_action)){var n="http://btrace.video.qq.com/kvcollect?BossId=3084&Pwd=1539562724&_dc="+Math.random();n+="&"+t.param(e),tvp.report(n)}},h5_live_quality:function(e){var t={step:e.step,sid:e.sid,vurl:e.vurl||"",guid:e.guid,playno:e.playno,vdef:e.vdef,tpay:e.tpay,cpay:e.cpay,fplayerver:tvp.ver.replace(/\$/g,""),ftime:+new Date,ctime:+new Date,rtime:+new Date,sdtfrom:tvp.common.get_stdfrom(),platform:tvp.common.get_platform(),surl:location.href,sref:document.referrer,vip_type:"",adid:"",ptag:tvp.$.getUrlParam("ptag",location.href)},n="http://btrace.video.qq.com/kvcollect?BossId=3101&Pwd=1037836152&_dc="+Math.random();n+="&"+tvp.$.param(t),tvp.report(n)},appReportShowClick:function(e,t){var n="http://btrace.video.qq.com/kvcollect?BossId=3267&Pwd=1887953802&",o={cmd:-1,url:window!=top?document.referrer:document.location.href,ver:tvp.ver.replace(/\$/g,""),ua:navigator.userAgent,int1:tvp.common.getDeviceId(),int2:tvp.common.getPlatformId(),int3:0,int4:0,str1:"",str2:tvp.filename};e=tvp.$.extend(o,e),e.iSta=e.cmd,delete e.cmd,e=tvp.$.extend(e,{iTy:3267,iQQ:tvp.$.cookie&&tvp.$.cookie.get&&(tvp.$.cookie.get("uin")||tvp.$.cookie.get("luin"))}),e.iQQ&&(e.iQQ=e.iQQ.replace(/\D/gi,"")),e.isshortvd=t&&t.config&&t.config.isShortVideo?t.config.useHtml5VerticalBullet?2:1:0,t&&t.dataset&&t.dataset.noShortVideoData&&(e.isshortvd=3),n+=tvp.$.param(e),tvp.report(n)}},function(){tvp.common&&tvp.common.afterWeChatReady&&tvp.$.browser.WeChat&&tvp.common.afterWeChatReady({timeout:5e3}).done(function(){tvp.dataset.openLazy=!1,tvp.$(document).trigger("tvp:report:continue")})}(),tvp.retCode={snid:0,TYPE:{SUC:1,ERR:2},config:{cgi:"http://isdspeed.qq.com/cgi-bin/v.cgi",sampling:1},commCode:{error:11,MQzone_Err:12},report:function(e,t,n,o){if(e&&!(isNaN(t)||1>t)&&"undefined"!=typeof n){var i=this.config.cgi;i+="?flag1="+e.toString()+"&flag2="+t.toString()+"&1="+tvp.retCode.config.sampling+"&2="+n,o&&(i+="&flag3="+o.toString()),tvp.report(i)}}},tvp.RetCode=function(e){this.appid=e,this.timer={begin:0,end:0},this.SNID=tvp.retCode.snid,this.isReported=!1,tvp.retCode.snid++},tvp.RetCode.prototype={begin:function(){this.timer.begin=(new Date).valueOf()},end:function(){this.timer.end=this.timer.end||(new Date).valueOf()},report:function(e,t){if(!this.isReported){this.end();var n=this.timer.end-this.timer.begin;tvp.retCode.report(this.appid,e,n,t),this.isReported=!0}},reportSuc:function(){this.report(tvp.retCode.TYPE.SUC)},reportErr:function(e){e=e||tvp.retCode.commCode.error,this.report(tvp.retCode.TYPE.ERR,e)}},function(e,t){var n={poster:"",prefix:0,tail:0,tagStart:0,tagEnd:0,duration:"",historyStart:0,pay:0,eduext:0,classType:0,yyactid:0,coverId:"",title:"",isLookBack:0,tstart:0,CDNType:0,vFormat:"",LiveReTime:"",typeId:0,format:t.os.ipad||t.os.MIPAD?"mp4":"auto",channelExtParam:{},pid:"",rid:"",guid:"",bulletId:"",bullet:!1,h5BulletId:"",freeFlowHelper:!1};e.VideoInfo=function(){function o(e){return e.indexOf("_")<0?e:e.split("_")[0]}function i(e){return e.indexOf("_")<0?0:parseInt(e.split("_")[1])}function r(e){for(var t=[],n=e.split("|"),i=0;i<n.length;i++)t.push(o(n[i]));return t.join("|")}function a(){h&&h instanceof e.Player&&h.on(e.ACTION.onVodH5Init,function(){var t;"auto"===h.config.isHtml5UseHLS&&e.common.isUseHLS()||h.config.isHtml5UseHLS||(t=f.getMP4Url(),f.callGetMp4UrlDefer.resolve(t))})}var s="",c="",d=0,l=0,p="",u="",f=this,v={},h=null,g={},m=null;t.extend(v,n),this.data={},this.url="",this.lastQueryVid="";var w=t.getData("tvp-guid");w?n.guid=w:(w=t.createGUID(),t.setData("tvp-guid",w),n.guid=w),this.callGetMp4UrlDefer=t.Deferred(),t.each(v,function(e){var t=e.charAt(0).toUpperCase()+e.substr(1);f["set"+t]=function(t){return v[e]=t,this},f["get"+t]=function(){return v[e]}}),this.setCurPlayer=function(e){h=e,a()},this.setVid=function(n){if(e.$.isString(n)){if(this.clear(),p=n,n.indexOf("|")<0){var a=o(n);s=a,l=i(n),c=a}else{var d=n.split("|");s=o(d[0]),l=i(d[0]),c=r(n)}return s=t.filterXSS(s),c=t.filterXSS(c),this}},this.getVid=function(){return s},this.getVidList=function(){return c},this.getVidArray=function(){return c.split("|")},this.getIdx=function(){return l},this.getDuration=function(){if(!v.duration)return this.data&&this.data.vl&&t.isArray(this.data.vl.vi)&&this.data.vl.vi.length>0&&0!=this.data.vl.vi[0].td?this.data.vl.vi[0].td:0;for(var e=v.duration.split("|"),n=0,o=0,i=e.length;i>o;o++)n+=parseInt(e[o]);return n},this.getFileSize=function(){return this.data&&this.data.vl&&this.data.vl.vi&&this.data.vl.vi[0]&&this.data.vl.vi[0].fs?parseInt(this.data.vl.vi[0].fs,10):0},this.getTimelong=function(){return this.getDuration()},this.getEndOffset=function(){return this.getDuration()-this.getTail()},this.setChannelId=function(t){return e.$.isString(t)?(u=t,this):void 0},this.getChannelId=function(){return u},this.getFullVid=function(){return 0==this.getIdx()?o(this.getVid()):o(this.getVid())+"_"+this.getIdx()},this.getTitle=function(){return""===v.title&&this.data&&("mp4"==this.data.playtype&&this.data.vl&&t.isArray(this.data.vl.vi)&&this.data.vl.vi.length>0?v.title=this.data.vl.vi[0].ti||"":"hls"==this.data.playtype&&t.isArray(this.data.vi)&&this.data.vi.length>0&&(v.title=this.data.vi[0].title||"")),v.title},this.clear=function(){s="",c="",d=0,l=0,u="",m=null,g={},t.extend(v,n),this.data={},this.url=""},this.clone=function(e){e.setVid(p),e.setChannelId(u);for(var n in v){var o=n.charAt(0).toUpperCase()+n.substr(1);e["set"+o](this["get"+o]())}t.extend(e.data,this.data)},this.getVideoSnap=function(){var t=[];return t[0]=e.common.getVideoSnap(s,l),t[1]=t[0].replace("_160_90_3","_1"),t[2]=t[1].replace("_1.jpg",".png"),t},this.getMP4Url=function(n,o){var i="",r=this.getVidArray(),a="";if(t.isString(n)){if(i=n,t.inArray(n,r)<0){var s=t.Deferred();return s.reject(),s}}else isNaN(n)?(i=this.getVid(),a=this.getFullVid()):a=i=this.getVidArray()[n>=r.length?0:n];this.lastQueryVid=a||i,this.setRid(t.createGUID());var c,d=i+"_mp4_"+this.getFormat();if(o&&(c=t.Deferred()),"object"==t.type(g[d])&&t.isFunction(g[d].done)&&"resolved"==g[d].state())return g[d];g[d]=t.Deferred();var l=this;return e.h5Helper.loadVideoUrlByVid({vid:i,isPay:this.getPay(),eduext:v.eduext?v.eduext:0,yyactid:v.yyactid?v.yyactid:0,classType:v.classType,fmt:this.getFormat(),appId:h instanceof e.Player?h.config.appid:0,contentId:h instanceof e.Player?h.config.contentId:""}).done(function(e,n,o,i){window.txvLogin&&txvLogin.isLogin&&txvLogin.isLogin(function(e){l.tpay=n&&8===n.st?0:2,e||(l.tpay=-2)});var r=l.getFreeFlowHelper(),a=!1,s=function(e){"array"===t.type(e)?(l.url=e[0],l.dataHls=e,e=e[0]):l.url=e,l.data=n,l.data.playtype="mp4","undefined"!=typeof o&&(l.videoSlice=o),"undefined"!=typeof i&&(l.dataJson=i,l.setDuration(i.preview+"")),c?c.resolve(e):g[d]&&g[d].resolve(e)};"function"===t.type(r)?(r(e,function(e){a=!0,s(e)}),setTimeout(function(){a||s(e)},5e3)):s(e)}).fail(function(e,n){g[d]&&g[d].reject(e,t.isUndefined(n)?0:n)}),c?c:g[d]},this.switchDefinition=function(n){var o=t.Deferred(),i=this;return e.h5Helper.loadVideoUrlByVid({vid:this.getVid(),isPay:this.getPay(),eduext:this.getEduext(),yyactid:this.getYyactid(),classType:this.getClassType(),fmt:n||this.getFormat(),appId:h instanceof e.Player?h.config.appid:0,contentId:h instanceof e.Player?h.config.contentId:""}).done(function(e,n,r,a){var s=i.getFreeFlowHelper(),c=!1,d=function(e){i.url=e,i.data=n,i.data.playtype="mp4","undefined"!=typeof r&&(i.videoSlice=r),"undefined"!=typeof a&&(i.dataJson=a,i.setDuration(a.preview+"")),o.resolve(e)};"function"===t.type(s)?(s(e,function(e){c=!0,d(e)}),setTimeout(function(){c||d(e)},5e3)):d(e)}).fail(function(e,n){o.reject(e,t.isUndefined(n)?0:n)}),o},this.getHLS=function(n){var o="",i=this.getVidArray(),r="";if(t.isString(n)){if(o=n,t.inArray(n,i)<0){var a=t.Deferred();return a.reject(),a}}else isNaN(n)?(o=this.getVid(),r=this.getFullVid()):r=o=this.getVidArray()[n>=i.length?0:n];this.lastQueryVid=r||o,this.setRid(t.createGUID());var s=o+"_hls_"+this.getFormat();if("object"==t.type(g[s])&&t.isFunction(g[s].done)&&"resolved"==g[s].state())return g[s];g[s]=t.Deferred();var c=this;return e.h5Helper.loadHLSUrlByVid({vid:o,isPay:this.getPay(),fmt:this.getFormat(),appId:h instanceof e.Player?h.config.appid:0,contentId:h instanceof e.Player?h.config.contentId:""}).done(function(e,t){c.url=e,c.data=t,c.data.playtype="hls",g[s]&&g[s].resolve(e)}).fail(function(e,n){g[s]&&g[s].reject(e,t.isUndefined(n)?0:n)}),g[s]},this.getPlayFormat=function(){if(!t.isPlainObject(this.data))return this.getFormat();if("object"==t.type(this.data.fl)&&t.isArray(this.data.fl.fi))for(var e=this.data.fl.fi,n=0;n<e.length;n++)if(1==e[n].sl)return e[n].name;return this.getFormat()},this.getSrtLangList=function(){return"object"==t.type(this.data.sfl)&&t.isArray(this.data.sfl.fi)?(t.each(this.data.sfl.fi,function(t,n){n.desc=e.html5lang.getSrtName(n.id)}),this.data.sfl.fi):[]},this.getSrtUrlList=function(n){if(t.isUndefined(n)){var o=this.getSrtLangList();if(!(o.length>0))return t.Deferred().reject(-1);n=o[0]}if("object"!=t.type(n)&&!isNaN(n)){for(var i=0,r=this.data.sfl.fi.length;r>i;i++)if(this.data.sfl.fi[i].id==n){n=this.data.sfl.fi[i];break}if("object"!=t.type(n))return t.Deferred().reject(-2)}var a=this.getVid(),s=a+"_srt_"+n.id;if("object"==t.type(g[s])&&t.isFunction(g[s].done)&&"resolved"==g[s].state())return g[s];g[s]=t.Deferred();var c=this;return e.h5Helper.loadSRT({vid:a,sflid:n.id,pid:c.getPid()}).done(function(e){var o=[];"object"==t.type(e.ul)&&t.isArray(e.ul.ui)&&t.each(e.ul.ui,function(e,t){o.push([t.url,"lang="+n.name].join("?"))}),g[s].resolve(o)}).fail(function(e){g[s].reject(e)}),g[s]},this.getFormatList=function(){if("object"==t.type(m)&&t.isFunction(m.done))return m;m=t.Deferred();var e=this,n=["sd","hd","shd","fhd"],o=function(){var o=[];return t.isPlainObject(e.data.fl)&&t.isArray(e.data.fl.fi)?(t.each(e.data.fl.fi,function(e,i){-1!=t.inArray(i.name,n)&&o.push(i.name)}),o):[]};return this.getMP4Url().done(function(){m.resolve({list:o()})}).fail(function(){m.reject({list:[]})}),m},this.hasHardSubtitle=function(){for(var e=this.getFormat(),t=0,n=this.data.fl.fi.length;n>t;t++){var o=this.data.fl.fi[t];if(o.name==e)return!!o.sb}return!1},this.hasSoftSubtitle=function(){return"object"==t.type(this.data.sfl)&&t.isArray(this.data.sfl.fi)&&this.data.sfl.fi.length>0}},e.PLAYTYPE={LIVE:"1",VOD:"2"}}(tvp,tvp.$),function(e){tvp.speedlimit={buildResult:function(t){var n=!1,o=!1,i=e.Deferred();return e.browser.MQQ&&e.browser.version>5.1&&(o=!0),o&&this.mqqGetResult(t).then(function(e){e?i.resolve(e):i.resolve()}),o&&(n=!0),n||i.resolve(),setTimeout(function(){i.resolve()},3e3),i},mqqGetResult:function(t){function n(){if(window.x5&&window.x5.getBrowserSignature)try{var n=parseInt(tvp.$.now()/1e3,10);x5.getBrowserSignature("vid:"+t+"["+n+"]",function(t){t?o.resolve({bver:e.browser.version,pkckey:t}):o.resolve()},function(){o.resolve()})}catch(i){o.resolve()}else o.resolve();setTimeout(function(){o.resolve()},300)}var o=e.Deferred();return window.x5&&window.x5.getBrowserSignature?n():tvp.app?(tvp.app.loadMqqDefer||(tvp.app.loadMqqDefer=tvp.app.loadMqqAPI()),tvp.app.loadMqqDefer.done(function(){n()}),tvp.app.loadMqqDefer.fail(function(){o.resolve()})):o.resolve(),o}}}(tvp.$);var o={};o.ha=function(e){function t(e,t){return((e>>1)+(t>>1)<<1)+(1&e)+(1&t)}for(var n=[],o=0;64>o;)n[o]=0|4294967296*Math.abs(Math.sin(++o));var i=function(o){for(var i,r,a,s,c=[],d=unescape(encodeURI(o)),l=d.length,p=[i=1732584193,r=-271733879,~i,~r],u=0;l>=u;)c[u>>2]|=(d.charCodeAt(u)||128)<<8*(u++%4);for(c[o=(l+8>>6)*e+14]=8*l,u=0;o>u;u+=e){for(l=p,s=0;64>s;)l=[a=l[3],t(i=l[1],(a=t(t(l[0],[i&(r=l[2])|~i&a,a&i|~a&r,i^r^a,r^(i|~a)][l=s>>4]),t(n[s],c[[s,5*s+1,3*s+5,7*s][l]%e+u])))<<(l=[7,12,17,22,5,9,14,20,4,11,e,23,6,10,15,21][4*l+s++%4])|a>>>32-l),i,r];for(s=4;s;)p[--s]=t(p[s],l[s])}for(o="";32>s;)o+=(p[s>>3]>>4*(1^7&s++)&15).toString(e);return o};return i}(16),o.stringToHex=function(e){for(var t="",n=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"),o=0;o<e.length;o++)t+=n[e.charCodeAt(o)>>4]+n[15&e.charCodeAt(o)];return t},o.hexToString=function(e){for(var t="",n="0x"==e.substr(0,2)?2:0;n<e.length;n+=2)t+=String.fromCharCode(parseInt(e.substr(n,2),16));return t},o._Seed="#$#@#*ad",o.tempcalc=function(e,t){for(var n="",o=0;o<e.length;o++)n+=String.fromCharCode(e.charCodeAt(o)^t.charCodeAt(o%4));return n},o.u1=function(e,t){for(var n="",o=t;o<e.length;o+=2)n+=e.charAt(o);return n},o._urlStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o.urlenc=function(e,t,n){for(var i,r,a,s,c,d,l,p="",u=0;u<e.length;)i=e.charCodeAt(u++),r=e.charCodeAt(u++),a=e.charCodeAt(u++),15==u&&(p+="A",p+=t,p+=n),s=i>>2,c=(3&i)<<4|r>>4,d=(15&r)<<2|a>>6,l=63&a,isNaN(r)?d=l=64:isNaN(a)&&(l=64),p=p+o._urlStr.charAt(s)+o._urlStr.charAt(c)+o._urlStr.charAt(d)+o._urlStr.charAt(l);return p},o.$xx=function(e,t,n,i){var r=""+Math.floor((new Date).valueOf()/1e3),i=(""+i).charAt(0),a="",s="",c={plt:e||"",vid:t||"",std:n||"",sts:i||"",ts:r,rf:a,ua:s};
c=window.JSON?JSON.stringify(c):function(){var e=[];for(var t in c)e.push('"'+t+'":"'+c[t]+'"');return"{"+e.join(",")+"}"}(c);var d=o.hexToString(o.ha(e+t+r+o._Seed+a+s+i.charAt(0)+n)),l=o.urlenc(o.tempcalc(d,o._Seed),i.charAt(0),r),p=o.urlenc(o.tempcalc(d,"86FG@hdf"),i.charAt(0),r),u=o.u1(l,0),f=o.u1(l,1);return{p:c,u:l,c:p,u1:u,u2:f,t:r}},function(e,t){function n(){return this.init()}var o=[{reg:function(){return this.cfg.noAuth?!0:!1},request:function(e){var t=this;e.resolve({param:{vids:t.cfg.vid,defaultfmt:t.cfg.fmt}})}},{reg:function(){return this.cfg.eduext?!0:!1},request:function(e){var t=this;e.resolve({cgi:t.cfg2.cgi.edugetvinfo,param:{eduext:t.cfg.eduext,platform:261001,vid:t.cfg.vid,defn:t.cfg.fmt}})}},{reg:function(){return 1===this.cfg.classType?!0:!1},request:function(e){var t=this;e.resolve({cgi:t.cfg2.cgi.edugetvinfo,param:{platform:221001,vid:t.cfg.vid,defn:t.cfg.fmt}})}},{reg:function(){return this.cfg.yyactid?!0:!1},request:function(e){var t=this;e.resolve({cgi:t.cfg2.cgi.yygetinfo,cgi2:t.cfg2.cgi.yygetkey,param:{actid:t.cfg.yyactid,platform:181001,vids:t.cfg.vid,defaultfmt:t.cfg.fmt}})}},{reg:function(){if(window!==top&&"v.qq.com"===location.hostname&&"/iframe/player.html"===location.pathname){var t=e.common.getParams(location.href);if(t&&t.cKey&&t.encryptVer&&t.platform)return this.params=t,!0}return!1},request:function(e){var t,n=this,o={cgi:n.cfg2.cgi.getinfo,param:{encryptVer:n.params.encryptVer,platform:n.params.platform,cKey:n.params.cKey,vids:n.cfg.vid,defaultfmt:n.cfg.fmt}};try{t=window.parent.location.href}catch(i){}t&&(o.param.wxrefer=t),e.resolve(o)}},{reg:function(){return e.common.is_mqq_buluo()?!0:!1},request:function(t){if(!window.getBrowserSignature)return void t.reject();var n=this;window.getBrowserSignature(n.cfg.vid,function(o){var i;if(o&&o.data)try{var r=JSON.parse(o.data);r&&r.result&&r.result.token&&(i=r.result.token)}catch(a){}i?t.resolve({param:{cKey:i,encryptVer:"6.4",platform:e.$.os.ios?"170408":"170308",vids:n.cfg.vid,defaultfmt:n.cfg.fmt}}):t.reject()})}},{reg:function(){return t.browser.MQQ&&!e.$.browser.MQQClient&&window===top?!0:!1},request:function(n){var o,i,r=this,a="undefined"!=typeof r.cfg.svr_time?r.cfg.svr_time+"":parseInt(+new Date/1e3)+"",s=function(){var e,o,i={vid:r.cfg.vid};i.timestamp=a,t.os.ios?(e=x5.ios.getBrowserSignature,o=t.os.ipad?i:"vid:"+i.vid+"["+i.timestamp+"]"):(e=x5.android.getBrowserSignature,o="vid:"+i.vid+"["+i.timestamp+"]"),e(o,function(e){if("object"==typeof e&&e.key&&e.ver&&e.platform){var t={cgi:r.cfg.cgi.getvinfo,param:{cKey:e.key,encryptVer:e.ver,platform:e.platform,vid:r.cfg.vid,defn:r.cfg.fmt}};n.resolve(t)}else if("object"==typeof e&&e.data){var t={cgi:r.cfg.cgi.getvinfo,param:{cKey:e.data,encryptVer:"4.0",platform:"161001",vid:r.cfg.vid,defn:r.cfg.fmt}};n.resolve(t)}else if("string"==typeof e){var t={cgi:r.cfg.cgi.getvinfo,param:{cKey:e,encryptVer:"4.0",platform:"161001",vid:r.cfg.vid,defn:r.cfg.fmt}};n.resolve(t)}else n.reject()},function(){n.reject()})};o=window.x5&&x5.ios&&"function"===t.type(x5.ios.getBrowserSignature),i=window.x5&&"function"===t.type(window.x5.getBrowserSignature),o||i?s():e.app.loadMqqAPI().done(function(){o=window.x5&&x5.ios&&"function"===t.type(x5.ios.getBrowserSignature),i=window.x5&&"function"===t.type(window.x5.getBrowserSignature),o||i?s():n.reject()}).fail(function(){n.reject()})}},{reg:function(){return t.browser.qqnews||t.browser.kuaibao?!0:!1},request:function(e){var n=this,o=n.cfg.vid,i="undefined"!=typeof n.cfg.svr_time?n.cfg.svr_time+"":parseInt(+new Date/1e3)+"",r="TVP_KUAIBAO_CB_"+i.substr(-4,4);window[r]=function(t){var o;try{o=JSON.parse(t)}catch(i){}if(o&&o.key&&o.ver&&o.platform&&o.sdtfrom){var r={param:{cKey:o.key,encryptVer:o.ver,platform:o.platform,sdtfrom:o.sdtfrom,vid:n.cfg.vid,defaultfmt:"mp4",clip:4}};e.resolve(r)}else e.reject()};var a=function(){var e={method:"getCKey",types:["string","string","string"],args:[o,i,r],instanceName:"TencentNewsScriptControllerJsInterface"},t="jsbridge://get_with_json_data?json="+encodeURIComponent(JSON.stringify(e))+"&_t="+i,n=new Image;n.src=t},s=function(){var e=function(){window.getBrowserSignature(o,i,r)};"function"==typeof window.getBrowserSignature?(e(),document.addEventListener("TencentNewsJSInjectionComplete",function(){e()})):document.addEventListener("TencentNewsJSInjectionComplete",function(){e()})};t.os.ios?s():t.os.android?a():e.reject()}},{reg:function(){return t.browser.douban||t.browser.liebao?!0:!1},request:function(e){var t,n=this,o="undefined"!=typeof n.cfg.svr_time?n.cfg.svr_time+"":parseInt(+new Date/1e3)+"",i=function(){if(!window.getBrowserSignature)return void e.reject();try{t=window.getBrowserSignature(n.cfg.vid,o)}catch(i){}if(t&&t.key&&t.ver&&t.platform){var r={param:{cKey:t.key,encryptVer:t.ver,platform:t.platform,vid:n.cfg.vid,defaultfmt:n.cfg.fmt}};e.resolve(r)}else e.reject()};i()}},{reg:function(){return e.$.browser.MQQClient&&"mqqcartoon"===e.$.getUrlParam("openS")?!0:!1},request:function(t){var n=this;e.$.getScript("http://imgcache.qq.com/club/client/comic/release/js/util/qqComicVideoAuth.js?t="+e.ts,function(){"function"===e.$.type(window.getBrowserSignature)?window.getBrowserSignature(n.cfg.vid,function(e){if(e&&-1!==e){var o={cgi:n.cfg2.cgi.getvinfo,param:{cKey:e,encryptVer:"6.4",platform:"170101",vid:n.cfg.vid,defn:n.cfg.fmt}};t.resolve(o)}}):t.reject()})}}];n.prototype={init:function(){return this.reg_request},reg_request:function(n,i){var r=this;r.cfg=n,r.cfg2=i;var a=t.Deferred(),s=!1;return e.config&&e.config.authRules&&e.config.authRules.length&&(o=o.concat(e.config.authRules)),t(o).each(function(e,n){return"function"!==t.type(n.reg)?!0:"function"!==t.type(n.request)?!0:n.reg.call(r)?(s=!0,n.request.call(r,a),!1):!0}),s||a.reject(),setTimeout(function(){a.reject()},6e3),a}},e.auth=new n}(tvp,tvp.$),function(e,t){function n(){var e="view.inews.qq.com"===l.host;return location.hostname.indexOf("caixin.com")>-1?"v1093":t.os.iphone||t.os.ipod?e?"v3110":"v3010":t.os.ipad?e?"v4110":"v4010":t.os.android?t.os.tablet?"v6010":e?"v5110":"v5010":t.browser.IEMobile?"v7010":"v1010"}function i(e,t){for(var n=0,o=t.length;o>n;n++)if(1==t[n].sl)return t[n].id;return-1}function r(n){var o={cmd:3532,speed:0,appId:0,contentId:"",vid:"",itype:1,val:0,val2:0,str3:""};n=t.extend(o,n),e.report(n)}function a(e){e=e||{};var o,i=!1;return e.alias&&"string"==typeof e.fn&&e.vid&&(e.fn=e.fn.replace(e.vid,e.alias),i=!0),p&&"string"==typeof e.path&&(e.path=e.path.replace(/\/\/(.+?)(\/|#|$|\?)/,function(){return arguments.length>1?arguments[0].replace(arguments[1],p):arguments[0]})),o=e.path.indexOf("?")>-1?e.path+"&"+e.fn+"&vkey="+e.vkey+"&br="+e.br+"&platform=2&fmt="+e.fmt+"&level="+e.level+"&sdtfrom="+n():e.path+e.fn+"?vkey="+e.vkey+"&br="+e.br+"&platform=2&fmt="+e.fmt+"&level="+e.level+"&sdtfrom="+n(),t.isString(e.sha)&&e.sha.length>0&&(o+="&sha="+e.sha),i&&(o+="&vidalias=1"),o}function s(e){if("object"!==t.type(e))return 0;if(!(e.ul&&e.ul.ui&&e.ul.ui.length))return 0;var n=[];return t(e.ul.ui).each(function(e,t){t.url&&t.hls&&t.hls.pt&&n.push(t.url+t.hls.pt)}),0===n.length?0:n}function c(e){return function(n){r(t.extend(e,n))}}function d(i){var r,a,s,c="",d=1,l={};if("object"==typeof o&&"function"==typeof o.$xx&&"string"==typeof i){r=t.getUrlParam("platform",i),a=t.getUrlParam("vids",i),s=n(),i.indexOf("mvgetinfo?")>-1&&(t.os.iphone?s="V3013":t.os.ipad?s="V4013":t.os.android&&(s="V5013"));try{l=o.$xx(r,a,s,d)}catch(p){"function"==typeof e.reportErr&&p&&p.message&&e.reportErr(p.message)}l&&(c=c+"&_qv_rmt="+l.u1,c=c+"&_qv_rmt2="+l.u2,t.getUrlParam("sdtfrom",i)||(c=c+"&sdtfrom="+s),i=i+(-1==i.indexOf("?")?"?":"&")+c,t.cookie.set("qv_als",l.c))}return i}var l={isHLS:!1,isPay:!1,vid:"",fmt:"auto",platform:11001,host:window!=top?document.referrer:document.location.host},p="";l.cgi=function(){if("view.inews.qq.com"===l.host){var n="";return t.browser.WeChat&&(n="nocache=1&"),{getinfo:e.common.get_request_url("getinfoInews"),getkey:e.common.get_request_url("getkeyInews")+n}}return{getinfo:e.common.get_request_url("getinfo")+"?callback=?&",getvinfo:e.common.get_request_url("getvinfo")+"?callback=?&",edugetvinfo:e.common.get_request_url("edugetvinfo")+"?callback=?&",yygetinfo:e.common.get_request_url("mvgetinfo")+"?callback=?&",yygetkey:e.common.get_request_url("mvgetkey")+"?callback=?&",getkey:e.common.get_request_url("getkey")+"?callback=?&"}}(),l.retryCgi=function(){return t.browser.WeChat||t.browser.MQQClient?{getinfo:l.cgi.getinfo.replace(/(\/\/)(.+?)(\/|$)/,"$1bkh5vv.video.qq.com$3"),getkey:l.cgi.getkey.replace(/(\/\/)(.+?)(\/|$)/,"$1bkh5vv.video.qq.com$3")}:{getinfo:l.cgi.getinfo.replace(/(\/\/)(.+?)(\/|$)/,"$1bkh5vv.video.qq.com$3"),getkey:l.cgi.getkey.replace(/(\/\/)(.+?)(\/|$)/,"$1bkh5vv.video.qq.com$3")}}(),e.h5Helper={loadVideoUrlByVid:function(n){var o="";return e.speedlimit?(o=t.Deferred(),e.speedlimit.buildResult().done(function(t){var i=e.h5Helper.loadVideoUrlByVid_base(n,t);i.done(function(e,t){o.resolve(e,t)}),i.fail(function(e,t){o.reject(e,t)})})):o=e.h5Helper.loadVideoUrlByVid_base(n),o},loadVideoUrlByVid_base:function(o,r){var p,u,f={},v={},h=0,g=t.Deferred();t.extend(t.extend(f,l),o);var m,w=new e.RetCode(100126),y=!1,b=l.cgi.getinfo,q=t.now(),I=0,x="",_=t.noop,k=l.cgi.getkey;m={platform:f.platform,charge:f.isPay?1:0,otype:"json",sphls:e.common.isSupportM3u8()?1:0,sb:1,nocache:t.browser.MQQClient||t.browser.WeChat?1:0,_rnd:(new Date).valueOf()},o.retryDefer&&t.isFunction(o.retryDefer.reject)&&(y=!0,g=o.retryDefer,b=l.retryCgi.getinfo,k=l.retryCgi.getkey),o.loadingAdCgi&&(b=o.loadingAdCgi,o.noAuth=!0),o.defer&&(g=o.defer),_=c({itype:1,val2:y?1:0,str3:x,vid:f.vid,appId:f.appId,contentId:f.contentId}),w.begin(),_();var S=function(i){if(I=t.now()-q,i&&i.s?"o"!=i.s?(h=i.em||50,u=i.exem):i.vl&&i.vl.vi&&t.isArray(i.vl.vi)&&0!=i.vl.cnt?p=i.vl.vi[0]:h=68:h=50,0!=h||5==p.fst&&t.isPlainObject(p.ul)&&t.isArray(p.ul.ui)&&0!=p.ul.ui.length?0==h&&2!=p.st&&(8!=p.st?h=62:i.vl&&i.vl.vi&&i.vl.vi[0]&&i.vl.vi[0].td&&parseInt(i.vl.vi[0].td)>parseInt(i.preview)&&(i.exem=1)):h=62,o.yyactid&&83===h&&(u=-3),e.common.is_mqq_buluo()&&(u=0),0!=h)return _({val:h,speed:I}),w.reportErr(h),void g.reject(h,u);if(w.reportSuc(),_({val:0,speed:I}),o.loadingAdCgi)return void g.resolve(p.ul.ui[0].url,{vl:i.vl,fl:i.fl,sfl:i.sfl,exem:i.exem,preview:i.preview});if(3==i.dltype)u=s(p),g.resolve(u,{vl:i.vl,fl:i.fl,sfl:i.sfl,exem:i.exem,preview:i.preview});else{if(p.fvkey)return u=a({path:p.ul.ui[0].url,fn:p.fn,vkey:p.fvkey,br:p.br,platform:2,fmt:f.fmt,level:p.level,sdtfrom:n(),sha:p.fsha,vid:f.vid,alias:p.alias}),void g.resolve(u,{vl:i.vl,fl:i.fl,sfl:i.sfl,exem:i.exem,preview:i.preview,st:p.st});C(i)}},C=function(r){var s,l=p.ul.ui[0];v.br=p.br,v.path=l.url,v.fn=p.fn,v.fiid=i(f,r.fl.fi),v.vt=l.vt,s=new e.RetCode(100127),s.begin(),q=t.now(),x=k+t.param({otype:"json",vid:f.vid,format:v.fiid,filename:v.fn,platform:f.platform,vt:v.vt,charge:f.isPay?1:0,_rnd:(new Date).valueOf()}),x=d(x),_=c({itype:2,val2:y?1:0,str3:x,vid:f.vid,appId:f.appId,contentId:f.contentId}),_(),t.ajax({url:x,dataType:"jsonp",jsonpCallback:"tvp_request_getvkey_callback_"+parseInt(1e6*Math.random())}).done(function(e){var o="";return h=0,I=t.now()-q,e&&e.s?"o"!=e.s&&(h=e.em||50):h=50,0!=h?(s.reportErr(h),_({val:h,speed:I}),void g.reject(h)):(o=a({path:v.path,fn:v.fn,vkey:e.key,br:v.br,platform:2,fmt:f.fmt,level:e.level,sdtfrom:n(),sha:e.sha,vid:f.vid,alias:p.alias}),s.reportSuc(),_({val:0,speed:I}),void g.resolve(o,{vl:r.vl,fl:r.fl,sfl:r.sfl,exem:r.exem,preview:r.preview}))}).fail(function(){s.reportErr(),_({val:500,speed:t.now()-q}),y?g.reject(500,2):(o.retryDefer=g,e.h5Helper.loadVideoUrlByVid(o))})},j=function(){x=b+t.param(m),r&&"object"===t.type(r)&&(x+="&"+t.param(r)),x=d(x),t.ajax({url:x,dataType:"jsonp",jsonpCallback:"tvp_request_getinfo_callback_"+parseInt(1e6*Math.random())}).done(function(t){if(!o.noAuth&&t&&0!=t.em&&"o"!=t.s){if(85===t.em&&-3===t.type&&1===o.cgi_auth_index)return o.cgi_auth_index+=1,o.defer=g,o.needTime=!0,o.svr_time=t.curTime,void e.h5Helper.loadVideoUrlByVid(o);if(83!==t.em||!m.eduext)return o.noAuth=!0,o.defer=g,void e.h5Helper.loadVideoUrlByVid(o)}S(t)}).fail(function(){if(w.reportErr(),_({val:500,speed:t.now()-q}),y)g.reject(500,1);else{var n=parseInt(700*Math.random()+300);setTimeout(function(){o.noAuth=!0,o.retryDefer=g,e.h5Helper.loadVideoUrlByVid(o)},n)}})};return o.cgi_auth_index||(o.cgi_auth_index=1),e.auth(f,l).done(function(e){e=e||{},"undefined"!==t.type(e.cgi)&&e.cgi&&(b=e.cgi),"undefined"!==t.type(e.cgi2)&&e.cgi2&&(k=e.cgi2),e.param&&t.extend(m,e.param),j()}).fail(function(){t.extend(m,{vids:f.vid,defaultfmt:f.fmt}),j()}),g},loadHDVideoUrlByVid:function(t){t.fmt="mp4",e.h5Helper.loadVideoUrlByVid(t)},loadHLSUrlByVid:function(n){var o={},i=t.Deferred();t.extend(t.extend(o,l),n);var r=new e.RetCode(100128),a="http://h5vv.video.qq.com/gethls?callback=?&"+t.param({vid:o.vid,charge:o.isPay?1:0,otype:"json",platform:o.platform,_rnd:(new Date).valueOf()}),s=c({itype:3,str3:a,vid:o.vid,appId:o.appId,contentId:o.contentId}),p=t.now();return a=d(a),s(),r.begin(),t.ajax({url:a,dataType:"jsonp"}).done(function(n){if(!n||!n.s)return r.reportErr(50),s({speed:t.now()-p,val:50}),void i.reject(50);if("o"!=n.s)return r.reportErr(n.em||50),s({speed:t.now()-p,val:n.em||50}),void i.reject(n.em||50);if(!n.vd||!n.vd.vi||!e.$.isArray(n.vd.vi))return r.reportErr(68),s({speed:t.now()-p,val:68}),void i.reject(68);for(var o=[],a=-2,c=0;c<n.vd.vi.length;c++)if(a=n.vd.vi[c].ch,2==n.vd.vi[c].st){var d=n.vd.vi[c].url.toLowerCase();if(!(d.indexOf(".mp4")<0&&d.indexOf(".m3u8")<0)&&n.vd.vi[c].url){var l=n.vd.vi[c];o.push(l.url);break}}return 0==o.length?(r.reportErr(68),s({speed:t.now()-p,val:68}),void i.reject(68,a)):(s({speed:t.now()-p,val:0}),r.reportSuc(),void i.resolve(o[0],n.vd))}).fail(function(){r.reportErr(),s({speed:t.now()-p,val:500}),i.reject(500,3)}),i},load3GVideoUrl:function(t){t.fmt="msd",e.h5Helper.loadVideoUrlByVid(t)},loadIsUseHLS:function(n){var o={},i=t.Deferred();t.extend(t.extend(o,l),n);var r=new e.RetCode(100125);return r.begin(),t.ajax({url:e.common.get_request_url("get_dtype")+"?callback=?&"+t.param({vids:o.vid,platform:o.platform,otype:"json",_rnd:(new Date).valueOf()}),dataType:"jsonp"}).done(function(e){var o=1;if("object"!=t.type(e))return r.reportErr(),void i.reject(500,4);if("o"!=e.s||!t.isArray(e.dl)||0==e.dl.length)return r.reportErr(e.em),void i.reject(e.em||50);for(var a=0,s=e.dl.length;s>a;a++)e.dl[a].vid===n.vid&&(o=e.dl[a].dltype);r.reportSuc(),i.resolve(o,e)}).fail(function(){r.reportErr(),i.reject(500,4)}),i},loadSRT:function(e){var n={},o=t.Deferred();return t.extend(t.extend(n,l),e),t.ajax({url:"http://h5vv.video.qq.com/getsurl?"+t.param({vid:n.vid,format:n.sflid,platform:n.platform,pid:n.pid,otype:"json",_rnd:(new Date).valueOf()}),dataType:"jsonp"}).done(function(e){return"object"!=t.type(e)?void o.reject(500):"o"!=e.s?void o.reject(isNaN(e.em)?500:e.em,e.msg||""):void o.resolve(e)}).fail(function(){o.reject(500)}),o},setSpecialVideoFileDomain:function(e){"string"==typeof e&&/^(\S+[\.])?qq\.com/.test(location.host)&&(p=e)}}}(tvp,tvp.$),function(){function e(){this.cache={},this.wxCallbacks=[]}var t={set:function(e,t,n,o,i){if(i){var r=new Date,a=new Date;a.setTime(r.getTime()+36e5*i)}return document.cookie=e+"="+t+"; "+(i?"expires="+a.toGMTString()+"; ":"")+(o?"path="+o+"; ":"path=/; ")+(n?"domain="+n+";":"domain="+window.location.host+";"),!0},get:function(e){var t=new RegExp("(?:^|;+|\\s+)"+e+"=([^;]*)"),n=document.cookie.match(t);return n?n[1]:""},del:function(e,t,n){var o=new Date;o.setTime(o.getTime()-1),document.cookie=e+"=; expires="+o.toGMTString()+";"+(n?"path="+n+"; ":"path=/; ")+(t?"domain="+t+";":"domain="+window.location.host+";")}},n={ajax:function(e,t,n){if(!e||"function"!=typeof t||"function"!=typeof n)return{error:"ajax params error"};var o;if(window.jQuery&&jQuery.ajax)o=jQuery.ajax;else if(window.Zepto&&Zepto.ajax)o=Zepto.ajax;else{if(!(window.tvp&&tvp.$&&tvp.$.ajax))return void n({error:"$.ajax not found"});o=tvp.$.ajax}e.success=function(e){t(e)},e.error=function(e){n({error:e})},o(e)}},o=navigator.userAgent.toLowerCase(),i={isqqlive:o.indexOf("qqlive")>-1},r={qqloginHash:"txvlogin_qqlogin_hash=1"},a=function(){function e(){for(var e;e=o.shift();)e(t)}var t=!0,o=[];return location.href.indexOf(r.qqloginHash)>-1&&(t=!1,n.ajax({url:"//video.qq.com/fcgi-bin/qq_login",dataType:"jsonp"},function(){location.href=location.href.replace(r.qqloginHash),t=!0,e()},function(){t=!0,e()})),function(e){t?e(t):o.push(e)}}();e.prototype={isLogin:function(e){e=e||function(){};var t=this;return i.isqqlive?void this.tvGetCookie(["qq","wx"],function(t){var n;try{n=JSON.parse(t)}catch(o){}n&&e(n.result&&n.result.qq?1:n.result&&n.result.wx?2:0)}):void this.getWXCookie(function(n){t.isQQLogin(function(o){return o&&n&&"qq"===n.main_login?void e(1,null):void t.isWXLogin(function(t){t&&"wx"===t.main_login?e(2,t):e(0,null)})})})},getUserInfo:function(e){e=e||function(){};var t=this;this.isLogin(function(n,o){return 0===n?void e({error:"not login"}):i.isqqlive?void t.tvGetUserInfo(["qq","wx"],function(t){var o,i;try{o=JSON.parse(t)}catch(r){}return o?(1===n?i="qq":2===n&&(i="wx"),void e(o&&o.result&&o.result[i]&&o.result[i].nickname?{nick:o.result[i].nickname,face:o.result[i].headImgUrl,type:i}:{error:"get tv "+i+" user info fail"})):void e({error:"parse tv cookie fail"})}):void(1===n?t.requestQQInfo(function(t){e(t&&t.nick?{nick:t.nick,face:t.qqface,type:"qq"}:{error:"requestQQInfo fail"})}):2===n&&e(o&&o.nick?{nick:decodeURIComponent(o.nick),face:o.head,type:"wx"}:{error:"get weixin info fail"}))})},checkQQLogin:function(e){e=e||function(){};var n=t.get("lskey"),o=t.get("luin"),i=t.get("uin"),r=t.get("skey");e(i&&r?2:n&&o?1:0)},isQQLogin:function(e){e=e||function(){},this.checkQQLogin(function(t){e(0!==t)})},isQQLowLogin:function(e){e=e||function(){},this.checkQQLogin(function(t){e(1===t)})},getUin:function(e){e=e||function(){};var n;this.isQQLowLogin(function(o){n=t.get(o?"luin":"uin"),n?(n=parseInt(n.replace(/^o0*/g,""),10),e(n)):e(0)})},getSkey:function(e){e=e||function(){};var n=t.get("skey"),o=t.get("lskey");e(n||o)},time33:function(e){for(var t=0,n=e.length,o=5381;n>t;++t)o+=(o<<5)+e.charAt(t).charCodeAt();return 2147483647&o},gTk:function(e){e=e||function(){};var t=this;this.getWXCookie(function(n){"wx"==n.main_login?e(t.time33(n.vusession),"wx"):t.getSkey(function(n){var o=n?t.time33(n):"";e(o,"")})})},requestQQInfo:function(e){e=e||function(){};var t,o=this,i=function(){o.checkQQLogin(function(n){return 0===n?void e({error:"qq not login"}):(t=1===n?1:0,void r())})},r=function(){n.ajax({url:"//video.qq.com/fcgi-bin/get_userinfo",data:{otype:"json",type:2,_:+new Date,low_login:t},dataType:"jsonp",timeout:5e3},function(t){t={qqface:t.data[0].headurl,nick:t.data[0].nick},e(t)},function(t){e(t)})};i()},openQQLogin:function(e){e=e||{};var t=location.protocol+"//video.qq.com/fcgi-bin/qq_login?redirect_url="+encodeURIComponent(e.s_url||location.href);delete e.s_url;var n="//ui.ptlogin2.qq.com/cgi-bin/login?",o={link_target:"blank",low_login:0,target:"self",style:9,appid:"532001601",pt_no_onekey:0,s_url:encodeURIComponent(t)},i=[];for(var r in o)i.push(e.hasOwnProperty(r)?r+"="+e[r]:r+"="+o[r]);n+=i.join("&"),setTimeout(function(){window.location.href=n},200)},qqLogout:function(){t.set("nickCookie","",location.host,"/",-24),t.set("encuinCookie","",location.host,"/",-24),t.set("skey","",".qq.com","/",-24),t.set("uin","",".qq.com","/",-24),this.isQQLowLogin(function(e){e&&(t.set("lskey","",".qq.com","/",-24),t.set("luin","",".qq.com","/",-24))}),(new Image).src="//video.qq.com/fcgi-bin/logout?_="+Math.random()},openWXLogin:function(e){e=e||window.location.href;var t="//video.qq.com/fcgi-bin/wx_login?from=1&redirect_url="+encodeURIComponent(e);document.location.href=t},getWXCookie:function(e){e=e||function(){};var t=this;a(function(){var n="//video.qq.com/getcookie/getcookie.html.html";if("qq.com"!==document.domain&&e({error:"document.domain不等于qq.com，跨域失败"}),t.cache.wxAuthCache)return void e(t.cache.wxAuthCache);t.wxCallbacks.push(e),window.txvGetLoginCookiesCallback=function(e){if(t.cache.wxAuthCache=e,setInterval(function(){t.cache.wxAuthCache=null},1e4),t.wxCallbacks&&t.wxCallbacks.length)for(var n;t.wxCallbacks.length;)n=t.wxCallbacks.shift(),"function"==typeof n&&n.call(t,e)};var o="tvp_login_cross_domin_frame",i=document.getElementById(o);i?t.cache.hasOwnProperty("wxAuthCache")&&(i.src=n):(i=document.createElement("iframe"),i.src=n,i.id=o,i.style.display="none",document.body.appendChild(i))})},isWXLogin:function(e){e=e||function(){};var t=this,n={};this.getWXCookie(function(o){return o&&o.access_token&&o.appid&&o.openid&&o.vuserid&&o.vusession&&o.refresh_token?void t.checkWXLogin(function(t){if(!t||t.errcode+""!="0")return void e(!1);if(t&&t.vuserid&&t.access_token){for(var i in o)n[i]=o[i];for(var i in t)n[i]=t[i];e(n)}else e(!1)}):void e(!1)})},checkWXLogin:function(e){e=e||function(){};var t="//video.qq.com/fcgi-bin/check_login",o=n.ajax({url:t,timeout:5e3,dataType:"jsonp"},function(t){e(t)},function(t){e(t)});o&&o.error&&e(o)},wxLogout:function(e){e=e||function(){};var t="//video.qq.com/fcgi-bin/logout";this.cache&&this.cache.wxAuthCache&&(this.cache.wxAuthCache=null);var o=n.ajax({url:t,dataType:"jsonp",timeout:5e3},function(t){e(t)},function(t){e(t)});o&&o.error&&e(o)},tenvideoJSReady:function(e){return e=e||function(){},"object"==typeof window.TenvideoJSBridge?void e():void document.addEventListener("onTenvideoJSBridgeReady",function(){e()},!1)},tvLogin:function(e,t){t=t||function(){},this.tenvideoJSReady(function(){TenvideoJSBridge.invoke("actionLogin",{type:e}),TenvideoJSBridge.on("onActionLoginFinish",t),TenvideoJSBridge.on("actionLoginFinish",t)})},tvLoginQQ:function(e){e=e||function(){},this.tvLogin("qq",e)},tvLoginWX:function(e){e=e||function(){},this.tvLogin("wx",e)},tvLoginTV:function(e){e=e||function(){},this.tvLogin("tv",e)},tvGetCookie:function(e,t){this.tenvideoJSReady(function(){TenvideoJSBridge.invoke("getCookie",{type:e},t)})},tvGetMainCookie:function(e){this.tenvideoJSReady(function(){TenvideoJSBridge.invoke("getMainCookie",null,e)})},tvGetUserInfo:function(e,t){this.tenvideoJSReady(function(){TenvideoJSBridge.invoke("getUserInfo",{type:e},t)})}};var s=new e;s.cookie=t,window.txvLogin=s}(),function(e,t){e.BasePlayer=function(){var n={};this.modId="",this.sessionId="",this.$mod=null,this.videomod=null,this.playerid="",this.curVideo=null,this.instance=null,this.dataset={},this.eventList=["ready","inited","play","playing","ended","allended","pause","resume","timeupdate","getnext","error","stop","fullscreen","change","write","flashpopup","getnextenable","msg","h5loadingadstart","h5loadingadend","volumechange","adplay"],this.config={},this.hijackFun=["getPlayer","getCurVideo","showPlayer","hidePlayer","play","pause","getPlaytime","setPlaytime","getPlayerType","resize"],this.prototype={},function(t){var n=["init","addParam","write","setPlayerReady"];n=n.concat(t.hijackFun);for(var o=0,i=n.length;i>o;o++)t.prototype[n[o]]=e.$.noop}(this),this.addParam=function(e,t){this.config[e]=t},this.on=function(e,o){e&&t.isFunction(o)&&(n[e]=t.isArray(n[e])?n[e]:[],n[e].push(o))},this.trigger=function(e){var o,i,r;if(e&&t.isArray(n[e]))for(i=0,r=n[e].length;r>i;i++)t.isFunction(n[e][i])&&(o=Array.prototype.slice.call(arguments,1),n[e][i].apply(null,o))},this.off=function(e,o){var i;e&&t.isArray(n[e])&&(o?(i=t.inArray(o,n[e]),i>=0&&(n[e][i]=void 0)):n[e]=void 0)}},e.BasePlayer.prototype={setCurVideo:function(e){this.curVideo=e},getPlayer:function(){return null},getCurVideo:function(){return this.curVideo},getCurVid:function(){return this.curVideo instanceof e.VideoInfo?this.curVideo.getVid():""},getCurVidList:function(){return this.curVideo instanceof e.VideoInfo?this.curVideo.getVidList():""},init:function(n){t.extend(this.config,n);for(var o=0,i=this.eventList.length;i>o;o++){var r="on"+this.eventList[o];this[r]=t.isFunction(this.config[r])?this.config[r]:e.$.noop}this.setCurVideo(this.config.video),this.write(this.config.modId)},write:function(e){t("#"+e).html("here is player of base")},log:function(e){window.console&&window.console.log(e)},getCBEvent:function(n){var o;return this.instance&&t.isFunction(this.instance[n])&&this.instance[n]!=e.$.noop?o=this.instance[n]:t.isFunction(this[n])&&this[n]!=e.$.noop&&(o=this[n]),o},callCBEvent:function(e){var n=this.getCBEvent(e);if(t.isFunction(n)){var o=Array.prototype.slice.call(arguments,1);return n.apply(this,o)}return void 0},resize:function(e,n){var o=this.getPlayer();o&&(o.style.width=t.formatSize(e),o.style.height=t.formatSize(n))},showPlayer:function(){},hidePlayer:function(){},execFlashMethod:function(e){var t,n=this.getPlayer(),o=[];if(n&&n[e]){o=[].slice.call(arguments,1);try{return t=n[e].apply(n,o)}catch(i){}}}}}(tvp,tvp.$),function(e,t){e.livehub={g_flashp2p:!1,iretcode:0,g_curCnlInfo:{},stepReport:function(n,o){var i={cmd:3545,val:n};"object"==t.type(o)&&(i=t.extend(i,{speed:o.delay,int5:o.code,vid:o.lid}),o.config&&(i=t.extend(i,{contentId:o.config.contentId,appId:o.config.appid}))),e.report(i)},FlashChecker:function(n){var o=this;this.cnlId="",this.extParam={},this.onError=t.noop,this.onCanFlash=t.noop,this.onCanHTML5=t.noop,this.onCanOCX=t.noop,this.onComplete=t.noop,this.onGetCnlId=t.noop;var i=function(t,o){o=o||{},o.config=n,e.livehub.stepReport(t,o)};this.onSuccess=function(n){n&&0==n.iretcode?(e.livehub.iretcode=n.iretcode,e.livehub.g_flashp2p=n.flashp2p?!0:!1,e.debug("get channel info:flashid="+n.flashid+",p2pid="+n.p2pid+",flashp2p="+n.flashp2p),o.cnlId=""+n.flashid||n.p2pid||"",o.onGetCnlId(""+o.cnlId,!1),e.livehub.getCurChannelInfo(o.cnlId,o.extParam),n.flashid?(i(5),o.onCanFlash(o.cnlId)):t.os.windows&&n.p2pid?(i(6),o.onCanOCX(o.cnlId)):(i(7,{code:n.iretcode}),o.onError(n.iretcode))):(i(8,{code:n.iretcode}),o.onError(500))},this.send=function(){if(i(1),e.common.isUseHtml5())return i(2),o.onCanHTML5(o.cnlId),void o.onComplete();var n=t.now();t.ajax({url:"http://info.zb.qq.com",data:{cmd:1,cnlid:o.cnlId||""},dataType:"jsonp"}).done(function(e,r){r=t.now()-n,i(3,{delay:r}),o.onSuccess(e),o.onComplete()}).fail(function(e,r){r=t.now()-n,i(4,{delay:r}),o.onError(),o.onComplete()})}},getCurChannelInfo:function(n,o){var i=e.livehub.g_curCnlInfo;o&&"object"==t.type(o)?(i.cnlId=o.cnlId,o.channelname&&(i.cnlName=o.channelname),o.currentname&&o.currenttime&&(i.prmInfo=o.currenttime+"|"+o.currentname)):i={}}}}(tvp,tvp.$),function(e,t){function o(n,o,i){var r=t.now(),s=r-a,c={cmd:3529,val:n,str4:o,speed:0>s?t.now()-r:s};a=r,"object"==t.type(i)&&t.extend(c,i),e.report(c)}function i(n,o){var i=n+"Defer";if(e[i])return e[i];var r=t.Deferred();e[i]=r;var a="//imgcache.qq.com/tencentvideo_v1/tvp/js/",c=n.toLowerCase();"OcxPlayer"==n&&"undefined"!=typeof QQLive&&"undefined"!=typeof QQLive.DEFINE&&(c="ocxplayerlite");var d=a+"module/"+c+".js?max_age=86400&v="+e.ts;if("function"==typeof e[n])r.resolve();else{var l=new e.RetCode(100123),p=t.now();l.begin(),o(1),t.getScript(d,function(){var i=t.now()-p;if("function"!=typeof e[n])throw l.reportErr(11),o(2,11,i),new Error(s[1]);o(2,0,i),l.reportSuc(),r.resolve()})}return r}function r(e){return"string"==t.type(e)&&/html5|mp4/i.test(e)}var a=t.now(),s=["未指明播放器内核","您当前使用的统一播放器JS文件不包含指定的播放器内核","video未初始化"],c=function(n,o){function a(){var e=t.Deferred();switch(m.playerType){case"flash":y="FlashPlayer";break;case"html5":u();break;case"ocx":y="OcxPlayer";break;case"mp4":y="MP4Link";break;default:s()}return e.resolve(),e}function s(){var t=navigator.platform.toLowerCase(),n=navigator.userAgent.toLowerCase(),o=e.version.getFlashMain(),i=/ipad|ipod|iphone|lepad_hls|IEMobile|WPDesktop/gi.test(n),r=(/MacIntel/gi.test(t),/ipad|ipod|iphone|playstation/gi.test(t));return e.common.isEnforceMP4()?void(y="MP4Link"):i||r||e.$.os.android?void(e.common.isSupportMP4()||e.common.isInUseH5()?u():y="MP4Link"):e.$.os.Mac&&"film.qq.com"===location.hostname?void(y="FlashPlayer"):e.$.os.Mac&&(10>o||!o)&&e.common.isSupportMP4()?void u():void(y="FlashPlayer")}function d(n){if(n.getChannelId()){var o=n.getChannelId();if("object"==t.type(w[o])&&t.isFunction(w[o].done))return w[o];w[o]=t.Deferred();var i=new e.livehub.FlashChecker(m),r=!0;return i.cnlId=n.getChannelId(),i.extParam=n.getChannelExtParam(),i.onGetCnlId=function(e,t){n.setChannelId(e),n.setIsLookBack(!!t)},i.onCanFlash=function(){y="FlashLivePlayer"},i.onCanHTML5=function(){f()},i.onCanOCX=function(){y="OcxPlayer"},i.onError=function(){l(),r=!1},i.onComplete=function(){p(),r?w[o].resolve():w[o].reject()},i.send(),w[o]}}function l(){e.common.isLiveUseHTML5()?f():y=t.os.android?"FlashLivePlayer":"OcxPlayer"}function p(){switch(m.playerType){case"flash":y="FlashLive";break;case"html5":f();break;case"flashLive":y="FlashLivePlayer";break;case"ocx":y="OcxPlayer"}}function u(){x=!0,y=m.isHtml5UseUI?"Html5Player":"Html5Tiny"}function f(){y=m.isHtml5UseUI?"Html5Live":"Html5LiveTiny"}function v(e){for(var t=!1,n=document.getElementsByTagName("link")||[],o=0,i=n.length;i>o&&!(t=n[o]&&n[o].href&&(n[o].href.indexOf(e)>0||-1!=n[o].href.indexOf("player_inews.css")));)o++;return t}function h(){function o(){if(!a){a=!0;var t=new e[y];t.init(n),g.resolve(t,y)}}var i=null,a=!1,s=t.inArray(y,I),c=m.cssPath+(n.HTML5CSSName||"player.css");(s>-1&&t.isString(n.HTML5CSSName)&&n.HTML5CSSName.length>0||r(y))&&!v(c)?(i=setTimeout(function(){n.isHtml5UseUI=!1,y=_[s],o()},5e3),c+=-1===c.indexOf("?")?"?t="+e.ts:"&t="+e.ts,t.loadCss(c).done(function(){clearTimeout(i),i=null,o()})):o()}var g=t.Deferred(),m={},w={},y="FlashPlayer",b=["未指明播放器内核","您当前使用的统一播放器JS文件不包含指定的播放器内核","video未初始化"],q=["FlashPlayer","FlashLivePlayer","MP4Link","OcxPlayer"],I=["Html5Player","Html5Live"],x=!1,_=["Html5Tiny","Html5LiveTiny"];if(q=q.concat(I),q=q.concat(_),t.extend(m,n),t.isUndefined(n.isHTML5UseUI)||(m.isHtml5UseUI=n.isHTML5UseUI),!n.video instanceof e.VideoInfo)throw new Error(b[2]);return n.video.setCurPlayer(o),c.checkLivePlayer=d,t.when(n.type==e.PLAYER_DEFINE.VOD?a():d(n.video)).then(function(){var r="",a=function(t,o,i){e.report({cmd:3531,val:t,val2:o||0,str3:r,speed:i||0,contentId:n.contentId||"",appId:n.appid||0})};if(!y)throw new Error(b[0]);if(t.inArray(y,q)<0)throw new Error(b[1]);n.type==e.PLAYER_DEFINE.VOD&&x&&o&&o.trigger&&o.trigger(e.ACTION.onVodH5Init),"function"!=typeof e[y]?i(y,a).done(function(){h.call(o)}):h.call(o)}),g},d={player:"playerType",showcfg:["isVodFlashShowCfg","isLiveFlashShowCfg"],searchbar:["isVodFlashShowSearchBar"],showend:["isVodFlashShowEnd"],tpid:["typeId"],cid:["coverId"],flashshownext:["isVodFlashShowNextBtn"],loadingswf:"loadingswf",wmode:"flashWmode",flashskin:["vodFlashSkin"],extvars:["vodFlashExtVars"],swftype:["vodFlashType"],swfurl:["vodFlashUrl","liveFlashUrl"]};e.Player=function(n,i){this.sessionId=t.createGUID(),o(1,this.sessionId),this.instance=null,this.config={},this._oldcfg={},t.extend(this.config,e.defaultConfig),this.setting("width",n),this.setting("height",i)},e.Player.fn=e.Player.prototype=new e.BasePlayer,t.extend(e.Player.fn,{setting:function(e,t){this.config[e]=t},output:function(e){this.setting("modId",e),this.create(this.config)},create:function(i){var r=this;r.config=t.extend({},r.config,i),o(2,this.sessionId,{contentId:r.config.contentId||"",appId:r.config.appid||0});var a=function(){c(r.config,r).done(function(n,a){try{o(3,r.sessionId,{vid:n.curVideo.getFullVid()||n.curVideo.getChannelId(),str3:n.getPlayerType(),contentId:r.config.contentId||"",appId:r.config.appid||0})}catch(s){}r.instance=n,r.instance.instance=r;for(var d in r.instance)"instance"!=d&&("on"==d.substr(0,2)&&t.isFunction(r[d])&&r[d]!=e.$.noop||(r[d]=r.instance[d]));n.callCBEvent("onwrite"),r.config.type==e.PLAYER_DEFINE.LIVE&&(r.play=function(n){t.isString(n)?(r.config.video.setChannelId(n),n=r.config.video):n instanceof e.VideoInfo&&t.when(c.checkLivePlayer(n)).then(function(){r.instance instanceof e[a]?r.instance.play(n):(i.video=n,c(i))})}),e.Player.instance[r.playerid]=r}).always(function(){function o(e,n){try{var o="build"+e;
return t.isFunction(r[o])?(r[o].call(r,n),!0):!1}catch(i){}}if(t.each(r.config.plugins,function(e,n){if(n&&e in r.config.pluginUrl){var i,a=t.isPlainObject(n)?n:{};if("AppRecommend"===e&&r.config.plugins.adonend)return;if(!o(e,a)){i=e;var s=r.config.libpath+r.config.pluginUrl[i];t.isString(s)&&""!=t.trim(s)&&t.getScript(s,function(){o(e,a)})}}}),window.console&&n){var i={jQuery:"jq",Zepto:"zepto",jq:"jqmobi"};for(var a in i)if("function"==typeof window[a]){if("jQuery"===a&&"function"!=typeof jQuery.Deferred)break;console.warn("\n"+e.name+"提示：\n您当前页面使用了"+a+"\n建议您引用"+e.name+" for "+a+"专用版，更轻更快更精简\nJS地址://imgcache.qq.com/tencentvideo_v1/tvp/js/tvp.player_v2_"+i[a]+".js\n\n")}}})},s=function(){var n,o=t.Deferred(),i="//v.qq.com/iframe/tvp.config.js";if(e.config)return o.resolve(),o;var r=parseInt(100*Math.random(),10)+1,a=100;return 100-a>r?(o.reject(),o):(n=t.getScript(i,function(){return e.config?void o.resolve():void o.reject()}),n&&"function"===t.type(n.fail)&&n.fail(function(){o.reject()}),setTimeout(function(){o.reject()},4e3),o)};s().done(function(){try{e.config&&e.config.defaultConfig&&t.extend(r.config,e.config.defaultConfig)}catch(n){}a()}).fail(function(){a()})},addParam:function(n,o){e.report({cmd:3546,val:1}),"config"==n&&"object"==t.type(o)?t.extend(this.config,o):this._oldcfg[n]=o},setCurVideo:function(t){e.report({cmd:3546,val:2}),this.config.video=t,t&&t instanceof e.VideoInfo&&t.setCurPlayer(this)},write:function(n){e.report({cmd:3546,val:3}),this.config.modId=n;var o=1==this._oldcfg.type?1:2,i=this;t.each(this._oldcfg,function(n,r){n in d?t.isArray(d[n])?2==o?i.config[d[n][0]]=r:1==o&&d[n].length>=2&&(i.config[d[n][1]]=r):t.isString(d[n])&&(i.config[d[n]]=r):n in e.defaultConfig&&(i.config[n]=r)}),delete this._oldcfg,this.create(this.config)}}),e.create=c}(tvp,tvp.$),tvp.Player.instance={},function(e){e.extend(e.fn,{createTVP:function(t){if(tvp.report({cmd:3546,val:4}),t=e.extend({},tvp.defaultConfig,t||{}),t.video){var n=null;t.video instanceof tvp.VideoInfo?n=t.video:(n=new tvp.VideoInfo,n.setVid(t.video.vid)),t.video=n,this.each(function(n,o){if("object"==e.type(o)&&1==o.nodeType){t.modId=o.id;var i=new tvp.Player;i.create(t)}})}}})}(tvp.$),function(e){tvp.modeHide=function(t,n){function o(){v.off("click.tvp_mode_hide").on("click.tvp_mode_hide",function(){var t;if(c=f.getPlayer(),t=c?e(c).attr("src"):f.$mod.find("a").attr("href")){if(!tvp.common.isSupportMP4()&&!tvp.common.isUseHtml5())return void(window.location.href=t);p.show(),setTimeout(function(){u.isend?(u.isend=!1,f.play()):c.play(),r(),setTimeout(function(){c.play()},100),i()},5)}})}function i(){u.isInit||(u.isInit=!0,e(c).on("ended",function(){f.cancelFullScreen()}).on("playing",function(){document.webkitIsFullScreen||c.webkitDisplayingFullscreen||l}).on("webkitendfullscreen",function(){a()}),e(document).on("webkitfullscreenchange fullscreenchange",function(){a()}))}function r(){s()?f.enterFullScreen():c.webkitEnterFullscreen()}function a(){c&&(document.webkitIsFullScreen||c.webkitDisplayingFullscreen||l||f.isFakeFullscreen&&f.isFakeFullscreen()||(c.pause(),p.hide()))}function s(){return tvp.$.os.android?tvp.$.browser.MQQ?!1:tvp.$.compareVersion(tvp.$.os.version,"4.4")>-1?!1:!0:!1}var c,d,l,p=e("#"+n.modId),u=new tvp.VideoInfo,f=new tvp.Player,v=e(t.btn);d={width:"100%",height:window.innerHeight,video:u,modId:n.modId,isHtml5UseUI:!0,isHtml5UseFakeFullScreen:s(),isiPhoneShowPlaysinline:!1,onwrite:function(){o()},onfullscreen:function(e){e=l,l||a()}},e.extend(d,n),n.type=n.type||2,1===n.type?(d.type=1,u.setChannelId(n.lid)):(d.type=2,u.setVid(n.vid)),f.create(d)}}(tvp.$),tvp.filename="tvp.player_v2_zepto.js","function"==typeof define&&define("tvp",[],function(){return tvp}),e.tvp=tvp,"undefined"!=typeof QQLive&&(e.QQLive=QQLive)}(this);