var Main=function(t){function e(){t.call(this),this.once(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.onAddToStage=function(t){var e=new egret.ImageLoader;e.once(egret.Event.COMPLETE,this.imgLoadHandler,this),e.load("resource/cartoon-egret_00.png")},s.launchCollisionTest=function(){this._iTouchCollideStatus=TouchCollideStatus.NO_TOUCHED,this._bShapeTest=!1,this.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchHandler,this),this.updateInfo(TouchCollideStatus.NO_TOUCHED)},s.checkCollision=function(t,e){var i=this._bird.hitTestPoint(t,e,this._bShapeTest);this._dot.x=t,this._dot.y=e,this.updateInfo(i?TouchCollideStatus.COLLIDED:TouchCollideStatus.TOUCHED_NO_COLLIDED)},s.touchHandler=function(t){switch(t.type){case egret.TouchEvent.TOUCH_MOVE:this.checkCollision(t.stageX,t.stageY);break;case egret.TouchEvent.TOUCH_BEGIN:this._txInfo.hitTestPoint(t.stageX,t.stageY)||(this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchHandler,this),this.stage.once(egret.TouchEvent.TOUCH_END,this.touchHandler,this),this.addChild(this._dot),this.checkCollision(t.stageX,t.stageY));break;case egret.TouchEvent.TOUCH_END:this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchHandler,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchHandler,this),this._dot.parent&&this._dot.parent.removeChild(this._dot),this.updateInfo(TouchCollideStatus.NO_TOUCHED)}},s.updateInfo=function(t){this._txInfo.text="碰撞检测结果："+["放上手指！","想摸我？","别摸我！！！"][t]+"\n\n碰撞检测模式："+(this._bShapeTest?"非透明像素区域":"矩形包围盒")+"\n（轻触文字区切换）"},s.imgLoadHandler=function(t){var e=this;this._bird=new egret.Bitmap(t.currentTarget.data),this.addChild(this._bird),this._bird.anchorOffsetX=this._bird.width/2,this._bird.anchorOffsetY=this._bird.height/2,this._bird.x=.5*this.stage.stageWidth,this._bird.y=.618*this.stage.stageHeight,this._dot=new egret.Shape,this._dot.graphics.beginFill(65280),this._dot.graphics.drawCircle(0,0,5),this._dot.graphics.endFill(),this._txInfo=new egret.TextField,this.addChild(this._txInfo),this._txInfo.size=28,this._txInfo.x=50,this._txInfo.y=50,this._txInfo.textAlign=egret.HorizontalAlign.LEFT,this._txInfo.textColor=0,this._txInfo.type=egret.TextFieldType.DYNAMIC,this._txInfo.lineSpacing=6,this._txInfo.multiline=!0,this._txInfo.touchEnabled=!0,this._txInfo.addEventListener(egret.TouchEvent.TOUCH_TAP,function(t){t.stopImmediatePropagation(),e._bShapeTest=!e._bShapeTest,e.updateInfo(TouchCollideStatus.NO_TOUCHED)},this),this.launchCollisionTest()},e}(egret.DisplayObjectContainer);egret.registerClass(Main,"Main");var TouchCollideStatus=function(){function t(){}var e=(__define,t);e.prototype;return t.NO_TOUCHED=0,t.TOUCHED_NO_COLLIDED=1,t.COLLIDED=2,t}();egret.registerClass(TouchCollideStatus,"TouchCollideStatus");